import{a as On,c as vn,d as Nr,e as is,f as Rr,g as Dr,i as os,l as as,m as ss,n as ls,o as cs,r as us,s as on,t as fs}from"./chunk-KG4FPA2W.js";import{a as Ka,b as Ja,c as $a,d as Ui,e as es,g as Mr,h as rn,i as ts,j as ns,k as rs}from"./chunk-E555E6H3.js";import{$ as ot,$a as ue,A as xn,Ab as Xa,Cb as Wa,Fb as Ya,Ja as et,Na as Pi,Q as jt,Sb as vr,T as Da,Ta as Ua,Tb as Za,Ua as Ha,Ub as qa,V as Be,Va as ja,Vb as Qa,Wa as Va,Xa as za,Ya as ht,Yb as Vt,Za as H,_ as it,_a as X,aa as La,ab as Me,ba as Pa,bb as Ne,c as q,d as Na,db as Tr,eb as at,fa as Ba,fb as Tn,gb as Or,ha as ka,ia as Fa,ib as Bi,jb as ki,k as Ra,kb as Fi,nb as V,o as Sr,ob as We,qb as Lt,rb as Pt,sb as Bt,wa as se,wb as Ga}from"./chunk-5DGU7OID.js";var dt=q(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});function ol(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}var al=function a(i,c){ol(this,a),this.data=i,this.text=c.text||i,this.options=c};ji.default=al});var ps=q(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.CODE39=void 0;var sl=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),ll=dt(),cl=ul(ll);function ul(a){return a&&a.__esModule?a:{default:a}}function fl(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hl(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function dl(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var gl=(function(a){dl(i,a);function i(c,u){return fl(this,i),c=c.toUpperCase(),u.mod43&&(c+=ml(wl(c))),hl(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return sl(i,[{key:"encode",value:function(){for(var u=Vi("*"),h=0;h<this.data.length;h++)u+=Vi(this.data[h])+"0";return u+=Vi("*"),{data:u,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),i})(cl.default),gs=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],xl=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Vi(a){return pl(xs(a))}function pl(a){return xl[a].toString(2)}function ml(a){return gs[a]}function xs(a){return gs.indexOf(a)}function wl(a){for(var i=0,c=0;c<a.length;c++)i+=xs(a[c]);return i=i%43,i}Fr.CODE39=gl});var Mn=q(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var er;function zi(a,i,c){return i in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,a}var ms=Ue.SET_A=0,ws=Ue.SET_B=1,Es=Ue.SET_C=2,o2=Ue.SHIFT=98,El=Ue.START_A=103,Cl=Ue.START_B=104,Al=Ue.START_C=105,a2=Ue.MODULO=103,s2=Ue.STOP=106,l2=Ue.FNC1=207,c2=Ue.SET_BY_CODE=(er={},zi(er,El,ms),zi(er,Cl,ws),zi(er,Al,Es),er),u2=Ue.SWAP={101:ms,100:ws,99:Es},f2=Ue.A_START_CHAR="\xD0",h2=Ue.B_START_CHAR="\xD1",d2=Ue.C_START_CHAR="\xD2",g2=Ue.A_CHARS="[\0-_\xC8-\xCF]",x2=Ue.B_CHARS="[ -\x7F\xC8-\xCF]",p2=Ue.C_CHARS="(\xCF*[0-9]{2}\xCF*)",m2=Ue.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]});var tr=q(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var yl=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),bl=dt(),_l=Il(bl),wt=Mn();function Il(a){return a&&a.__esModule?a:{default:a}}function Sl(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Tl(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Ol(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var vl=(function(a){Ol(i,a);function i(c,u){Sl(this,i);var h=Tl(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c.substring(1),u));return h.bytes=c.split("").map(function(p){return p.charCodeAt(0)}),h}return yl(i,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var u=this.bytes,h=u.shift()-105,p=wt.SET_BY_CODE[h];if(p===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&u.unshift(wt.FNC1);var C=i.next(u,1,p);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:i.getBar(h)+C.result+i.getBar((C.checksum+h)%wt.MODULO)+i.getBar(wt.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var u=this.options.ean128||!1;return typeof u=="string"&&(u=u.toLowerCase()==="true"),u}}],[{key:"getBar",value:function(u){return wt.BARS[u]?wt.BARS[u].toString():""}},{key:"correctIndex",value:function(u,h){if(h===wt.SET_A){var p=u.shift();return p<32?p+64:p-32}else return h===wt.SET_B?u.shift()-32:(u.shift()-48)*10+u.shift()-48}},{key:"next",value:function(u,h,p){if(!u.length)return{result:"",checksum:0};var C=void 0,_=void 0;if(u[0]>=200){_=u.shift()-105;var M=wt.SWAP[_];M!==void 0?C=i.next(u,h+1,M):((p===wt.SET_A||p===wt.SET_B)&&_===wt.SHIFT&&(u[0]=p===wt.SET_A?u[0]>95?u[0]-96:u[0]:u[0]<32?u[0]+96:u[0]),C=i.next(u,h+1,p))}else _=i.correctIndex(u,p),C=i.next(u,h+1,p);var w=i.getBar(_),N=_*h;return{result:w+C.result,checksum:N+C.checksum}}}]),i})(_l.default);Gi.default=vl});var _s=q(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});var an=Mn(),Cs=function(i){return i.match(new RegExp("^"+an.A_CHARS+"*"))[0].length},As=function(i){return i.match(new RegExp("^"+an.B_CHARS+"*"))[0].length},ys=function(i){return i.match(new RegExp("^"+an.C_CHARS+"*"))[0]};function Xi(a,i){var c=i?an.A_CHARS:an.B_CHARS,u=a.match(new RegExp("^("+c+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(u)return u[1]+"\xCC"+bs(a.substring(u[1].length));var h=a.match(new RegExp("^"+c+"+"))[0];return h.length===a.length?a:h+String.fromCharCode(i?205:206)+Xi(a.substring(h.length),!i)}function bs(a){var i=ys(a),c=i.length;if(c===a.length)return a;a=a.substring(c);var u=Cs(a)>=As(a);return i+String.fromCharCode(u?206:205)+Xi(a,u)}Wi.default=function(a){var i=void 0,c=ys(a).length;if(c>=2)i=an.C_START_CHAR+bs(a);else{var u=Cs(a)>As(a);i=(u?an.A_START_CHAR:an.B_START_CHAR)+Xi(a,u)}return i.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(h,p){return"\xCB"+p})}});var Ss=q(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});var Ml=tr(),Nl=Is(Ml),Rl=_s(),Dl=Is(Rl);function Is(a){return a&&a.__esModule?a:{default:a}}function Ll(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Yi(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Pl(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Bl=(function(a){Pl(i,a);function i(c,u){if(Ll(this,i),/^[\x00-\x7F\xC8-\xD3]+$/.test(c))var h=Yi(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,(0,Dl.default)(c),u));else var h=Yi(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u));return Yi(h)}return i})(Nl.default);Zi.default=Bl});var Os=q(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var kl=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Fl=tr(),Ul=Hl(Fl),Ts=Mn();function Hl(a){return a&&a.__esModule?a:{default:a}}function jl(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Vl(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function zl(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Gl=(function(a){zl(i,a);function i(c,u){return jl(this,i),Vl(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,Ts.A_START_CHAR+c,u))}return kl(i,[{key:"valid",value:function(){return new RegExp("^"+Ts.A_CHARS+"+$").test(this.data)}}]),i})(Ul.default);qi.default=Gl});var Ms=q(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var Xl=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Wl=tr(),Yl=Zl(Wl),vs=Mn();function Zl(a){return a&&a.__esModule?a:{default:a}}function ql(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Ql(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Kl(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Jl=(function(a){Kl(i,a);function i(c,u){return ql(this,i),Ql(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,vs.B_START_CHAR+c,u))}return Xl(i,[{key:"valid",value:function(){return new RegExp("^"+vs.B_CHARS+"+$").test(this.data)}}]),i})(Yl.default);Qi.default=Jl});var Rs=q(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var $l=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),ec=tr(),tc=nc(ec),Ns=Mn();function nc(a){return a&&a.__esModule?a:{default:a}}function rc(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ic(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function oc(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var ac=(function(a){oc(i,a);function i(c,u){return rc(this,i),ic(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,Ns.C_START_CHAR+c,u))}return $l(i,[{key:"valid",value:function(){return new RegExp("^"+Ns.C_CHARS+"+$").test(this.data)}}]),i})(tc.default);Ki.default=ac});var Ds=q(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.CODE128C=zt.CODE128B=zt.CODE128A=zt.CODE128=void 0;var sc=Ss(),lc=Ur(sc),cc=Os(),uc=Ur(cc),fc=Ms(),hc=Ur(fc),dc=Rs(),gc=Ur(dc);function Ur(a){return a&&a.__esModule?a:{default:a}}zt.CODE128=lc.default;zt.CODE128A=uc.default;zt.CODE128B=hc.default;zt.CODE128C=gc.default});var Nn=q(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var S2=sn.SIDE_BIN="101",T2=sn.MIDDLE_BIN="01010",O2=sn.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},v2=sn.EAN2_STRUCTURE=["LL","LG","GL","GG"],M2=sn.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],N2=sn.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]});var Rn=q(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var xc=Nn(),pc=function(i,c,u){var h=i.split("").map(function(C,_){return xc.BINARIES[c[_]]}).map(function(C,_){return C?C[i[_]]:""});if(u){var p=i.length-1;h=h.map(function(C,_){return _<p?C+u:C})}return h.join("")};Ji.default=pc});var eo=q($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});var mc=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Dn=Nn(),wc=Rn(),Ls=Ps(wc),Ec=dt(),Cc=Ps(Ec);function Ps(a){return a&&a.__esModule?a:{default:a}}function Ac(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function yc(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function bc(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var _c=(function(a){bc(i,a);function i(c,u){Ac(this,i);var h=yc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u));return h.fontSize=!u.flat&&u.fontSize>u.width*10?u.width*10:u.fontSize,h.guardHeight=u.height+h.fontSize/2+u.textMargin,h}return mc(i,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(u,h){return this.text.substr(u,h)}},{key:"leftEncode",value:function(u,h){return(0,Ls.default)(u,h)}},{key:"rightText",value:function(u,h){return this.text.substr(u,h)}},{key:"rightEncode",value:function(u,h){return(0,Ls.default)(u,h)}},{key:"encodeGuarded",value:function(){var u={fontSize:this.fontSize},h={height:this.guardHeight};return[{data:Dn.SIDE_BIN,options:h},{data:this.leftEncode(),text:this.leftText(),options:u},{data:Dn.MIDDLE_BIN,options:h},{data:this.rightEncode(),text:this.rightText(),options:u},{data:Dn.SIDE_BIN,options:h}]}},{key:"encodeFlat",value:function(){var u=[Dn.SIDE_BIN,this.leftEncode(),Dn.MIDDLE_BIN,this.rightEncode(),Dn.SIDE_BIN];return{data:u.join(""),text:this.text}}}]),i})(Cc.default);$i.default=_c});var ks=q(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});var Ic=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),nr=function a(i,c,u){i===null&&(i=Function.prototype);var h=Object.getOwnPropertyDescriptor(i,c);if(h===void 0){var p=Object.getPrototypeOf(i);return p===null?void 0:a(p,c,u)}else{if("value"in h)return h.value;var C=h.get;return C===void 0?void 0:C.call(u)}},Sc=Nn(),Tc=eo(),Oc=vc(Tc);function vc(a){return a&&a.__esModule?a:{default:a}}function Mc(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Nc(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Rc(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Bs=function(i){var c=i.substr(0,12).split("").map(function(u){return+u}).reduce(function(u,h,p){return p%2?u+h*3:u+h},0);return(10-c%10)%10},Dc=(function(a){Rc(i,a);function i(c,u){Mc(this,i),c.search(/^[0-9]{12}$/)!==-1&&(c+=Bs(c));var h=Nc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u));return h.lastChar=u.lastChar,h}return Ic(i,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===Bs(this.data)}},{key:"leftText",value:function(){return nr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var u=this.data.substr(1,6),h=Sc.EAN13_STRUCTURE[this.data[0]];return nr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"leftEncode",this).call(this,u,h)}},{key:"rightText",value:function(){return nr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var u=this.data.substr(7,6);return nr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"rightEncode",this).call(this,u,"RRRRRR")}},{key:"encodeGuarded",value:function(){var u=nr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(u.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(u.push({data:"00"}),u.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),u}}]),i})(Oc.default);to.default=Dc});var Us=q(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});var Lc=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Hr=function a(i,c,u){i===null&&(i=Function.prototype);var h=Object.getOwnPropertyDescriptor(i,c);if(h===void 0){var p=Object.getPrototypeOf(i);return p===null?void 0:a(p,c,u)}else{if("value"in h)return h.value;var C=h.get;return C===void 0?void 0:C.call(u)}},Pc=eo(),Bc=kc(Pc);function kc(a){return a&&a.__esModule?a:{default:a}}function Fc(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Uc(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Hc(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Fs=function(i){var c=i.substr(0,7).split("").map(function(u){return+u}).reduce(function(u,h,p){return p%2?u+h:u+h*3},0);return(10-c%10)%10},jc=(function(a){Hc(i,a);function i(c,u){return Fc(this,i),c.search(/^[0-9]{7}$/)!==-1&&(c+=Fs(c)),Uc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return Lc(i,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===Fs(this.data)}},{key:"leftText",value:function(){return Hr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var u=this.data.substr(0,4);return Hr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"leftEncode",this).call(this,u,"LLLL")}},{key:"rightText",value:function(){return Hr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var u=this.data.substr(4,4);return Hr(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"rightEncode",this).call(this,u,"RRRR")}}]),i})(Bc.default);no.default=jc});var js=q(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var Vc=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),zc=Nn(),Gc=Rn(),Xc=Hs(Gc),Wc=dt(),Yc=Hs(Wc);function Hs(a){return a&&a.__esModule?a:{default:a}}function Zc(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qc(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Qc(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Kc=function(i){var c=i.split("").map(function(u){return+u}).reduce(function(u,h,p){return p%2?u+h*9:u+h*3},0);return c%10},Jc=(function(a){Qc(i,a);function i(c,u){return Zc(this,i),qc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return Vc(i,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var u=zc.EAN5_STRUCTURE[Kc(this.data)];return{data:"1011"+(0,Xc.default)(this.data,u,"01"),text:this.text}}}]),i})(Yc.default);ro.default=Jc});var zs=q(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});var $c=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),eu=Nn(),tu=Rn(),nu=Vs(tu),ru=dt(),iu=Vs(ru);function Vs(a){return a&&a.__esModule?a:{default:a}}function ou(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function au(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function su(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var lu=(function(a){su(i,a);function i(c,u){return ou(this,i),au(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return $c(i,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var u=eu.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,nu.default)(this.data,u,"01"),text:this.text}}}]),i})(iu.default);io.default=lu});var ao=q(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});var cu=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})();jr.checksum=oo;var uu=Rn(),Ln=Gs(uu),fu=dt(),hu=Gs(fu);function Gs(a){return a&&a.__esModule?a:{default:a}}function du(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gu(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function xu(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var pu=(function(a){xu(i,a);function i(c,u){du(this,i),c.search(/^[0-9]{11}$/)!==-1&&(c+=oo(c));var h=gu(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u));return h.displayValue=u.displayValue,u.fontSize>u.width*10?h.fontSize=u.width*10:h.fontSize=u.fontSize,h.guardHeight=u.height+h.fontSize/2+u.textMargin,h}return cu(i,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==oo(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var u="";return u+="101",u+=(0,Ln.default)(this.data.substr(0,6),"LLLLLL"),u+="01010",u+=(0,Ln.default)(this.data.substr(6,6),"RRRRRR"),u+="101",{data:u,text:this.text}}},{key:"guardedEncoding",value:function(){var u=[];return this.displayValue&&u.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),u.push({data:"101"+(0,Ln.default)(this.data[0],"L"),options:{height:this.guardHeight}}),u.push({data:(0,Ln.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),u.push({data:"01010",options:{height:this.guardHeight}}),u.push({data:(0,Ln.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),u.push({data:(0,Ln.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&u.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),u}}]),i})(hu.default);function oo(a){var i=0,c;for(c=1;c<11;c+=2)i+=parseInt(a[c]);for(c=0;c<11;c+=2)i+=parseInt(a[c])*3;return(10-i%10)%10}jr.default=pu});var Ys=q(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});var mu=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),wu=Rn(),Eu=Ws(wu),Cu=dt(),Au=Ws(Cu),yu=ao();function Ws(a){return a&&a.__esModule?a:{default:a}}function bu(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function so(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function _u(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Iu=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Su=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Tu=(function(a){_u(i,a);function i(c,u){bu(this,i);var h=so(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u));if(h.isValid=!1,c.search(/^[0-9]{6}$/)!==-1)h.middleDigits=c,h.upcA=Xs(c,"0"),h.text=u.text||""+h.upcA[0]+c+h.upcA[h.upcA.length-1],h.isValid=!0;else if(c.search(/^[01][0-9]{7}$/)!==-1)if(h.middleDigits=c.substring(1,c.length-1),h.upcA=Xs(h.middleDigits,c[0]),h.upcA[h.upcA.length-1]===c[c.length-1])h.isValid=!0;else return so(h);else return so(h);return h.displayValue=u.displayValue,u.fontSize>u.width*10?h.fontSize=u.width*10:h.fontSize=u.fontSize,h.guardHeight=u.height+h.fontSize/2+u.textMargin,h}return mu(i,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var u="";return u+="101",u+=this.encodeMiddleDigits(),u+="010101",{data:u,text:this.text}}},{key:"guardedEncoding",value:function(){var u=[];return this.displayValue&&u.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),u.push({data:"101",options:{height:this.guardHeight}}),u.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),u.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&u.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),u}},{key:"encodeMiddleDigits",value:function(){var u=this.upcA[0],h=this.upcA[this.upcA.length-1],p=Su[parseInt(h)][parseInt(u)];return(0,Eu.default)(this.middleDigits,p)}}]),i})(Au.default);function Xs(a,i){for(var c=parseInt(a[a.length-1]),u=Iu[c],h="",p=0,C=0;C<u.length;C++){var _=u[C];_==="X"?h+=a[p++]:h+=_}return h=""+i+h,""+h+(0,yu.checksum)(h)}lo.default=Tu});var Zs=q(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.UPCE=gt.UPC=gt.EAN2=gt.EAN5=gt.EAN8=gt.EAN13=void 0;var Ou=ks(),vu=Pn(Ou),Mu=Us(),Nu=Pn(Mu),Ru=js(),Du=Pn(Ru),Lu=zs(),Pu=Pn(Lu),Bu=ao(),ku=Pn(Bu),Fu=Ys(),Uu=Pn(Fu);function Pn(a){return a&&a.__esModule?a:{default:a}}gt.EAN13=vu.default;gt.EAN8=Nu.default;gt.EAN5=Du.default;gt.EAN2=Pu.default;gt.UPC=ku.default;gt.UPCE=Uu.default});var qs=q(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});var V2=rr.START_BIN="1010",z2=rr.END_BIN="11101",G2=rr.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]});var uo=q(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});var Hu=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Vr=qs(),ju=dt(),Vu=zu(ju);function zu(a){return a&&a.__esModule?a:{default:a}}function Gu(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Xu(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Wu(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Yu=(function(a){Wu(i,a);function i(){return Gu(this,i),Xu(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return Hu(i,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var u=this,h=this.data.match(/.{2}/g).map(function(p){return u.encodePair(p)}).join("");return{data:Vr.START_BIN+h+Vr.END_BIN,text:this.text}}},{key:"encodePair",value:function(u){var h=Vr.BINARIES[u[1]];return Vr.BINARIES[u[0]].split("").map(function(p,C){return(p==="1"?"111":"1")+(h[C]==="1"?"000":"0")}).join("")}}]),i})(Vu.default);co.default=Yu});var Ks=q(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});var Zu=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),qu=uo(),Qu=Ku(qu);function Ku(a){return a&&a.__esModule?a:{default:a}}function Ju(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function $u(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function ef(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Qs=function(i){var c=i.substr(0,13).split("").map(function(u){return parseInt(u,10)}).reduce(function(u,h,p){return u+h*(3-p%2*2)},0);return Math.ceil(c/10)*10-c},tf=(function(a){ef(i,a);function i(c,u){return Ju(this,i),c.search(/^[0-9]{13}$/)!==-1&&(c+=Qs(c)),$u(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return Zu(i,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Qs(this.data)}}]),i})(Qu.default);fo.default=tf});var $s=q(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ITF14=Bn.ITF=void 0;var nf=uo(),rf=Js(nf),of=Ks(),af=Js(of);function Js(a){return a&&a.__esModule?a:{default:a}}Bn.ITF=rf.default;Bn.ITF14=af.default});var kn=q(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});var sf=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),lf=dt(),cf=uf(lf);function uf(a){return a&&a.__esModule?a:{default:a}}function ff(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hf(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function df(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var gf=(function(a){df(i,a);function i(c,u){return ff(this,i),hf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return sf(i,[{key:"encode",value:function(){for(var u="110",h=0;h<this.data.length;h++){var p=parseInt(this.data[h]),C=p.toString(2);C=xf(C,4-C.length);for(var _=0;_<C.length;_++)u+=C[_]=="0"?"100":"110"}return u+="1001",{data:u,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),i})(cf.default);function xf(a,i){for(var c=0;c<i;c++)a="0"+a;return a}ho.default=gf});var ir=q(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.mod10=pf;zr.mod11=mf;function pf(a){for(var i=0,c=0;c<a.length;c++){var u=parseInt(a[c]);(c+a.length)%2===0?i+=u:i+=u*2%10+Math.floor(u*2/10)}return(10-i%10)%10}function mf(a){for(var i=0,c=[2,3,4,5,6,7],u=0;u<a.length;u++){var h=parseInt(a[a.length-1-u]);i+=c[u%c.length]*h}return(11-i%11)%11}});var e1=q(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});var wf=kn(),Ef=Af(wf),Cf=ir();function Af(a){return a&&a.__esModule?a:{default:a}}function yf(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bf(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function _f(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var If=(function(a){_f(i,a);function i(c,u){return yf(this,i),bf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c+(0,Cf.mod10)(c),u))}return i})(Ef.default);go.default=If});var t1=q(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var Sf=kn(),Tf=vf(Sf),Of=ir();function vf(a){return a&&a.__esModule?a:{default:a}}function Mf(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Nf(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Rf(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Df=(function(a){Rf(i,a);function i(c,u){return Mf(this,i),Nf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c+(0,Of.mod11)(c),u))}return i})(Tf.default);xo.default=Df});var r1=q(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});var Lf=kn(),Pf=Bf(Lf),n1=ir();function Bf(a){return a&&a.__esModule?a:{default:a}}function kf(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Ff(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Uf(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Hf=(function(a){Uf(i,a);function i(c,u){return kf(this,i),c+=(0,n1.mod10)(c),c+=(0,n1.mod10)(c),Ff(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return i})(Pf.default);po.default=Hf});var o1=q(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});var jf=kn(),Vf=zf(jf),i1=ir();function zf(a){return a&&a.__esModule?a:{default:a}}function Gf(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Xf(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Wf(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Yf=(function(a){Wf(i,a);function i(c,u){return Gf(this,i),c+=(0,i1.mod11)(c),c+=(0,i1.mod10)(c),Xf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return i})(Vf.default);mo.default=Yf});var a1=q(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.MSI1110=_t.MSI1010=_t.MSI11=_t.MSI10=_t.MSI=void 0;var Zf=kn(),qf=or(Zf),Qf=e1(),Kf=or(Qf),Jf=t1(),$f=or(Jf),eh=r1(),th=or(eh),nh=o1(),rh=or(nh);function or(a){return a&&a.__esModule?a:{default:a}}_t.MSI=qf.default;_t.MSI10=Kf.default;_t.MSI11=$f.default;_t.MSI1010=th.default;_t.MSI1110=rh.default});var s1=q(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.pharmacode=void 0;var ih=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),oh=dt(),ah=sh(oh);function sh(a){return a&&a.__esModule?a:{default:a}}function lh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ch(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function uh(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var fh=(function(a){uh(i,a);function i(c,u){lh(this,i);var h=ch(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u));return h.number=parseInt(c,10),h}return ih(i,[{key:"encode",value:function(){for(var u=this.number,h="";!isNaN(u)&&u!=0;)u%2===0?(h="11100"+h,u=(u-2)/2):(h="100"+h,u=(u-1)/2);return h=h.slice(0,-2),{data:h,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),i})(ah.default);Gr.pharmacode=fh});var l1=q(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.codabar=void 0;var hh=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),dh=dt(),gh=xh(dh);function xh(a){return a&&a.__esModule?a:{default:a}}function ph(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function mh(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function wh(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Eh=(function(a){wh(i,a);function i(c,u){ph(this,i),c.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(c="A"+c+"A");var h=mh(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c.toUpperCase(),u));return h.text=h.options.text||h.text.replace(/[A-D]/g,""),h}return hh(i,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var u=[],h=this.getEncodings(),p=0;p<this.data.length;p++)u.push(h[this.data.charAt(p)]),p!==this.data.length-1&&u.push("0");return{text:this.text,data:u.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),i})(gh.default);Xr.codabar=Eh});var c1=q(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});var ix=ar.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","\xFF"],ox=ar.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],ax=ar.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"\x7F":["(%)","T"]}});var Eo=q(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});var Ch=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Wr=c1(),Ah=dt(),yh=bh(Ah);function bh(a){return a&&a.__esModule?a:{default:a}}function _h(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Ih(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Sh(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Th=(function(a){Sh(i,a);function i(c,u){return _h(this,i),Ih(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return Ch(i,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var u=this.data.split("").flatMap(function(_){return Wr.MULTI_SYMBOLS[_]||_}),h=u.map(function(_){return i.getEncoding(_)}).join(""),p=i.checksum(u,20),C=i.checksum(u.concat(p),15);return{text:this.text,data:i.getEncoding("\xFF")+h+i.getEncoding(p)+i.getEncoding(C)+i.getEncoding("\xFF")+"1"}}}],[{key:"getEncoding",value:function(u){return Wr.BINARIES[i.symbolValue(u)]}},{key:"getSymbol",value:function(u){return Wr.SYMBOLS[u]}},{key:"symbolValue",value:function(u){return Wr.SYMBOLS.indexOf(u)}},{key:"checksum",value:function(u,h){var p=u.slice().reverse().reduce(function(C,_,M){var w=M%h+1;return C+i.symbolValue(_)*w},0);return i.getSymbol(p%47)}}]),i})(yh.default);wo.default=Th});var u1=q(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var Oh=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),vh=Eo(),Mh=Nh(vh);function Nh(a){return a&&a.__esModule?a:{default:a}}function Rh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Dh(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Lh(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Ph=(function(a){Lh(i,a);function i(c,u){return Rh(this,i),Dh(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return Oh(i,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),i})(Mh.default);Co.default=Ph});var h1=q(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.CODE93FullASCII=Fn.CODE93=void 0;var Bh=Eo(),kh=f1(Bh),Fh=u1(),Uh=f1(Fh);function f1(a){return a&&a.__esModule?a:{default:a}}Fn.CODE93=kh.default;Fn.CODE93FullASCII=Uh.default});var d1=q(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.GenericBarcode=void 0;var Hh=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),jh=dt(),Vh=zh(jh);function zh(a){return a&&a.__esModule?a:{default:a}}function Gh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Xh(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Wh(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Yh=(function(a){Wh(i,a);function i(c,u){return Gh(this,i),Xh(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c,u))}return Hh(i,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),i})(Vh.default);Yr.GenericBarcode=Yh});var p1=q(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});var Zh=ps(),Zr=Ds(),Un=Zs(),g1=$s(),sr=a1(),qh=s1(),Qh=l1(),x1=h1(),Kh=d1();Ao.default={CODE39:Zh.CODE39,CODE128:Zr.CODE128,CODE128A:Zr.CODE128A,CODE128B:Zr.CODE128B,CODE128C:Zr.CODE128C,EAN13:Un.EAN13,EAN8:Un.EAN8,EAN5:Un.EAN5,EAN2:Un.EAN2,UPC:Un.UPC,UPCE:Un.UPCE,ITF14:g1.ITF14,ITF:g1.ITF,MSI:sr.MSI,MSI10:sr.MSI10,MSI11:sr.MSI11,MSI1010:sr.MSI1010,MSI1110:sr.MSI1110,pharmacode:qh.pharmacode,codabar:Qh.codabar,CODE93:x1.CODE93,CODE93FullASCII:x1.CODE93FullASCII,GenericBarcode:Kh.GenericBarcode}});var lr=q(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});var Jh=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(a[u]=c[u])}return a};yo.default=function(a,i){return Jh({},a,i)}});var m1=q(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.default=$h;function $h(a){var i=[];function c(u){if(Array.isArray(u))for(var h=0;h<u.length;h++)c(u[h]);else u.text=u.text||"",u.data=u.data||"",i.push(u)}return c(a),i}});var w1=q(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.default=ed;function ed(a){return a.marginTop=a.marginTop||a.margin,a.marginBottom=a.marginBottom||a.margin,a.marginRight=a.marginRight||a.margin,a.marginLeft=a.marginLeft||a.margin,a}});var So=q(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.default=td;function td(a){var i=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var c in i)i.hasOwnProperty(c)&&(c=i[c],typeof a[c]=="string"&&(a[c]=parseInt(a[c],10)));return typeof a.displayValue=="string"&&(a.displayValue=a.displayValue!="false"),a}});var Oo=q(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});var nd={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};To.default=nd});var A1=q(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});var rd=So(),id=C1(rd),od=Oo(),E1=C1(od);function C1(a){return a&&a.__esModule?a:{default:a}}function ad(a){var i={};for(var c in E1.default)E1.default.hasOwnProperty(c)&&(a.hasAttribute("jsbarcode-"+c.toLowerCase())&&(i[c]=a.getAttribute("jsbarcode-"+c.toLowerCase())),a.hasAttribute("data-"+c.toLowerCase())&&(i[c]=a.getAttribute("data-"+c.toLowerCase())));return i.value=a.getAttribute("jsbarcode-value")||a.getAttribute("data-value"),i=(0,id.default)(i),i}vo.default=ad});var Mo=q(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.getTotalWidthOfEncodings=It.calculateEncodingAttributes=It.getBarcodePadding=It.getEncodingHeight=It.getMaximumHeightOfEncodings=void 0;var sd=lr(),ld=cd(sd);function cd(a){return a&&a.__esModule?a:{default:a}}function y1(a,i){return i.height+(i.displayValue&&a.text.length>0?i.fontSize+i.textMargin:0)+i.marginTop+i.marginBottom}function b1(a,i,c){if(c.displayValue&&i<a){if(c.textAlign=="center")return Math.floor((a-i)/2);if(c.textAlign=="left")return 0;if(c.textAlign=="right")return Math.floor(a-i)}return 0}function ud(a,i,c){for(var u=0;u<a.length;u++){var h=a[u],p=(0,ld.default)(i,h.options),C;p.displayValue?C=dd(h.text,p,c):C=0;var _=h.data.length*p.width;h.width=Math.ceil(Math.max(C,_)),h.height=y1(h,p),h.barcodePadding=b1(C,_,p)}}function fd(a){for(var i=0,c=0;c<a.length;c++)i+=a[c].width;return i}function hd(a){for(var i=0,c=0;c<a.length;c++)a[c].height>i&&(i=a[c].height);return i}function dd(a,i,c){var u;if(c)u=c;else if(typeof document<"u")u=document.createElement("canvas").getContext("2d");else return 0;u.font=i.fontOptions+" "+i.fontSize+"px "+i.font;var h=u.measureText(a);if(!h)return 0;var p=h.width;return p}It.getMaximumHeightOfEncodings=hd;It.getEncodingHeight=y1;It.getBarcodePadding=b1;It.calculateEncodingAttributes=ud;It.getTotalWidthOfEncodings=fd});var _1=q(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var gd=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),xd=lr(),pd=md(xd),No=Mo();function md(a){return a&&a.__esModule?a:{default:a}}function wd(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}var Ed=(function(){function a(i,c,u){wd(this,a),this.canvas=i,this.encodings=c,this.options=u}return gd(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var c=0;c<this.encodings.length;c++){var u=(0,pd.default)(this.options,this.encodings[c].options);this.drawCanvasBarcode(u,this.encodings[c]),this.drawCanvasText(u,this.encodings[c]),this.moveCanvasDrawing(this.encodings[c])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var c=this.canvas.getContext("2d");c.save(),(0,No.calculateEncodingAttributes)(this.encodings,this.options,c);var u=(0,No.getTotalWidthOfEncodings)(this.encodings),h=(0,No.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=u+this.options.marginLeft+this.options.marginRight,this.canvas.height=h,c.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(c.fillStyle=this.options.background,c.fillRect(0,0,this.canvas.width,this.canvas.height)),c.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(c,u){var h=this.canvas.getContext("2d"),p=u.data,C;c.textPosition=="top"?C=c.marginTop+c.fontSize+c.textMargin:C=c.marginTop,h.fillStyle=c.lineColor;for(var _=0;_<p.length;_++){var M=_*c.width+u.barcodePadding;p[_]==="1"?h.fillRect(M,C,c.width,c.height):p[_]&&h.fillRect(M,C,c.width,c.height*p[_])}}},{key:"drawCanvasText",value:function(c,u){var h=this.canvas.getContext("2d"),p=c.fontOptions+" "+c.fontSize+"px "+c.font;if(c.displayValue){var C,_;c.textPosition=="top"?_=c.marginTop+c.fontSize-c.textMargin:_=c.height+c.textMargin+c.marginTop+c.fontSize,h.font=p,c.textAlign=="left"||u.barcodePadding>0?(C=0,h.textAlign="left"):c.textAlign=="right"?(C=u.width-1,h.textAlign="right"):(C=u.width/2,h.textAlign="center"),h.fillText(u.text,C,_)}}},{key:"moveCanvasDrawing",value:function(c){var u=this.canvas.getContext("2d");u.translate(c.width,0)}},{key:"restoreCanvas",value:function(){var c=this.canvas.getContext("2d");c.restore()}}]),a})();Ro.default=Ed});var I1=q(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var Cd=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})(),Ad=lr(),yd=bd(Ad),Do=Mo();function bd(a){return a&&a.__esModule?a:{default:a}}function _d(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}var qr="http://www.w3.org/2000/svg",Id=(function(){function a(i,c,u){_d(this,a),this.svg=i,this.encodings=c,this.options=u,this.document=u.xmlDocument||document}return Cd(a,[{key:"render",value:function(){var c=this.options.marginLeft;this.prepareSVG();for(var u=0;u<this.encodings.length;u++){var h=this.encodings[u],p=(0,yd.default)(this.options,h.options),C=this.createGroup(c,p.marginTop,this.svg);this.setGroupOptions(C,p),this.drawSvgBarcode(C,p,h),this.drawSVGText(C,p,h),c+=h.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,Do.calculateEncodingAttributes)(this.encodings,this.options);var c=(0,Do.getTotalWidthOfEncodings)(this.encodings),u=(0,Do.getMaximumHeightOfEncodings)(this.encodings),h=c+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(h,u),this.options.background&&this.drawRect(0,0,h,u,this.svg).setAttribute("fill",this.options.background)}},{key:"drawSvgBarcode",value:function(c,u,h){var p=h.data,C;u.textPosition=="top"?C=u.fontSize+u.textMargin:C=0;for(var _=0,M=0,w=0;w<p.length;w++)M=w*u.width+h.barcodePadding,p[w]==="1"?_++:_>0&&(this.drawRect(M-u.width*_,C,u.width*_,u.height,c),_=0);_>0&&this.drawRect(M-u.width*(_-1),C,u.width*_,u.height,c)}},{key:"drawSVGText",value:function(c,u,h){var p=this.document.createElementNS(qr,"text");if(u.displayValue){var C,_;p.setAttribute("font-family",u.font),p.setAttribute("font-size",u.fontSize),u.fontOptions.includes("bold")&&p.setAttribute("font-weight","bold"),u.fontOptions.includes("italic")&&p.setAttribute("font-style","italic"),u.textPosition=="top"?_=u.fontSize-u.textMargin:_=u.height+u.textMargin+u.fontSize,u.textAlign=="left"||h.barcodePadding>0?(C=0,p.setAttribute("text-anchor","start")):u.textAlign=="right"?(C=h.width-1,p.setAttribute("text-anchor","end")):(C=h.width/2,p.setAttribute("text-anchor","middle")),p.setAttribute("x",C),p.setAttribute("y",_),p.appendChild(this.document.createTextNode(h.text)),c.appendChild(p)}}},{key:"setSvgAttributes",value:function(c,u){var h=this.svg;h.setAttribute("width",c+"px"),h.setAttribute("height",u+"px"),h.setAttribute("x","0px"),h.setAttribute("y","0px"),h.setAttribute("viewBox","0 0 "+c+" "+u),h.setAttribute("xmlns",qr),h.setAttribute("version","1.1")}},{key:"createGroup",value:function(c,u,h){var p=this.document.createElementNS(qr,"g");return p.setAttribute("transform","translate("+c+", "+u+")"),h.appendChild(p),p}},{key:"setGroupOptions",value:function(c,u){c.setAttribute("fill",u.lineColor)}},{key:"drawRect",value:function(c,u,h,p,C){var _=this.document.createElementNS(qr,"rect");return _.setAttribute("x",c),_.setAttribute("y",u),_.setAttribute("width",h),_.setAttribute("height",p),C.appendChild(_),_}}]),a})();Lo.default=Id});var S1=q(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});var Sd=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})();function Td(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}var Od=(function(){function a(i,c,u){Td(this,a),this.object=i,this.encodings=c,this.options=u}return Sd(a,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),a})();Po.default=Od});var T1=q(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var vd=_1(),Md=Bo(vd),Nd=I1(),Rd=Bo(Nd),Dd=S1(),Ld=Bo(Dd);function Bo(a){return a&&a.__esModule?a:{default:a}}ko.default={CanvasRenderer:Md.default,SVGRenderer:Rd.default,ObjectRenderer:Ld.default}});var jo=q(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});function Fo(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Uo(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:a}function Ho(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}var Pd=(function(a){Ho(i,a);function i(c,u){Fo(this,i);var h=Uo(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return h.name="InvalidInputException",h.symbology=c,h.input=u,h.message='"'+h.input+'" is not a valid input for '+h.symbology,h}return i})(Error),Bd=(function(a){Ho(i,a);function i(){Fo(this,i);var c=Uo(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return c.name="InvalidElementException",c.message="Not supported type to render on",c}return i})(Error),kd=(function(a){Ho(i,a);function i(){Fo(this,i);var c=Uo(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return c.name="NoElementException",c.message="No element to render on.",c}return i})(Error);cr.InvalidInputException=Pd;cr.InvalidElementException=Bd;cr.NoElementException=kd});var v1=q(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});var Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Ud=A1(),Vo=O1(Ud),Hd=T1(),ur=O1(Hd),jd=jo();function O1(a){return a&&a.__esModule?a:{default:a}}function zo(a){if(typeof a=="string")return Vd(a);if(Array.isArray(a)){for(var i=[],c=0;c<a.length;c++)i.push(zo(a[c]));return i}else{if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return zd(a);if(a&&a.nodeName&&a.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,Vo.default)(a),renderer:ur.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,Vo.default)(a),renderer:ur.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:ur.default.CanvasRenderer};if(a&&(typeof a>"u"?"undefined":Fd(a))==="object"&&!a.nodeName)return{element:a,renderer:ur.default.ObjectRenderer};throw new jd.InvalidElementException}}function Vd(a){var i=document.querySelectorAll(a);if(i.length!==0){for(var c=[],u=0;u<i.length;u++)c.push(zo(i[u]));return c}}function zd(a){var i=document.createElement("canvas");return{element:i,options:(0,Vo.default)(a),renderer:ur.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",i.toDataURL())}}}Go.default=zo});var M1=q(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var Gd=(function(){function a(i,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,c,u){return c&&a(i.prototype,c),u&&a(i,u),i}})();function Xd(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}var Wd=(function(){function a(i){Xd(this,a),this.api=i}return Gd(a,[{key:"handleCatch",value:function(c){if(c.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw c.message;else throw c;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(c){try{var u=c.apply(void 0,arguments);return this.api._options.valid(!0),u}catch(h){return this.handleCatch(h),this.api}}}]),a})();Xo.default=Wd});var F1=q((Tx,k1)=>{"use strict";var Yd=p1(),mn=ln(Yd),Zd=lr(),fr=ln(Zd),qd=m1(),R1=ln(qd),Qd=w1(),N1=ln(Qd),Kd=v1(),Jd=ln(Kd),$d=So(),eg=ln($d),tg=M1(),ng=ln(tg),D1=jo(),rg=Oo(),L1=ln(rg);function ln(a){return a&&a.__esModule?a:{default:a}}var Wt=function(){},Qr=function(i,c,u){var h=new Wt;if(typeof i>"u")throw Error("No element to render on was provided.");return h._renderProperties=(0,Jd.default)(i),h._encodings=[],h._options=L1.default,h._errorHandler=new ng.default(h),typeof c<"u"&&(u=u||{},u.format||(u.format=B1()),h.options(u)[u.format](c,u).render()),h};Qr.getModule=function(a){return mn.default[a]};for(Wo in mn.default)mn.default.hasOwnProperty(Wo)&&ig(mn.default,Wo);var Wo;function ig(a,i){Wt.prototype[i]=Wt.prototype[i.toUpperCase()]=Wt.prototype[i.toLowerCase()]=function(c,u){var h=this;return h._errorHandler.wrapBarcodeCall(function(){u.text=typeof u.text>"u"?void 0:""+u.text;var p=(0,fr.default)(h._options,u);p=(0,eg.default)(p);var C=a[i],_=P1(c,C,p);return h._encodings.push(_),h})}}function P1(a,i,c){a=""+a;var u=new i(a,c);if(!u.valid())throw new D1.InvalidInputException(u.constructor.name,a);var h=u.encode();h=(0,R1.default)(h);for(var p=0;p<h.length;p++)h[p].options=(0,fr.default)(c,h[p].options);return h}function B1(){return mn.default.CODE128?"CODE128":Object.keys(mn.default)[0]}Wt.prototype.options=function(a){return this._options=(0,fr.default)(this._options,a),this};Wt.prototype.blank=function(a){var i=new Array(a+1).join("0");return this._encodings.push({data:i}),this};Wt.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var a;for(var i in this._renderProperties){a=this._renderProperties[i];var c=(0,fr.default)(this._options,a.options);c.format=="auto"&&(c.format=B1()),this._errorHandler.wrapBarcodeCall(function(){var u=c.value,h=mn.default[c.format.toUpperCase()],p=P1(u,h,c);Yo(a,p,c)})}}};Wt.prototype.render=function(){if(!this._renderProperties)throw new D1.NoElementException;if(Array.isArray(this._renderProperties))for(var a=0;a<this._renderProperties.length;a++)Yo(this._renderProperties[a],this._encodings,this._options);else Yo(this._renderProperties,this._encodings,this._options);return this};Wt.prototype._defaults=L1.default;function Yo(a,i,c){i=(0,R1.default)(i);for(var u=0;u<i.length;u++)i[u].options=(0,fr.default)(c,i[u].options),(0,N1.default)(i[u].options);(0,N1.default)(c);var h=a.renderer,p=new h(a.element,i,c);p.render(),a.afterRender&&a.afterRender()}typeof window<"u"&&(window.JsBarcode=Qr);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(a,i){var c=[];return jQuery(this).each(function(){c.push(this)}),Qr(c,a,i)});k1.exports=Qr});var X1=q((oi,G1)=>{"use strict";(function(a,i){typeof oi=="object"&&typeof G1<"u"?i(oi):typeof define=="function"&&define.amd?define(["exports"],i):(a=typeof globalThis<"u"?globalThis:a||self,i(a.ZXing={}))})(oi,function(a){"use strict";function i(g){return g==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,e){g.__proto__=e}||function(g,e){for(var t in e)e.hasOwnProperty(t)&&(g[t]=e[t])};function u(g,e){c(g,e);function t(){this.constructor=g}g.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function h(g,e){var t=Object.setPrototypeOf;t?t(g,e):g.__proto__=e}function p(g,e){e===void 0&&(e=g.constructor);var t=Error.captureStackTrace;t&&t(g,e)}var C=(function(g){u(e,g);function e(t){var n=this.constructor,r=g.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),h(r,n.prototype),p(r),r}return e})(Error);let _=(()=>{class g extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}return g.kind="Exception",g})(),M=(()=>{class g extends _{}return g.kind="ArgumentException",g})(),w=(()=>{class g extends _{}return g.kind="IllegalArgumentException",g})();class N{constructor(e){if(this.binarizer=e,e===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){let o=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new N(this.binarizer.createBinarizer(o))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let B=(()=>{class g extends _{static getChecksumInstance(){return new g}}return g.kind="ChecksumException",g})();class fe{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Q{static arraycopy(e,t,n,r,o){for(;o--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}let ke=(()=>{class g extends _{}return g.kind="IndexOutOfBoundsException",g})(),_e=(()=>{class g extends ke{constructor(t=void 0,n=void 0){super(n),this.index=t,this.message=n}}return g.kind="ArrayIndexOutOfBoundsException",g})();class te{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){te.rangeCheck(e.length,t,n);for(let o=t;o<n;o++)e[o]=r}static rangeCheck(e,t,n){if(t>n)throw new w("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new _e(t);if(n>e)throw new _e(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(o=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(o=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(let n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){let n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){let r=n-t,o=new Int32Array(r);return Q.arraycopy(e,t,o,0,r),o}static binarySearch(e,t,n){n===void 0&&(n=te.numberComparator);let r=0,o=e.length-1;for(;r<=o;){let s=o+r>>1,l=n(t,e[s]);if(l>0)r=s+1;else if(l<0)o=s-1;else return s}return-r-1}static numberComparator(e,t){return e-t}}class Y{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}Y.MIN_VALUE_32_BITS=-2147483648,Y.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=le.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){let t=le.makeArray(e);Q.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){let t=this.size;if(e>=t)return t;let n=this.bits,r=Math.floor(e/32),o=n[r];o&=~((1<<(e&31))-1);let s=n.length;for(;o===0;){if(++r===s)return t;o=n[r]}let l=r*32+Y.numberOfTrailingZeros(o);return l>t?t:l}getNextUnset(e){let t=this.size;if(e>=t)return t;let n=this.bits,r=Math.floor(e/32),o=~n[r];o&=~((1<<(e&31))-1);let s=n.length;for(;o===0;){if(++r===s)return t;o=~n[r]}let l=r*32+Y.numberOfTrailingZeros(o);return l>t?t:l}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new w;if(t===e)return;t--;let n=Math.floor(e/32),r=Math.floor(t/32),o=this.bits;for(let s=n;s<=r;s++){let l=s>n?0:e&31,d=(2<<(s<r?31:t&31))-(1<<l);o[s]|=d}}clear(){let e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new w;if(t===e)return!0;t--;let r=Math.floor(e/32),o=Math.floor(t/32),s=this.bits;for(let l=r;l<=o;l++){let f=l>r?0:e&31,x=(2<<(l<o?31:t&31))-(1<<f)&4294967295;if((s[l]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){let t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new w("Sizes don't match");let t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let o=0;o<r;o++){let s=0;for(let l=0;l<8;l++)this.get(e)&&(s|=1<<7-l),e++;t[n+o]=s}}getBitArray(){return this.bits}reverse(){let e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let o=0;o<n;o++){let s=r[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==n*32){let o=n*32-this.size,s=e[0]>>>o;for(let l=1;l<n;l++){let f=e[l];s|=f<<32-o,e[l-1]=s,s=f>>>o}e[n-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof le))return!1;let t=e;return this.size===t.size&&te.equals(this.bits,t.bits)}hashCode(){return 31*this.size+te.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new le(this.size,this.bits.slice())}}var kt=(function(g){return g[g.OTHER=0]="OTHER",g[g.PURE_BARCODE=1]="PURE_BARCODE",g[g.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",g[g.TRY_HARDER=3]="TRY_HARDER",g[g.CHARACTER_SET=4]="CHARACTER_SET",g[g.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",g[g.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",g[g.ASSUME_GS1=7]="ASSUME_GS1",g[g.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",g[g.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",g[g.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",g})(kt||{}),de=kt;let k=(()=>{class g extends _{static getFormatInstance(){return new g}}return g.kind="FormatException",g})();var me=(function(g){return g[g.Cp437=0]="Cp437",g[g.ISO8859_1=1]="ISO8859_1",g[g.ISO8859_2=2]="ISO8859_2",g[g.ISO8859_3=3]="ISO8859_3",g[g.ISO8859_4=4]="ISO8859_4",g[g.ISO8859_5=5]="ISO8859_5",g[g.ISO8859_6=6]="ISO8859_6",g[g.ISO8859_7=7]="ISO8859_7",g[g.ISO8859_8=8]="ISO8859_8",g[g.ISO8859_9=9]="ISO8859_9",g[g.ISO8859_10=10]="ISO8859_10",g[g.ISO8859_11=11]="ISO8859_11",g[g.ISO8859_13=12]="ISO8859_13",g[g.ISO8859_14=13]="ISO8859_14",g[g.ISO8859_15=14]="ISO8859_15",g[g.ISO8859_16=15]="ISO8859_16",g[g.SJIS=16]="SJIS",g[g.Cp1250=17]="Cp1250",g[g.Cp1251=18]="Cp1251",g[g.Cp1252=19]="Cp1252",g[g.Cp1256=20]="Cp1256",g[g.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",g[g.UTF8=22]="UTF8",g[g.ASCII=23]="ASCII",g[g.Big5=24]="Big5",g[g.GB18030=25]="GB18030",g[g.EUC_KR=26]="EUC_KR",g})(me||{});class F{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,F.VALUE_IDENTIFIER_TO_ECI.set(e,this),F.NAME_TO_ECI.set(n,this);let o=this.values;for(let s=0,l=o.length;s!==l;s++){let f=o[s];F.VALUES_TO_ECI.set(f,this)}for(let s of r)F.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new k("incorect value");let t=F.VALUES_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}static getCharacterSetECIByName(e){let t=F.NAME_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}equals(e){if(!(e instanceof F))return!1;let t=e;return this.getName()===t.getName()}}F.VALUE_IDENTIFIER_TO_ECI=new Map,F.VALUES_TO_ECI=new Map,F.NAME_TO_ECI=new Map,F.Cp437=new F(me.Cp437,Int32Array.from([0,2]),"Cp437"),F.ISO8859_1=new F(me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),F.ISO8859_2=new F(me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),F.ISO8859_3=new F(me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),F.ISO8859_4=new F(me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),F.ISO8859_5=new F(me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),F.ISO8859_6=new F(me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),F.ISO8859_7=new F(me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),F.ISO8859_8=new F(me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),F.ISO8859_9=new F(me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),F.ISO8859_10=new F(me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),F.ISO8859_11=new F(me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),F.ISO8859_13=new F(me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),F.ISO8859_14=new F(me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),F.ISO8859_15=new F(me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),F.ISO8859_16=new F(me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),F.SJIS=new F(me.SJIS,20,"SJIS","Shift_JIS"),F.Cp1250=new F(me.Cp1250,21,"Cp1250","windows-1250"),F.Cp1251=new F(me.Cp1251,22,"Cp1251","windows-1251"),F.Cp1252=new F(me.Cp1252,23,"Cp1252","windows-1252"),F.Cp1256=new F(me.Cp1256,24,"Cp1256","windows-1256"),F.UnicodeBigUnmarked=new F(me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),F.UTF8=new F(me.UTF8,26,"UTF8","UTF-8"),F.ASCII=new F(me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),F.Big5=new F(me.Big5,28,"Big5"),F.GB18030=new F(me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),F.EUC_KR=new F(me.EUC_KR,30,"EUC_KR","EUC-KR");let Hn=(()=>{class g extends _{}return g.kind="UnsupportedOperationException",g})();class st{static decode(e,t){let n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!st.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){let n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof F?e:F.getCharacterSetECIByName(e)}static decodeFallback(e,t){let n=this.encodingCharacterSet(t);if(st.isDecodeFallbackSupported(n)){let r="";for(let o=0,s=e.length;o<s;o++){let l=e[o].toString(16);l.length<2&&(l="0"+l),r+="%"+l}return decodeURIComponent(r)}if(n.equals(F.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Hn(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(F.UTF8)||e.equals(F.ISO8859_1)||e.equals(F.ASCII)}static encodeFallback(e){let n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let o=0;o<n.length;o++)r.push(n[o].charCodeAt(0));return new Uint8Array(r)}}class ne{static castAsNonUtf8Char(e,t=null){let n=t?t.getName():this.ISO88591;return st.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(de.CHARACTER_SET)!==void 0)return t.get(de.CHARACTER_SET).toString();let n=e.length,r=!0,o=!0,s=!0,l=0,f=0,d=0,x=0,m=0,E=0,y=0,b=0,I=0,S=0,O=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let j=0;j<n&&(r||o||s);j++){let R=e[j]&255;s&&(l>0?(R&128)===0?s=!1:l--:(R&128)!==0&&((R&64)===0?s=!1:(l++,(R&32)===0?f++:(l++,(R&16)===0?d++:(l++,(R&8)===0?x++:s=!1))))),r&&(R>127&&R<160?r=!1:R>159&&(R<192||R===215||R===247)&&O++),o&&(m>0?R<64||R===127||R>252?o=!1:m--:R===128||R===160||R>239?o=!1:R>160&&R<224?(E++,b=0,y++,y>I&&(I=y)):R>127?(m++,y=0,b++,b>S&&(S=b)):(y=0,b=0))}return s&&l>0&&(s=!1),o&&m>0&&(o=!1),s&&(P||f+d+x>0)?ne.UTF8:o&&(ne.ASSUME_SHIFT_JIS||I>=3||S>=3)?ne.SHIFT_JIS:r&&o?I===2&&E===2||O*10>=n?ne.SHIFT_JIS:ne.ISO88591:r?ne.ISO88591:o?ne.SHIFT_JIS:s?ne.UTF8:ne.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(s,l,f,d,x,m){if(s==="%%")return"%";if(t[++n]===void 0)return;s=d?parseInt(d.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,y;switch(m){case"s":y=t[n];break;case"c":y=t[n][0];break;case"f":y=parseFloat(t[n]).toFixed(s);break;case"p":y=parseFloat(t[n]).toPrecision(s);break;case"e":y=parseFloat(t[n]).toExponential(s);break;case"x":y=parseInt(t[n]).toString(E||16);break;case"d":y=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(E);let b=parseInt(f),I=f&&f[0]+""=="0"?"0":" ";for(;y.length<b;)y=l!==void 0?y+I:I+y;return y}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,r)}static getBytes(e,t){return st.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ne.SHIFT_JIS=F.SJIS.getName(),ne.GB2312="GB2312",ne.ISO88591=F.ISO8859_1.getName(),ne.EUC_JP="EUC_JP",ne.UTF8=F.UTF8.getName(),ne.PLATFORM_DEFAULT_ENCODING=ne.UTF8,ne.ASSUME_SHIFT_JIS=!1;class be{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ne.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Ve{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new w("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){let t=e.length,n=e[0].length,r=new Ve(n,t);for(let o=0;o<t;o++){let s=e[o];for(let l=0;l<n;l++)s[l]&&r.set(l,o)}return r}static parseFromString(e,t,n){if(e===null)throw new w("stringRepresentation cannot be null");let r=new Array(e.length),o=0,s=0,l=-1,f=0,d=0;for(;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(o>s){if(l===-1)l=o-s;else if(o-s!==l)throw new w("row lengths do not match");s=o,f++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,r[o]=!0,o++;else if(e.substring(d,d+n.length)===n)d+=n.length,r[o]=!1,o++;else throw new w("illegal character encountered: "+e.substring(d));if(o>s){if(l===-1)l=o-s;else if(o-s!==l)throw new w("row lengths do not match");f++}let x=new Ve(l,f);for(let m=0;m<o;m++)r[m]&&x.set(Math.floor(m%l),Math.floor(m/l));return x}get(e,t){let n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new w("input matrix dimensions do not match");let t=new le(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let o=0,s=this.height;o<s;o++){let l=o*n,f=e.getRow(o,t).getBitArray();for(let d=0;d<n;d++)r[l+d]^=f[d]}}clear(){let e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new w("Left and top must be nonnegative");if(r<1||n<1)throw new w("Height and width must be at least 1");let o=e+n,s=t+r;if(s>this.height||o>this.width)throw new w("The region must fit inside the matrix");let l=this.rowSize,f=this.bits;for(let d=t;d<s;d++){let x=d*l;for(let m=e;m<o;m++)f[x+Math.floor(m/32)]|=1<<(m&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new le(this.width):t.clear();let n=this.rowSize,r=this.bits,o=e*n;for(let s=0;s<n;s++)t.setBulk(s*32,r[o+s]);return t}setRow(e,t){Q.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){let e=this.getWidth(),t=this.getHeight(),n=new le(e),r=new le(e);for(let o=0,s=Math.floor((t+1)/2);o<s;o++)n=this.getRow(o,n),r=this.getRow(t-1-o,r),n.reverse(),r.reverse(),this.setRow(o,r),this.setRow(t-1-o,n)}getEnclosingRectangle(){let e=this.width,t=this.height,n=this.rowSize,r=this.bits,o=e,s=t,l=-1,f=-1;for(let d=0;d<t;d++)for(let x=0;x<n;x++){let m=r[d*n+x];if(m!==0){if(d<s&&(s=d),d>f&&(f=d),x*32<o){let E=0;for(;(m<<31-E&4294967295)===0;)E++;x*32+E<o&&(o=x*32+E)}if(x*32+31>l){let E=31;for(;!(m>>>E);)E--;x*32+E>l&&(l=x*32+E)}}}return l<o||f<s?null:Int32Array.from([o,s,l-o+1,f-s+1])}getTopLeftOnBit(){let e=this.rowSize,t=this.bits,n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;let r=n/e,o=n%e*32,s=t[n],l=0;for(;(s<<31-l&4294967295)===0;)l++;return o+=l,Int32Array.from([o,r])}getBottomRightOnBit(){let e=this.rowSize,t=this.bits,n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;let r=Math.floor(n/e),o=Math.floor(n%e)*32,s=t[n],l=31;for(;!(s>>>l);)l--;return o+=l,Int32Array.from([o,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ve))return!1;let t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&te.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+te.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new be;for(let o=0,s=this.height;o<s;o++){for(let l=0,f=this.width;l<f;l++)r.append(this.get(l,o)?e:t);r.append(n)}return r.toString()}clone(){return new Ve(this.width,this.height,this.rowSize,this.bits.slice())}}let D=(()=>{class g extends _{static getNotFoundInstance(){return new g}}return g.kind="NotFoundException",g})();class ze extends fe{constructor(e){super(e),this.luminances=ze.EMPTY,this.buckets=new Int32Array(ze.LUMINANCE_BUCKETS)}getBlackRow(e,t){let n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new le(r):t.clear(),this.initArrays(r);let o=n.getRow(e,this.luminances),s=this.buckets;for(let f=0;f<r;f++)s[(o[f]&255)>>ze.LUMINANCE_SHIFT]++;let l=ze.estimateBlackPoint(s);if(r<3)for(let f=0;f<r;f++)(o[f]&255)<l&&t.set(f);else{let f=o[0]&255,d=o[1]&255;for(let x=1;x<r-1;x++){let m=o[x+1]&255;(d*4-f-m)/2<l&&t.set(x),f=d,d=m}}return t}getBlackMatrix(){let e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new Ve(t,n);this.initArrays(t);let o=this.buckets;for(let f=1;f<5;f++){let d=Math.floor(n*f/5),x=e.getRow(d,this.luminances),m=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<m;E++){let y=x[E]&255;o[y>>ze.LUMINANCE_SHIFT]++}}let s=ze.estimateBlackPoint(o),l=e.getMatrix();for(let f=0;f<n;f++){let d=f*t;for(let x=0;x<t;x++)(l[d+x]&255)<s&&r.set(x,f)}return r}createBinarizer(e){return new ze(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));let t=this.buckets;for(let n=0;n<ze.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){let t=e.length,n=0,r=0,o=0;for(let x=0;x<t;x++)e[x]>o&&(r=x,o=e[x]),e[x]>n&&(n=e[x]);let s=0,l=0;for(let x=0;x<t;x++){let m=x-r,E=e[x]*m*m;E>l&&(s=x,l=E)}if(r>s){let x=r;r=s,s=x}if(s-r<=t/16)throw new D;let f=s-1,d=-1;for(let x=s-1;x>r;x--){let m=x-r,E=m*m*(s-x)*(n-e[x]);E>d&&(f=x,d=E)}return f<<ze.LUMINANCE_SHIFT}}ze.LUMINANCE_BITS=5,ze.LUMINANCE_SHIFT=8-ze.LUMINANCE_BITS,ze.LUMINANCE_BUCKETS=1<<ze.LUMINANCE_BITS,ze.EMPTY=Uint8ClampedArray.from([0]);class ie extends ze{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=ie.MINIMUM_DIMENSION&&n>=ie.MINIMUM_DIMENSION){let r=e.getMatrix(),o=t>>ie.BLOCK_SIZE_POWER;(t&ie.BLOCK_SIZE_MASK)!==0&&o++;let s=n>>ie.BLOCK_SIZE_POWER;(n&ie.BLOCK_SIZE_MASK)!==0&&s++;let l=ie.calculateBlackPoints(r,o,s,t,n),f=new Ve(t,n);ie.calculateThresholdForBlock(r,o,s,t,n,l,f),this.matrix=f}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ie(e)}static calculateThresholdForBlock(e,t,n,r,o,s,l){let f=o-ie.BLOCK_SIZE,d=r-ie.BLOCK_SIZE;for(let x=0;x<n;x++){let m=x<<ie.BLOCK_SIZE_POWER;m>f&&(m=f);let E=ie.cap(x,2,n-3);for(let y=0;y<t;y++){let b=y<<ie.BLOCK_SIZE_POWER;b>d&&(b=d);let I=ie.cap(y,2,t-3),S=0;for(let P=-2;P<=2;P++){let j=s[E+P];S+=j[I-2]+j[I-1]+j[I]+j[I+1]+j[I+2]}let O=S/25;ie.thresholdBlock(e,b,m,O,r,l)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,o,s){for(let l=0,f=n*o+t;l<ie.BLOCK_SIZE;l++,f+=o)for(let d=0;d<ie.BLOCK_SIZE;d++)(e[f+d]&255)<=r&&s.set(t+d,n+l)}static calculateBlackPoints(e,t,n,r,o){let s=o-ie.BLOCK_SIZE,l=r-ie.BLOCK_SIZE,f=new Array(n);for(let d=0;d<n;d++){f[d]=new Int32Array(t);let x=d<<ie.BLOCK_SIZE_POWER;x>s&&(x=s);for(let m=0;m<t;m++){let E=m<<ie.BLOCK_SIZE_POWER;E>l&&(E=l);let y=0,b=255,I=0;for(let O=0,P=x*r+E;O<ie.BLOCK_SIZE;O++,P+=r){for(let j=0;j<ie.BLOCK_SIZE;j++){let R=e[P+j]&255;y+=R,R<b&&(b=R),R>I&&(I=R)}if(I-b>ie.MIN_DYNAMIC_RANGE)for(O++,P+=r;O<ie.BLOCK_SIZE;O++,P+=r)for(let j=0;j<ie.BLOCK_SIZE;j++)y+=e[P+j]&255}let S=y>>ie.BLOCK_SIZE_POWER*2;if(I-b<=ie.MIN_DYNAMIC_RANGE&&(S=b/2,d>0&&m>0)){let O=(f[d-1][m]+2*f[d][m-1]+f[d-1][m-1])/4;b<O&&(S=O)}f[d][m]=S}}return f}}ie.BLOCK_SIZE_POWER=3,ie.BLOCK_SIZE=1<<ie.BLOCK_SIZE_POWER,ie.BLOCK_SIZE_MASK=ie.BLOCK_SIZE-1,ie.MINIMUM_DIMENSION=ie.BLOCK_SIZE*5,ie.MIN_DYNAMIC_RANGE=24;class jn{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new Hn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Hn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Hn("This luminance source does not support rotation by 45 degrees.")}toString(){let e=new Uint8ClampedArray(this.width),t=new be;for(let n=0;n<this.height;n++){let r=this.getRow(n,e);for(let o=0;o<this.width;o++){let s=r[o]&255,l;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()}}class Zt extends jn{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){let n=this.delegate.getRow(e,t),r=this.getWidth();for(let o=0;o<r;o++)n[o]=255-(n[o]&255);return n}getMatrix(){let e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new Zt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Zt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Zt(this.delegate.rotateCounterClockwise45())}}class qt extends jn{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=qt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){let t=e.getContext("2d").getImageData(0,0,e.width,e.height);return qt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){let r=new Uint8ClampedArray(t*n);for(let o=0,s=0,l=e.length;o<l;o+=4,s++){let f;if(e[o+3]===0)f=255;else{let x=e[o],m=e[o+1],E=e[o+2];f=306*x+601*m+117*E+512>>10}r[s]=f}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new w("Requested row is outside the image: "+e);let n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){let t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*qt.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(r))*o+Math.abs(Math.sin(r))*s),f=Math.ceil(Math.abs(Math.sin(r))*o+Math.abs(Math.cos(r))*s);return t.width=l,t.height=f,n.translate(l/2,f/2),n.rotate(r),n.drawImage(this.canvas,o/-2,s/-2),this.buffer=qt.makeBufferFromCanvasImageData(t),this}invert(){return new Zt(this)}}qt.DEGREE_TO_RADIANS=Math.PI/180;class ia{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var tt=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(g,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(x){try{d(n.next(x))}catch(m){s(m)}}function f(x){try{d(n.throw(x))}catch(m){s(m)}}function d(x){x.done?o(x.value):r(x.value).then(l,f)}d((n=n.apply(g,e||[])).next())})};class un{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return tt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(let n of e){let r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;let o=n.deviceId||n.id,s=n.label||`Video device ${t.length+1}`,l=n.groupId,f={deviceId:o,label:s,kind:r,groupId:l};t.push(f)}return t})}getVideoInputDevices(){return tt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new ia(t.deviceId,t.label))})}findDeviceById(e){return tt(this,void 0,void 0,function*(){let t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return tt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return tt(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};let r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return tt(this,void 0,void 0,function*(){let n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return tt(this,void 0,void 0,function*(){this.reset();let n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return tt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return tt(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};let o={video:r};return yield this.decodeFromConstraints(o,t,n)})}decodeFromConstraints(e,t,n){return tt(this,void 0,void 0,function*(){let r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return tt(this,void 0,void 0,function*(){this.reset();let r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return tt(this,void 0,void 0,function*(){let n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return tt(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){let n=document.getElementById(e);if(!n)throw new M(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new M(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new M("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new M("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new M("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new M("An image element must be provided.");this.reset();let t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){let t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){let n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new M("A video element must be provided.");this.reset();let t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new M("An URL must be provided.");this.reset();let t=this.prepareImageElement();this.imageElement=t;let n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new M("An URL must be provided.");this.reset();let t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new M("An URL must be provided.");this.reset();let n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return tt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return tt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;let r=(o,s)=>{if(this._stopAsyncDecode){s(new D("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let l=this.decode(e);o(l)}catch(l){let f=t&&l instanceof D,x=(l instanceof B||l instanceof k)&&n;if(f||x)return setTimeout(r,this._timeBetweenDecodingAttempts,o,s);s(l)}};return new Promise((o,s)=>r(o,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;let n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);let o=r instanceof B||r instanceof k,s=r instanceof D;(o||s)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){let t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){let t=this.getCaptureCanvasContext(e);this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);let n=this.getCaptureCanvas(e),r=new qt(n),o=new ie(r);return new N(o)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){let n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){let t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let t=document.createElement("canvas"),n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class nt{constructor(e,t,n=t==null?0:8*t.length,r,o,s=Q.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Q.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){let t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){let n=new Array(t.length+e.length);Q.arraycopy(t,0,n,0,t.length),Q.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var oa=(function(g){return g[g.AZTEC=0]="AZTEC",g[g.CODABAR=1]="CODABAR",g[g.CODE_39=2]="CODE_39",g[g.CODE_93=3]="CODE_93",g[g.CODE_128=4]="CODE_128",g[g.DATA_MATRIX=5]="DATA_MATRIX",g[g.EAN_8=6]="EAN_8",g[g.EAN_13=7]="EAN_13",g[g.ITF=8]="ITF",g[g.MAXICODE=9]="MAXICODE",g[g.PDF_417=10]="PDF_417",g[g.QR_CODE=11]="QR_CODE",g[g.RSS_14=12]="RSS_14",g[g.RSS_EXPANDED=13]="RSS_EXPANDED",g[g.UPC_A=14]="UPC_A",g[g.UPC_E=15]="UPC_E",g[g.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",g})(oa||{}),J=oa,aa=(function(g){return g[g.OTHER=0]="OTHER",g[g.ORIENTATION=1]="ORIENTATION",g[g.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",g[g.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",g[g.ISSUE_NUMBER=4]="ISSUE_NUMBER",g[g.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",g[g.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",g[g.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",g[g.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",g[g.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",g[g.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",g})(aa||{}),Ge=aa;class Vn{constructor(e,t,n,r,o=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class zn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new w;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class lt{constructor(e,t){if(t.length===0)throw new w;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),Q.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);let t=this.coefficients,n;if(e===1){n=0;for(let s=0,l=t.length;s!==l;s++){let f=t[s];n=zn.addOrSubtract(n,f)}return n}n=t[0];let r=t.length,o=this.field;for(let s=1;s<r;s++)n=zn.addOrSubtract(o.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),o=n.length-t.length;Q.arraycopy(n,0,r,0,o);for(let s=o;s<n.length;s++)r[s]=zn.addOrSubtract(t[s-o],n[s]);return new lt(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();let t=this.coefficients,n=t.length,r=e.coefficients,o=r.length,s=new Int32Array(n+o-1),l=this.field;for(let f=0;f<n;f++){let d=t[f];for(let x=0;x<o;x++)s[f+x]=zn.addOrSubtract(s[f+x],l.multiply(d,r[x]))}return new lt(l,s)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;let t=this.coefficients.length,n=this.field,r=new Int32Array(t),o=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(o[s],e);return new lt(n,r)}multiplyByMonomial(e,t){if(e<0)throw new w;if(t===0)return this.field.getZero();let n=this.coefficients,r=n.length,o=new Int32Array(r+e),s=this.field;for(let l=0;l<r;l++)o[l]=s.multiply(n[l],t);return new lt(s,o)}divide(e){if(!this.field.equals(e.field))throw new w("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new w("Divide by 0");let t=this.field,n=t.getZero(),r=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){let l=r.getDegree()-e.getDegree(),f=t.multiply(r.getCoefficient(r.getDegree()),s),d=e.multiplyByMonomial(l,f),x=t.buildMonomial(l,f);n=n.addOrSubtract(x),r=r.addOrSubtract(d)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){let r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}let hi=(()=>{class g extends _{}return g.kind="ArithmeticException",g})();class we extends zn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;let r=new Int32Array(t),o=1;for(let l=0;l<t;l++)r[l]=o,o*=2,o>=t&&(o^=e,o&=t-1);this.expTable=r;let s=new Int32Array(t);for(let l=0;l<t-1;l++)s[r[l]]=l;this.logTable=s,this.zero=new lt(this,Int32Array.from([0])),this.one=new lt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new w;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new lt(this,n)}inverse(e){if(e===0)throw new hi;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Y.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;let Gn=(()=>{class g extends _{}return g.kind="ReedSolomonException",g})(),Xt=(()=>{class g extends _{}return g.kind="IllegalStateException",g})();class Xn{constructor(e){this.field=e}decode(e,t){let n=this.field,r=new lt(n,e),o=new Int32Array(t),s=!0;for(let y=0;y<t;y++){let b=r.evaluateAt(n.exp(y+n.getGeneratorBase()));o[o.length-1-y]=b,b!==0&&(s=!1)}if(s)return;let l=new lt(n,o),f=this.runEuclideanAlgorithm(n.buildMonomial(t,1),l,t),d=f[0],x=f[1],m=this.findErrorLocations(d),E=this.findErrorMagnitudes(x,m);for(let y=0;y<m.length;y++){let b=e.length-1-n.log(m[y]);if(b<0)throw new Gn("Bad error location");e[b]=we.addOrSubtract(e[b],E[y])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let y=e;e=t,t=y}let r=this.field,o=e,s=t,l=r.getZero(),f=r.getOne();for(;s.getDegree()>=(n/2|0);){let y=o,b=l;if(o=s,l=f,o.isZero())throw new Gn("r_{i-1} was zero");s=y;let I=r.getZero(),S=o.getCoefficient(o.getDegree()),O=r.inverse(S);for(;s.getDegree()>=o.getDegree()&&!s.isZero();){let P=s.getDegree()-o.getDegree(),j=r.multiply(s.getCoefficient(s.getDegree()),O);I=I.addOrSubtract(r.buildMonomial(P,j)),s=s.addOrSubtract(o.multiplyByMonomial(P,j))}if(f=I.multiply(l).addOrSubtract(b),s.getDegree()>=o.getDegree())throw new Xt("Division algorithm failed to reduce polynomial?")}let d=f.getCoefficient(0);if(d===0)throw new Gn("sigmaTilde(0) was zero");let x=r.inverse(d),m=f.multiplyScalar(x),E=s.multiplyScalar(x);return[m,E]}findErrorLocations(e){let t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);let n=new Int32Array(t),r=0,o=this.field;for(let s=1;s<o.getSize()&&r<t;s++)e.evaluateAt(s)===0&&(n[r]=o.inverse(s),r++);if(r!==t)throw new Gn("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){let n=t.length,r=new Int32Array(n),o=this.field;for(let s=0;s<n;s++){let l=o.inverse(t[s]),f=1;for(let d=0;d<n;d++)if(s!==d){let x=o.multiply(t[d],l),m=(x&1)===0?x|1:x&-2;f=o.multiply(f,m)}r[s]=o.multiply(e.evaluateAt(l),o.inverse(f)),o.getGeneratorBase()!==0&&(r[s]=o.multiply(r[s],l))}return r}}var Je=(function(g){return g[g.UPPER=0]="UPPER",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.DIGIT=3]="DIGIT",g[g.PUNCT=4]="PUNCT",g[g.BINARY=5]="BINARY",g})(Je||{});let di=(()=>{class g{decode(t){this.ddata=t;let n=t.getBits(),r=this.extractBits(n),o=this.correctBits(r),s=g.convertBoolArrayToByteArray(o),l=g.getEncodedData(o),f=new Vn(s,l,null,null);return f.setNumBits(o.length),f}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let n=t.length,r=Je.UPPER,o=Je.UPPER,s="",l=0;for(;l<n;)if(o===Je.BINARY){if(n-l<5)break;let f=g.readCode(t,l,5);if(l+=5,f===0){if(n-l<11)break;f=g.readCode(t,l,11)+31,l+=11}for(let d=0;d<f;d++){if(n-l<8){l=n;break}let x=g.readCode(t,l,8);s+=ne.castAsNonUtf8Char(x),l+=8}o=r}else{let f=o===Je.DIGIT?4:5;if(n-l<f)break;let d=g.readCode(t,l,f);l+=f;let x=g.getCharacter(o,d);x.startsWith("CTRL_")?(r=o,o=g.getTable(x.charAt(5)),x.charAt(6)==="L"&&(r=o)):(s+=x,o=r)}return s}static getTable(t){switch(t){case"L":return Je.LOWER;case"P":return Je.PUNCT;case"M":return Je.MIXED;case"D":return Je.DIGIT;case"B":return Je.BINARY;case"U":default:return Je.UPPER}}static getCharacter(t,n){switch(t){case Je.UPPER:return g.UPPER_TABLE[n];case Je.LOWER:return g.LOWER_TABLE[n];case Je.MIXED:return g.MIXED_TABLE[n];case Je.PUNCT:return g.PUNCT_TABLE[n];case Je.DIGIT:return g.DIGIT_TABLE[n];default:throw new Xt("Bad table")}}correctBits(t){let n,r;this.ddata.getNbLayers()<=2?(r=6,n=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=we.AZTEC_DATA_10):(r=12,n=we.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),s=t.length/r;if(s<o)throw new k;let l=t.length%r,f=new Int32Array(s);for(let y=0;y<s;y++,l+=r)f[y]=g.readCode(t,l,r);try{new Xn(n).decode(f,s-o)}catch(y){throw new k(y)}let d=(1<<r)-1,x=0;for(let y=0;y<o;y++){let b=f[y];if(b===0||b===d)throw new k;(b===1||b===d-1)&&x++}let m=new Array(o*r-x),E=0;for(let y=0;y<o;y++){let b=f[y];if(b===1||b===d-1)m.fill(b>1,E,E+r-1),E+=r-1;else for(let I=r-1;I>=0;--I)m[E++]=(b&1<<I)!==0}return m}extractBits(t){let n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),o=(n?11:14)+r*4,s=new Int32Array(o),l=new Array(this.totalBitsInLayer(r,n));if(n)for(let f=0;f<s.length;f++)s[f]=f;else{let f=o+1+2*Y.truncDivision(Y.truncDivision(o,2)-1,15),d=o/2,x=Y.truncDivision(f,2);for(let m=0;m<d;m++){let E=m+Y.truncDivision(m,15);s[d-m-1]=x-E-1,s[d+m]=x+E+1}}for(let f=0,d=0;f<r;f++){let x=(r-f)*4+(n?9:12),m=f*2,E=o-1-m;for(let y=0;y<x;y++){let b=y*2;for(let I=0;I<2;I++)l[d+b+I]=t.get(s[m+I],s[m+y]),l[d+2*x+b+I]=t.get(s[m+y],s[E-I]),l[d+4*x+b+I]=t.get(s[E-I],s[E-y]),l[d+6*x+b+I]=t.get(s[E-y],s[m+I])}d+=x*8}return l}static readCode(t,n,r){let o=0;for(let s=n;s<n+r;s++)o<<=1,t[s]&&(o|=1);return o}static readByte(t,n){let r=t.length-n;return r>=8?g.readCode(t,n,8):g.readCode(t,n,r)<<8-r}static convertBoolArrayToByteArray(t){let n=new Uint8Array((t.length+7)/8);for(let r=0;r<n.length;r++)n[r]=g.readByte(t,8*r);return n}totalBitsInLayer(t,n){return((n?88:112)+16*t)*t}}return g.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],g.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],g.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],g.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],g.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],g})();class xe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){let o=e-n,s=t-r;return Math.sqrt(o*o+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){let o=e[n];t+=o}return t}}class hr{static floatToIntBits(e){return e}}hr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class W{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof W){let t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*hr.floatToIntBits(this.x)+hr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){let t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]),o,s,l;if(n>=t&&n>=r?(s=e[0],o=e[1],l=e[2]):r>=n&&r>=t?(s=e[1],o=e[0],l=e[2]):(s=e[2],o=e[0],l=e[1]),this.crossProductZ(o,s,l)<0){let f=o;o=l,l=f}e[0]=o,e[1]=s,e[2]=l}static distance(e,t){return xe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){let r=t.x,o=t.y;return(n.x-r)*(e.y-o)-(n.y-o)*(e.x-r)}}class dr{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class sa extends dr{constructor(e,t,n,r,o){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=o}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let gr=(()=>{class g{constructor(t,n,r,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),n==null&&(n=g.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),o==null&&(o=t.getHeight()/2|0);let s=n/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=o-s,this.downInit=o+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new D}detect(){let t=this.leftInit,n=this.rightInit,r=this.upInit,o=this.downInit,s=!1,l=!0,f=!1,d=!1,x=!1,m=!1,E=!1,y=this.width,b=this.height;for(;l;){l=!1;let I=!0;for(;(I||!d)&&n<y;)I=this.containsBlackPoint(r,o,n,!1),I?(n++,l=!0,d=!0):d||n++;if(n>=y){s=!0;break}let S=!0;for(;(S||!x)&&o<b;)S=this.containsBlackPoint(t,n,o,!0),S?(o++,l=!0,x=!0):x||o++;if(o>=b){s=!0;break}let O=!0;for(;(O||!m)&&t>=0;)O=this.containsBlackPoint(r,o,t,!1),O?(t--,l=!0,m=!0):m||t--;if(t<0){s=!0;break}let P=!0;for(;(P||!E)&&r>=0;)P=this.containsBlackPoint(t,n,r,!0),P?(r--,l=!0,E=!0):E||r--;if(r<0){s=!0;break}l&&(f=!0)}if(!s&&f){let I=n-t,S=null;for(let R=1;S===null&&R<I;R++)S=this.getBlackPointOnSegment(t,o-R,t+R,o);if(S==null)throw new D;let O=null;for(let R=1;O===null&&R<I;R++)O=this.getBlackPointOnSegment(t,r+R,t+R,r);if(O==null)throw new D;let P=null;for(let R=1;P===null&&R<I;R++)P=this.getBlackPointOnSegment(n,r+R,n-R,r);if(P==null)throw new D;let j=null;for(let R=1;j===null&&R<I;R++)j=this.getBlackPointOnSegment(n,o-R,n-R,o);if(j==null)throw new D;return this.centerEdges(j,S,P,O)}else throw new D}getBlackPointOnSegment(t,n,r,o){let s=xe.round(xe.distance(t,n,r,o)),l=(r-t)/s,f=(o-n)/s,d=this.image;for(let x=0;x<s;x++){let m=xe.round(t+x*l),E=xe.round(n+x*f);if(d.get(m,E))return new W(m,E)}return null}centerEdges(t,n,r,o){let s=t.getX(),l=t.getY(),f=n.getX(),d=n.getY(),x=r.getX(),m=r.getY(),E=o.getX(),y=o.getY(),b=g.CORR;return s<this.width/2?[new W(E-b,y+b),new W(f+b,d+b),new W(x-b,m-b),new W(s+b,l-b)]:[new W(E+b,y+b),new W(f+b,d-b),new W(x-b,m+b),new W(s-b,l-b)]}containsBlackPoint(t,n,r,o){let s=this.image;if(o){for(let l=t;l<=n;l++)if(s.get(l,r))return!0}else for(let l=t;l<=n;l++)if(s.get(r,l))return!0;return!1}}return g.INIT_SIZE=10,g.CORR=1,g})();class gi{static checkAndNudgePoints(e,t){let n=e.getWidth(),r=e.getHeight(),o=!0;for(let s=0;s<t.length&&o;s+=2){let l=Math.floor(t[s]),f=Math.floor(t[s+1]);if(l<-1||l>n||f<-1||f>r)throw new D;o=!1,l===-1?(t[s]=0,o=!0):l===n&&(t[s]=n-1,o=!0),f===-1?(t[s+1]=0,o=!0):f===r&&(t[s+1]=r-1,o=!0)}o=!0;for(let s=t.length-2;s>=0&&o;s-=2){let l=Math.floor(t[s]),f=Math.floor(t[s+1]);if(l<-1||l>n||f<-1||f>r)throw new D;o=!1,l===-1?(t[s]=0,o=!0):l===n&&(t[s]=n-1,o=!0),f===-1?(t[s+1]=0,o=!0):f===r&&(t[s+1]=r-1,o=!0)}}}class Ot{constructor(e,t,n,r,o,s,l,f,d){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=o,this.a32=s,this.a13=l,this.a23=f,this.a33=d}static quadrilateralToQuadrilateral(e,t,n,r,o,s,l,f,d,x,m,E,y,b,I,S){let O=Ot.quadrilateralToSquare(e,t,n,r,o,s,l,f);return Ot.squareToQuadrilateral(d,x,m,E,y,b,I,S).times(O)}transformPoints(e){let t=e.length,n=this.a11,r=this.a12,o=this.a13,s=this.a21,l=this.a22,f=this.a23,d=this.a31,x=this.a32,m=this.a33;for(let E=0;E<t;E+=2){let y=e[E],b=e[E+1],I=o*y+f*b+m;e[E]=(n*y+s*b+d)/I,e[E+1]=(r*y+l*b+x)/I}}transformPointsWithValues(e,t){let n=this.a11,r=this.a12,o=this.a13,s=this.a21,l=this.a22,f=this.a23,d=this.a31,x=this.a32,m=this.a33,E=e.length;for(let y=0;y<E;y++){let b=e[y],I=t[y],S=o*b+f*I+m;e[y]=(n*b+s*I+d)/S,t[y]=(r*b+l*I+x)/S}}static squareToQuadrilateral(e,t,n,r,o,s,l,f){let d=e-n+o-l,x=t-r+s-f;if(d===0&&x===0)return new Ot(n-e,o-n,e,r-t,s-r,t,0,0,1);{let m=n-o,E=l-o,y=r-s,b=f-s,I=m*b-E*y,S=(d*b-E*x)/I,O=(m*x-d*y)/I;return new Ot(n-e+S*n,l-e+O*l,e,r-t+S*r,f-t+O*f,t,S,O,1)}}static quadrilateralToSquare(e,t,n,r,o,s,l,f){return Ot.squareToQuadrilateral(e,t,n,r,o,s,l,f).buildAdjoint()}buildAdjoint(){return new Ot(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Ot(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class la extends gi{sampleGrid(e,t,n,r,o,s,l,f,d,x,m,E,y,b,I,S,O,P,j){let R=Ot.quadrilateralToQuadrilateral(r,o,s,l,f,d,x,m,E,y,b,I,S,O,P,j);return this.sampleGridWithTransform(e,t,n,R)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new D;let o=new Ve(t,n),s=new Float32Array(2*t);for(let l=0;l<n;l++){let f=s.length,d=l+.5;for(let x=0;x<f;x+=2)s[x]=x/2+.5,s[x+1]=d;r.transformPoints(s),gi.checkAndNudgePoints(e,s);try{for(let x=0;x<f;x+=2)e.get(Math.floor(s[x]),Math.floor(s[x+1]))&&o.set(x/2,l)}catch{throw new D}}return o}}class Qt{static setGridSampler(e){Qt.gridSampler=e}static getInstance(){return Qt.gridSampler}}Qt.gridSampler=new la;class rt{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new W(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ca{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let s=n[0];n[0]=n[2],n[2]=s}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new sa(r,o,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new D;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let l=n[(this.shift+s)%4];this.compact?(r<<=7,r+=l>>1&127):(r<<=10,r+=(l>>2&992)+(l>>1&31))}let o=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,o,s)=>{let l=(r>>t-2<<1)+(r&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(Y.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new D}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let o=n-r,s=new Int32Array(n);for(let f=n-1;f>=0;--f)s[f]=e&15,e>>=4;try{new Xn(we.AZTEC_PARAM).decode(s,o)}catch{throw new D}let l=0;for(let f=0;f<r;f++)l=(l<<4)+s[f];return l}getBullsEyeCorners(e){let t=e,n=e,r=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let m=this.getFirstDifferent(t,s,1,-1),E=this.getFirstDifferent(n,s,1,1),y=this.getFirstDifferent(r,s,-1,1),b=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){let I=this.distancePoint(b,m)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(I<.75||I>1.25||!this.isWhiteOrBlackRectangle(m,E,y,b))break}t=m,n=E,r=y,o=b,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new D;this.compact=this.nbCenterLayers===5;let l=new W(t.getX()+.5,t.getY()-.5),f=new W(n.getX()+.5,n.getY()+.5),d=new W(r.getX()-.5,r.getY()+.5),x=new W(o.getX()-.5,o.getY()-.5);return this.expandSquare([l,f,d,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let l=new gr(this.image).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch{let f=this.image.getWidth()/2,d=this.image.getHeight()/2;e=this.getFirstDifferent(new rt(f+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new rt(f+7,d+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rt(f-7,d+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new rt(f-7,d-7),!1,-1,-1).toResultPoint()}let o=xe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=xe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let l=new gr(this.image,15,o,s).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch{e=this.getFirstDifferent(new rt(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new rt(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rt(o-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new rt(o-7,s-7),!1,-1,-1).toResultPoint()}return o=xe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=xe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new rt(o,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,o){let s=Qt.getInstance(),l=this.getDimension(),f=l/2-this.nbCenterLayers,d=l/2+this.nbCenterLayers;return s.sampleGrid(e,l,l,f,f,d,f,d,d,f,d,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY())}sampleLine(e,t,n){let r=0,o=this.distanceResultPoint(e,t),s=o/n,l=e.getX(),f=e.getY(),d=s*(t.getX()-e.getX())/o,x=s*(t.getY()-e.getY())/o;for(let m=0;m<n;m++)this.image.get(xe.round(l+m*d),xe.round(f+m*x))&&(r|=1<<n-m-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let o=3;e=new rt(e.getX()-o,e.getY()+o),t=new rt(t.getX()-o,t.getY()-o),n=new rt(n.getX()+o,n.getY()-o),r=new rt(r.getX()+o,r.getY()+o);let s=this.getColor(r,e);if(s===0)return!1;let l=this.getColor(e,t);return l!==s||(l=this.getColor(t,n),l!==s)?!1:(l=this.getColor(n,r),l===s)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,s=0,l=e.getX(),f=e.getY(),d=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let E=0;E<x;E++)l+=r,f+=o,this.image.get(xe.round(l),xe.round(f))!==d&&s++;let m=s/n;return m>.1&&m<.9?0:m<=.1===d?1:-1}getFirstDifferent(e,t,n,r){let o=e.getX()+n,s=e.getY()+r;for(;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=n,s+=r;for(o-=n,s-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=n;for(o-=n;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=r;return s-=r,new rt(o,s)}expandSquare(e,t,n){let r=n/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,d=new W(l+r*o,f+r*s),x=new W(l-r*o,f-r*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;let m=new W(l+r*o,f+r*s),E=new W(l-r*o,f-r*s);return[d,m,x,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=xe.round(e.getX()),n=xe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Y.truncDivision(this.nbLayers-4,8)+1)+15}}class xr{decode(e,t=null){let n=null,r=new ca(e.getBlackMatrix()),o=null,s=null;try{let x=r.detectMirror(!1);o=x.getPoints(),this.reportFoundResultPoints(t,o),s=new di().decode(x)}catch(x){n=x}if(s==null)try{let x=r.detectMirror(!0);o=x.getPoints(),this.reportFoundResultPoints(t,o),s=new di().decode(x)}catch(x){throw n??x}let l=new nt(s.getText(),s.getRawBytes(),s.getNumBits(),o,J.AZTEC,Q.currentTimeMillis()),f=s.getByteSegments();f!=null&&l.putMetadata(Ge.BYTE_SEGMENTS,f);let d=s.getECLevel();return d!=null&&l.putMetadata(Ge.ERROR_CORRECTION_LEVEL,d),l}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(de.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,o,s)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class w0 extends un{constructor(e=500){super(new xr,e)}}class He{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(de.TRY_HARDER)===!0&&e.isRotateSupported()){let o=e.rotateCounterClockwise(),s=this.doDecode(o,t),l=s.getResultMetadata(),f=270;l!==null&&l.get(Ge.ORIENTATION)===!0&&(f=f+l.get(Ge.ORIENTATION)%360),s.putMetadata(Ge.ORIENTATION,f);let d=s.getResultPoints();if(d!==null){let x=o.getHeight();for(let m=0;m<d.length;m++)d[m]=new W(x-d[m].getY()-1,d[m].getX())}return s}else throw new D}}reset(){}doDecode(e,t){let n=e.getWidth(),r=e.getHeight(),o=new le(n),s=t&&t.get(de.TRY_HARDER)===!0,l=Math.max(1,r>>(s?8:5)),f;s?f=r:f=15;let d=Math.trunc(r/2);for(let x=0;x<f;x++){let m=Math.trunc((x+1)/2),E=(x&1)===0,y=d+l*(E?m:-m);if(y<0||y>=r)break;try{o=e.getBlackRow(y,o)}catch{continue}for(let b=0;b<2;b++){if(b===1&&(o.reverse(),t&&t.get(de.NEED_RESULT_POINT_CALLBACK)===!0)){let I=new Map;t.forEach((S,O)=>I.set(O,S)),I.delete(de.NEED_RESULT_POINT_CALLBACK),t=I}try{let I=this.decodeRow(y,o,t);if(b===1){I.putMetadata(Ge.ORIENTATION,180);let S=I.getResultPoints();S!==null&&(S[0]=new W(n-S[0].getX()-1,S[0].getY()),S[1]=new W(n-S[1].getX()-1,S[1].getY()))}return I}catch{}}}throw new D}static recordPattern(e,t,n){let r=n.length;for(let d=0;d<r;d++)n[d]=0;let o=e.getSize();if(t>=o)throw new D;let s=!e.get(t),l=0,f=t;for(;f<o;){if(e.get(f)!==s)n[l]++;else{if(++l===r)break;n[l]=1,s=!s}f++}if(!(l===r||l===r-1&&f===o))throw new D}static recordPatternInReverse(e,t,n){let r=n.length,o=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==o&&(r--,o=!o);if(r>=0)throw new D;He.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){let r=e.length,o=0,s=0;for(let d=0;d<r;d++)o+=e[d],s+=t[d];if(o<s)return Number.POSITIVE_INFINITY;let l=o/s;n*=l;let f=0;for(let d=0;d<r;d++){let x=e[d],m=t[d]*l,E=x>m?x-m:m-x;if(E>n)return Number.POSITIVE_INFINITY;f+=E}return f/o}}class U extends He{static findStartPattern(e){let t=e.getSize(),n=e.getNextSet(0),r=0,o=Int32Array.from([0,0,0,0,0,0]),s=n,l=!1,f=6;for(let d=n;d<t;d++)if(e.get(d)!==l)o[r]++;else{if(r===f-1){let x=U.MAX_AVG_VARIANCE,m=-1;for(let E=U.CODE_START_A;E<=U.CODE_START_C;E++){let y=He.patternMatchVariance(o,U.CODE_PATTERNS[E],U.MAX_INDIVIDUAL_VARIANCE);y<x&&(x=y,m=E)}if(m>=0&&e.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,m]);s+=o[0]+o[1],o=o.slice(2,o.length-1),o[r-1]=0,o[r]=0,r--}else r++;o[r]=1,l=!l}throw new D}static decodeCode(e,t,n){He.recordPattern(e,n,t);let r=U.MAX_AVG_VARIANCE,o=-1;for(let s=0;s<U.CODE_PATTERNS.length;s++){let l=U.CODE_PATTERNS[s],f=this.patternMatchVariance(t,l,U.MAX_INDIVIDUAL_VARIANCE);f<r&&(r=f,o=s)}if(o>=0)return o;throw new D}decodeRow(e,t,n){let r=n&&n.get(de.ASSUME_GS1)===!0,o=U.findStartPattern(t),s=o[2],l=0,f=new Uint8Array(20);f[l++]=s;let d;switch(s){case U.CODE_START_A:d=U.CODE_CODE_A;break;case U.CODE_START_B:d=U.CODE_CODE_B;break;case U.CODE_START_C:d=U.CODE_CODE_C;break;default:throw new k}let x=!1,m=!1,E="",y=o[0],b=o[1],I=Int32Array.from([0,0,0,0,0,0]),S=0,O=0,P=s,j=0,R=!0,ce=!1,re=!1;for(;!x;){let Sn=m;switch(m=!1,S=O,O=U.decodeCode(t,I,b),f[l++]=O,O!==U.CODE_STOP&&(R=!0),O!==U.CODE_STOP&&(j++,P+=j*O),y=b,b+=I.reduce((nl,rl)=>nl+rl,0),O){case U.CODE_START_A:case U.CODE_START_B:case U.CODE_START_C:throw new k}switch(d){case U.CODE_CODE_A:if(O<64)re===ce?E+=String.fromCharCode(32+O):E+=String.fromCharCode(32+O+128),re=!1;else if(O<96)re===ce?E+=String.fromCharCode(O-64):E+=String.fromCharCode(O+64),re=!1;else switch(O!==U.CODE_STOP&&(R=!1),O){case U.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case U.CODE_FNC_2:case U.CODE_FNC_3:break;case U.CODE_FNC_4_A:!ce&&re?(ce=!0,re=!1):ce&&re?(ce=!1,re=!1):re=!0;break;case U.CODE_SHIFT:m=!0,d=U.CODE_CODE_B;break;case U.CODE_CODE_B:d=U.CODE_CODE_B;break;case U.CODE_CODE_C:d=U.CODE_CODE_C;break;case U.CODE_STOP:x=!0;break}break;case U.CODE_CODE_B:if(O<96)re===ce?E+=String.fromCharCode(32+O):E+=String.fromCharCode(32+O+128),re=!1;else switch(O!==U.CODE_STOP&&(R=!1),O){case U.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case U.CODE_FNC_2:case U.CODE_FNC_3:break;case U.CODE_FNC_4_B:!ce&&re?(ce=!0,re=!1):ce&&re?(ce=!1,re=!1):re=!0;break;case U.CODE_SHIFT:m=!0,d=U.CODE_CODE_A;break;case U.CODE_CODE_A:d=U.CODE_CODE_A;break;case U.CODE_CODE_C:d=U.CODE_CODE_C;break;case U.CODE_STOP:x=!0;break}break;case U.CODE_CODE_C:if(O<100)O<10&&(E+="0"),E+=O;else switch(O!==U.CODE_STOP&&(R=!1),O){case U.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case U.CODE_CODE_A:d=U.CODE_CODE_A;break;case U.CODE_CODE_B:d=U.CODE_CODE_B;break;case U.CODE_STOP:x=!0;break}break}Sn&&(d=d===U.CODE_CODE_A?U.CODE_CODE_B:U.CODE_CODE_A)}let ut=b-y;if(b=t.getNextUnset(b),!t.isRange(b,Math.min(t.getSize(),b+(b-y)/2),!1))throw new D;if(P-=j*S,P%103!==S)throw new B;let Dt=E.length;if(Dt===0)throw new D;Dt>0&&R&&(d===U.CODE_CODE_C?E=E.substring(0,Dt-2):E=E.substring(0,Dt-1));let ft=(o[1]+o[0])/2,Te=y+ut/2,Ke=f.length,mt=new Uint8Array(Ke);for(let Sn=0;Sn<Ke;Sn++)mt[Sn]=f[Sn];let In=[new W(ft,e),new W(Te,e)];return new nt(E,mt,0,In,J.CODE_128,new Date().getTime())}}U.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],U.MAX_AVG_VARIANCE=.25,U.MAX_INDIVIDUAL_VARIANCE=.7,U.CODE_SHIFT=98,U.CODE_CODE_C=99,U.CODE_CODE_B=100,U.CODE_CODE_A=101,U.CODE_FNC_1=102,U.CODE_FNC_2=97,U.CODE_FNC_3=96,U.CODE_FNC_4_A=101,U.CODE_FNC_4_B=100,U.CODE_START_A=103,U.CODE_START_B=104,U.CODE_START_C=105,U.CODE_STOP=106;let xi=(()=>{class g extends He{constructor(t=!1,n=!1){super(),this.usingCheckDigit=t,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,n,r){let o=this.counters;o.fill(0),this.decodeRowResult="";let s=g.findAsteriskPattern(n,o),l=n.getNextSet(s[1]),f=n.getSize(),d,x;do{g.recordPattern(n,l,o);let S=g.toNarrowWidePattern(o);if(S<0)throw new D;d=g.patternToChar(S),this.decodeRowResult+=d,x=l;for(let O of o)l+=O;l=n.getNextSet(l)}while(d!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let m=0;for(let S of o)m+=S;let E=l-x-m;if(l!==f&&E*2<m)throw new D;if(this.usingCheckDigit){let S=this.decodeRowResult.length-1,O=0;for(let P=0;P<S;P++)O+=g.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(P));if(this.decodeRowResult.charAt(S)!==g.ALPHABET_STRING.charAt(O%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,S)}if(this.decodeRowResult.length===0)throw new D;let y;this.extendedMode?y=g.decodeExtended(this.decodeRowResult):y=this.decodeRowResult;let b=(s[1]+s[0])/2,I=x+m/2;return new nt(y,null,0,[new W(b,t),new W(I,t)],J.CODE_39,new Date().getTime())}static findAsteriskPattern(t,n){let r=t.getSize(),o=t.getNextSet(0),s=0,l=o,f=!1,d=n.length;for(let x=o;x<r;x++)if(t.get(x)!==f)n[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(n)===g.ASTERISK_ENCODING&&t.isRange(Math.max(0,l-Math.floor((x-l)/2)),l,!1))return[l,x];l+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,f=!f}throw new D}static toNarrowWidePattern(t){let n=t.length,r=0,o;do{let s=2147483647;for(let d of t)d<s&&d>r&&(s=d);r=s,o=0;let l=0,f=0;for(let d=0;d<n;d++){let x=t[d];x>r&&(f|=1<<n-1-d,o++,l+=x)}if(o===3){for(let d=0;d<n&&o>0;d++){let x=t[d];if(x>r&&(o--,x*2>=l))return-1}return f}}while(o>3);return-1}static patternToChar(t){for(let n=0;n<g.CHARACTER_ENCODINGS.length;n++)if(g.CHARACTER_ENCODINGS[n]===t)return g.ALPHABET_STRING.charAt(n);if(t===g.ASTERISK_ENCODING)return"*";throw new D}static decodeExtended(t){let n=t.length,r="";for(let o=0;o<n;o++){let s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){let l=t.charAt(o+1),f="\0";switch(s){case"+":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new k;break;case"$":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new k;break;case"%":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l==="X"||l==="Y"||l==="Z")f="\x7F";else throw new k;break;case"/":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new k;break}r+=f,o++}else r+=s}return r}}return g.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",g.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],g.ASTERISK_ENCODING=148,g})();class Ie extends He{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),o=this.decodeEnd(t),s=new be;Ie.decodeMiddle(t,r[1],o[0],s);let l=s.toString(),f=null;n!=null&&(f=n.get(de.ALLOWED_LENGTHS)),f==null&&(f=Ie.DEFAULT_ALLOWED_LENGTHS);let d=l.length,x=!1,m=0;for(let b of f){if(d===b){x=!0;break}b>m&&(m=b)}if(!x&&d>m&&(x=!0),!x)throw new k;let E=[new W(r[1],e),new W(o[0],e)];return new nt(l,null,0,E,J.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);t<n;){He.recordPattern(e,t,o);for(let d=0;d<5;d++){let x=2*d;s[d]=o[x],l[d]=o[x+1]}let f=Ie.decodeDigit(s);r.append(f.toString()),f=this.decodeDigit(l),r.append(f.toString()),o.forEach(function(d){t+=d})}}decodeStart(e){let t=Ie.skipWhiteSpace(e),n=Ie.findGuardPattern(e,t,Ie.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new D}static skipWhiteSpace(e){let t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new D;return n}decodeEnd(e){e.reverse();try{let t=Ie.skipWhiteSpace(e),n;try{n=Ie.findGuardPattern(e,t,Ie.END_PATTERN_REVERSED[0])}catch(o){o instanceof D&&(n=Ie.findGuardPattern(e,t,Ie.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,o=new Int32Array(r),s=e.getSize(),l=!1,f=0,d=t;o.fill(0);for(let x=t;x<s;x++)if(e.get(x)!==l)o[f]++;else{if(f===r-1){if(He.patternMatchVariance(o,n,Ie.MAX_INDIVIDUAL_VARIANCE)<Ie.MAX_AVG_VARIANCE)return[d,x];d+=o[0]+o[1],Q.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,l=!l}throw new D}static decodeDigit(e){let t=Ie.MAX_AVG_VARIANCE,n=-1,r=Ie.PATTERNS.length;for(let o=0;o<r;o++){let s=Ie.PATTERNS[o],l=He.patternMatchVariance(e,s,Ie.MAX_INDIVIDUAL_VARIANCE);l<t?(t=l,n=o):l===t&&(n=-1)}if(n>=0)return n%10;throw new D}}Ie.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ie.MAX_AVG_VARIANCE=.38,Ie.MAX_INDIVIDUAL_VARIANCE=.5,Ie.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ie.START_PATTERN=Int32Array.from([1,1,1,1]),Ie.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Le extends He{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,o=Int32Array.from([0,0,0]);for(;!t;){o=Int32Array.from([0,0,0]),n=Le.findGuardPattern(e,r,!1,this.START_END_PATTERN,o);let s=n[0];r=n[1];let l=s-(r-s);l>=0&&(t=e.isRange(l,s,!1))}return n}static checkChecksum(e){return Le.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Le.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}n*=3;for(let r=t-2;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}return(1e3-n)%10}static decodeEnd(e,t){return Le.findGuardPattern(e,t,!1,Le.START_END_PATTERN,new Int32Array(Le.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,o){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let l=0,f=t,d=r.length,x=n;for(let m=t;m<s;m++)if(e.get(m)!==x)o[l]++;else{if(l===d-1){if(He.patternMatchVariance(o,r,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return Int32Array.from([f,m]);f+=o[0]+o[1];let E=o.slice(2,o.length-1);for(let y=0;y<l-1;y++)o[y]=E[y];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,x=!x}throw new D}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let o=this.MAX_AVG_VARIANCE,s=-1,l=r.length;for(let f=0;f<l;f++){let d=r[f],x=He.patternMatchVariance(t,d,Le.MAX_INDIVIDUAL_VARIANCE);x<o&&(o=x,s=f)}if(s>=0)return s;throw new D}}Le.MAX_AVG_VARIANCE=.48,Le.MAX_INDIVIDUAL_VARIANCE=.7,Le.START_END_PATTERN=Int32Array.from([1,1,1]),Le.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Le.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Le.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Wn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,r),s=r.toString(),l=Wn.parseExtensionString(s),f=[new W((n[0]+n[1])/2,e),new W(o,e)],d=new nt(s,null,0,f,J.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),s=t[1],l=0;for(let d=0;d<5&&s<o;d++){let x=Le.decodeDigit(e,r,s,Le.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let m of r)s+=m;x>=10&&(l|=1<<4-d),d!==4&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==5)throw new D;let f=this.determineCheckDigit(l);if(Wn.extensionChecksum(n.toString())!==f)throw new D;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new D}static parseExtensionString(e){if(e.length!==5)return null;let t=Wn.parseExtension5String(e);return t==null?null:new Map([[Ge.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),o=n%100,s=o<10?"0"+o:o.toString();return t+r+"."+s}}class pi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,r),s=r.toString(),l=pi.parseExtensionString(s),f=[new W((n[0]+n[1])/2,e),new W(o,e)],d=new nt(s,null,0,f,J.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),s=t[1],l=0;for(let f=0;f<2&&s<o;f++){let d=Le.decodeDigit(e,r,s,Le.L_AND_G_PATTERNS);n+=String.fromCharCode(48+d%10);for(let x of r)s+=x;d>=10&&(l|=1<<1-f),f!==1&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==2)throw new D;if(parseInt(n.toString())%4!==l)throw new D;return s}static parseExtensionString(e){return e.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(e)]])}}class ua{static decodeRow(e,t,n){let r=Le.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Wn().decodeRow(e,t,r)}catch{return new pi().decodeRow(e,t,r)}}}ua.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ee extends Le{constructor(){super(),this.decodeRowStringBuffer="",Ee.L_AND_G_PATTERNS=Ee.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ee.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Ee.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ee.findStartGuardPattern(t),o=n==null?null:n.get(de.NEED_RESULT_POINT_CALLBACK);if(o!=null){let R=new W((r[0]+r[1])/2,e);o.foundPossibleResultPoint(R)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),l=s.rowOffset,f=s.resultString;if(o!=null){let R=new W(l,e);o.foundPossibleResultPoint(R)}let d=this.decodeEnd(t,l);if(o!=null){let R=new W((d[0]+d[1])/2,e);o.foundPossibleResultPoint(R)}let x=d[1],m=x+(x-d[0]);if(m>=t.getSize()||!t.isRange(x,m,!1))throw new D;let E=f.toString();if(E.length<8)throw new k;if(!Ee.checkChecksum(E))throw new B;let y=(r[1]+r[0])/2,b=(d[1]+d[0])/2,I=this.getBarcodeFormat(),S=[new W(y,e),new W(b,e)],O=new nt(E,null,0,S,I,new Date().getTime()),P=0;try{let R=ua.decodeRow(e,t,d[1]);O.putMetadata(Ge.UPC_EAN_EXTENSION,R.getText()),O.putAllMetadata(R.getResultMetadata()),O.addResultPoints(R.getResultPoints()),P=R.getText().length}catch{}let j=n==null?null:n.get(de.ALLOWED_EAN_EXTENSIONS);if(j!=null){let R=!1;for(let ce in j)if(P.toString()===ce){R=!0;break}if(!R)throw new D}return O}decodeEnd(e,t){return Ee.findGuardPattern(e,t,!1,Ee.START_END_PATTERN,new Int32Array(Ee.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ee.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Ee.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}n*=3;for(let r=t-2;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new k;n+=o}return(1e3-n)%10}}let pr=(()=>{class g extends Ee{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,n,r){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let s=t.getSize(),l=n[1],f=0;for(let x=0;x<6&&l<s;x++){let m=Ee.decodeDigit(t,o,l,Ee.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);for(let E of o)l+=E;m>=10&&(f|=1<<5-x)}r=g.determineFirstDigit(r,f),l=Ee.findGuardPattern(t,l,!0,Ee.MIDDLE_PATTERN,new Int32Array(Ee.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&l<s;x++){let m=Ee.decodeDigit(t,o,l,Ee.L_PATTERNS);r+=String.fromCharCode(48+m);for(let E of o)l+=E}return{rowOffset:l,resultString:r}}getBarcodeFormat(){return J.EAN_13}static determineFirstDigit(t,n){for(let r=0;r<10;r++)if(n===this.FIRST_DIGIT_ENCODINGS[r])return t=String.fromCharCode(48+r)+t,t;throw new D}}return g.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],g})();class fa extends Ee{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),s=t[1];for(let f=0;f<4&&s<o;f++){let d=Ee.decodeDigit(e,r,s,Ee.L_PATTERNS);n+=String.fromCharCode(48+d);for(let x of r)s+=x}s=Ee.findGuardPattern(e,s,!0,Ee.MIDDLE_PATTERN,new Int32Array(Ee.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<4&&s<o;f++){let d=Ee.decodeDigit(e,r,s,Ee.L_PATTERNS);n+=String.fromCharCode(48+d);for(let x of r)s+=x}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return J.EAN_8}}class ha extends Ee{constructor(){super(...arguments),this.ean13Reader=new pr}getBarcodeFormat(){return J.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new nt(t.substring(1),null,null,e.getResultPoints(),J.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new D}reset(){this.ean13Reader.reset()}}class vt extends Ee{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters.map(d=>d);r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),s=t[1],l=0;for(let d=0;d<6&&s<o;d++){let x=vt.decodeDigit(e,r,s,vt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let m of r)s+=m;x>=10&&(l|=1<<5-d)}let f=vt.determineNumSysAndCheckDigit(n,l);return{rowOffset:s,resultString:f}}decodeEnd(e,t){return vt.findGuardPatternWithoutCounters(e,t,!0,vt.MIDDLE_END_PATTERN)}checkChecksum(e){return Ee.checkChecksum(vt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let o=String.fromCharCode(48+n),s=String.fromCharCode(48+r);return o+e+s}throw D.getNotFoundInstance()}getBarcodeFormat(){return J.UPC_E}static convertUPCEtoUPCA(e){let t=e.slice(1,7).split("").map(o=>o.charCodeAt(0)),n=new be;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}vt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class mi extends He{constructor(e){super();let t=e==null?null:e.get(de.POSSIBLE_FORMATS),n=[];i(t)?(n.push(new pr),n.push(new ha),n.push(new fa),n.push(new vt)):(t.indexOf(J.EAN_13)>-1&&n.push(new pr),t.indexOf(J.UPC_A)>-1&&n.push(new ha),t.indexOf(J.EAN_8)>-1&&n.push(new fa),t.indexOf(J.UPC_E)>-1&&n.push(new vt)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{let o=r.decodeRow(e,t,n),s=o.getBarcodeFormat()===J.EAN_13&&o.getText().charAt(0)==="0",l=n==null?null:n.get(de.POSSIBLE_FORMATS),f=l==null||l.includes(J.UPC_A);if(s&&f){let d=o.getRawBytes(),x=new nt(o.getText().substring(1),d,d?d.length:null,o.getResultPoints(),J.UPC_A);return x.putAllMetadata(o.getResultMetadata()),x}return o}catch{}throw new D}reset(){for(let e of this.readers)e.reset()}}let fn=(()=>{class g extends He{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,n){for(let r=0;r<n.length;r++)if(He.patternMatchVariance(t,n[r],g.MAX_INDIVIDUAL_VARIANCE)<g.MAX_AVG_VARIANCE)return r;throw new D}static count(t){return xe.sum(new Int32Array(t))}static increment(t,n){let r=0,o=n[0];for(let s=1;s<t.length;s++)n[s]>o&&(o=n[s],r=s);t[r]++}static decrement(t,n){let r=0,o=n[0];for(let s=1;s<t.length;s++)n[s]<o&&(o=n[s],r=s);t[r]--}static isFinderPattern(t){let n=t[0]+t[1],r=n+t[2]+t[3],o=n/r;if(o>=g.MIN_FINDER_PATTERN_RATIO&&o<=g.MAX_FINDER_PATTERN_RATIO){let s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;for(let f of t)f>l&&(l=f),f<s&&(s=f);return l<10*s}return!1}}return g.MAX_AVG_VARIANCE=.2,g.MAX_INDIVIDUAL_VARIANCE=.45,g.MIN_FINDER_PATTERN_RATIO=9.5/12,g.MAX_FINDER_PATTERN_RATIO=12.5/14,g})();class En{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof En))return!1;let t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mr{constructor(e,t,n,r,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new W(n,o)),this.resultPoints.push(new W(r,o))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof mr))return!1;let t=e;return this.value===t.value}hashCode(){return this.value}}class Ft{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let f of e)r+=f;let o=0,s=0,l=e.length;for(let f=0;f<l-1;f++){let d;for(d=1,s|=1<<f;d<e[f];d++,s&=~(1<<f)){let x=Ft.combins(r-d-1,l-f-2);if(n&&s===0&&r-d-(l-f-1)>=l-f-1&&(x-=Ft.combins(r-d-(l-f),l-f-2)),l-f-1>1){let m=0;for(let E=r-d-(l-f-2);E>t;E--)m+=Ft.combins(r-d-E-1,l-f-3);x-=m*(l-1-f)}else r-d>t&&x--;o+=x}r-=d}return o}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let o=1,s=1;for(let l=e;l>n;l--)o*=l,s<=r&&(o/=s,s++);for(;s<=r;)o/=s,s++;return o}}class E0{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new le(n),o=0,l=e[0].getRightChar().getValue();for(let f=11;f>=0;--f)(l&1<<f)!=0&&r.set(o),o++;for(let f=1;f<e.length;++f){let d=e[f],x=d.getLeftChar().getValue();for(let m=11;m>=0;--m)(x&1<<m)!=0&&r.set(o),o++;if(d.getRightChar()!=null){let m=d.getRightChar().getValue();for(let E=11;E>=0;--E)(m&1<<E)!=0&&r.set(o),o++}}return r}}class hn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}let Mt=(()=>{class g extends wi{constructor(t,n){super(t),this.value=n}getValue(){return this.value}isFNC1(){return this.value===g.FNC1}}return g.FNC1="$",g})();class dn extends wi{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Cn=(()=>{class g extends wi{constructor(t,n,r){if(super(t),n<0||n>10||r<0||r>10)throw new k;this.firstDigit=n,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===g.FNC1}isSecondDigitFNC1(){return this.secondDigit===g.FNC1}isAnyFNC1(){return this.firstDigit===g.FNC1||this.secondDigit===g.FNC1}}return g.FNC1=10,g})();class G{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new D;let t=e.substring(0,2);for(let o of G.TWO_DIGIT_DATA_LENGTH)if(o[0]===t)return o[1]===G.VARIABLE_LENGTH?G.processVariableAI(2,o[2],e):G.processFixedAI(2,o[1],e);if(e.length<3)throw new D;let n=e.substring(0,3);for(let o of G.THREE_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===G.VARIABLE_LENGTH?G.processVariableAI(3,o[2],e):G.processFixedAI(3,o[1],e);for(let o of G.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===G.VARIABLE_LENGTH?G.processVariableAI(4,o[2],e):G.processFixedAI(4,o[1],e);if(e.length<4)throw new D;let r=e.substring(0,4);for(let o of G.FOUR_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===G.VARIABLE_LENGTH?G.processVariableAI(4,o[2],e):G.processFixedAI(4,o[1],e);throw new D}static processFixedAI(e,t,n){if(n.length<e)throw new D;let r=n.substring(0,e);if(n.length<e+t)throw new D;let o=n.substring(e,e+t),s=n.substring(e+t),l="("+r+")"+o,f=G.parseFieldsInGeneralPurpose(s);return f==null?l:l+f}static processVariableAI(e,t,n){let r=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;let s=n.substring(e,o),l=n.substring(o),f="("+r+")"+s,d=G.parseFieldsInGeneralPurpose(l);return d==null?f:f+d}}G.VARIABLE_LENGTH=[],G.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",G.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",G.VARIABLE_LENGTH,20],["22",G.VARIABLE_LENGTH,29],["30",G.VARIABLE_LENGTH,8],["37",G.VARIABLE_LENGTH,8],["90",G.VARIABLE_LENGTH,30],["91",G.VARIABLE_LENGTH,30],["92",G.VARIABLE_LENGTH,30],["93",G.VARIABLE_LENGTH,30],["94",G.VARIABLE_LENGTH,30],["95",G.VARIABLE_LENGTH,30],["96",G.VARIABLE_LENGTH,30],["97",G.VARIABLE_LENGTH,3],["98",G.VARIABLE_LENGTH,30],["99",G.VARIABLE_LENGTH,30]],G.THREE_DIGIT_DATA_LENGTH=[["240",G.VARIABLE_LENGTH,30],["241",G.VARIABLE_LENGTH,30],["242",G.VARIABLE_LENGTH,6],["250",G.VARIABLE_LENGTH,30],["251",G.VARIABLE_LENGTH,30],["253",G.VARIABLE_LENGTH,17],["254",G.VARIABLE_LENGTH,20],["400",G.VARIABLE_LENGTH,30],["401",G.VARIABLE_LENGTH,30],["402",17],["403",G.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",G.VARIABLE_LENGTH,20],["421",G.VARIABLE_LENGTH,15],["422",3],["423",G.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],G.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",G.VARIABLE_LENGTH,15],["391",G.VARIABLE_LENGTH,18],["392",G.VARIABLE_LENGTH,15],["393",G.VARIABLE_LENGTH,18],["703",G.VARIABLE_LENGTH,30]],G.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",G.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",G.VARIABLE_LENGTH,20],["8003",G.VARIABLE_LENGTH,30],["8004",G.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",G.VARIABLE_LENGTH,30],["8008",G.VARIABLE_LENGTH,12],["8018",18],["8020",G.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",G.VARIABLE_LENGTH,70],["8200",G.VARIABLE_LENGTH,70]];class An{constructor(e){this.buffer=new be,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let o=this.decodeGeneralPurposeField(n,r),s=G.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?r=""+o.getRemainingValue():r=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let o=this.extractNumericValueFromBitArray(e,4);return o===0?new Cn(this.information.getSize(),Cn.FNC1,Cn.FNC1):new Cn(this.information.getSize(),o-1,Cn.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new Cn(e+7,n,r)}extractNumericValueFromBitArray(e,t){return An.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let o=0;o<n;++o)e.get(t+o)&&(r|=1<<n-o-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new dn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new dn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new dn(this.current.getPosition(),this.buffer.toString()):t=new dn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new hn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new dn(this.current.getPosition(),this.buffer.toString());return new hn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new hn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new dn(this.current.getPosition(),this.buffer.toString());return new hn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new hn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new dn(this.current.getPosition(),this.buffer.toString());return new hn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new hn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Mt(e+5,Mt.FNC1);if(t>=5&&t<15)return new Mt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Mt(e+7,""+(n+1));if(n>=90&&n<116)return new Mt(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),o;switch(r){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new k}return new Mt(e+8,o)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Mt(e+5,Mt.FNC1);if(t>=5&&t<15)return new Mt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Mt(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Xt("Decoding invalid alphanumeric value: "+n)}return new Mt(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ei{constructor(e){this.information=e,this.generalDecoder=new An(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Nt=(()=>{class g extends Ei{constructor(t){super(t)}encodeCompressedGtin(t,n){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,r)}encodeCompressedGtinWithoutAI(t,n,r){for(let o=0;o<4;++o){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}g.appendCheckDigit(t,r)}static appendCheckDigit(t,n){let r=0;for(let o=0;o<13;o++){let s=t.charAt(o+n).charCodeAt(0)-48;r+=(o&1)===0?3*s:s}r=10-r%10,r===10&&(r=0),t.append(r)}}return g.GTIN_SIZE=40,g})(),C0=(()=>{class g extends Nt{constructor(t){super(t)}parseInformation(){let t=new be;t.append("(01)");let n=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(g.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,g.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,g.HEADER_SIZE+44)}}return g.HEADER_SIZE=4,g})(),A0=(()=>{class g extends Ei{constructor(t){super(t)}parseInformation(){let t=new be;return this.getGeneralDecoder().decodeAllCodes(t,g.HEADER_SIZE)}}return g.HEADER_SIZE=5,g})();class wr extends Nt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let o=this.checkWeight(r),s=1e5;for(let l=0;l<5;++l)o/s===0&&e.append("0"),s/=10;e.append(o)}}let da=(()=>{class g extends wr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=g.HEADER_SIZE+wr.GTIN_SIZE+g.WEIGHT_SIZE)throw new D;let t=new be;return this.encodeCompressedGtin(t,g.HEADER_SIZE),this.encodeCompressedWeight(t,g.HEADER_SIZE+wr.GTIN_SIZE,g.WEIGHT_SIZE),t.toString()}}return g.HEADER_SIZE=5,g.WEIGHT_SIZE=15,g})();class y0 extends da{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class b0 extends da{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}let _0=(()=>{class g extends Nt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<g.HEADER_SIZE+Nt.GTIN_SIZE)throw new D;let t=new be;this.encodeCompressedGtin(t,g.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(g.HEADER_SIZE+Nt.GTIN_SIZE,g.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(g.HEADER_SIZE+Nt.GTIN_SIZE+g.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}return g.HEADER_SIZE=8,g.LAST_DIGIT_SIZE=2,g})(),I0=(()=>{class g extends Nt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<g.HEADER_SIZE+Nt.GTIN_SIZE)throw new D;let t=new be;this.encodeCompressedGtin(t,g.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(g.HEADER_SIZE+Nt.GTIN_SIZE,g.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(g.HEADER_SIZE+Nt.GTIN_SIZE+g.LAST_DIGIT_SIZE,g.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let o=this.getGeneralDecoder().decodeGeneralPurposeField(g.HEADER_SIZE+Nt.GTIN_SIZE+g.LAST_DIGIT_SIZE+g.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()}}return g.HEADER_SIZE=8,g.LAST_DIGIT_SIZE=2,g.FIRST_THREE_DIGITS_SIZE=10,g})(),Kt=(()=>{class g extends wr{constructor(t,n,r){super(t),this.dateCode=r,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=g.HEADER_SIZE+g.GTIN_SIZE+g.WEIGHT_SIZE+g.DATE_SIZE)throw new D;let t=new be;return this.encodeCompressedGtin(t,g.HEADER_SIZE),this.encodeCompressedWeight(t,g.HEADER_SIZE+g.GTIN_SIZE,g.WEIGHT_SIZE),this.encodeCompressedDate(t,g.HEADER_SIZE+g.GTIN_SIZE+g.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,g.DATE_SIZE);if(r==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let o=r%32;r/=32;let s=r%12+1;r/=12;let l=r;l/10==0&&t.append("0"),t.append(l),s/10==0&&t.append("0"),t.append(s),o/10==0&&t.append("0"),t.append(o)}addWeightCode(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")}checkWeight(t){return t%1e5}}return g.HEADER_SIZE=8,g.WEIGHT_SIZE=20,g.DATE_SIZE=16,g})();function ga(g){try{if(g.get(1))return new C0(g);if(!g.get(2))return new A0(g);switch(An.extractNumericValueFromBitArray(g,1,4)){case 4:return new y0(g);case 5:return new b0(g)}switch(An.extractNumericValueFromBitArray(g,1,5)){case 12:return new _0(g);case 13:return new I0(g)}switch(An.extractNumericValueFromBitArray(g,1,7)){case 56:return new Kt(g,"310","11");case 57:return new Kt(g,"320","11");case 58:return new Kt(g,"310","13");case 59:return new Kt(g,"320","13");case 60:return new Kt(g,"310","15");case 61:return new Kt(g,"320","15");case 62:return new Kt(g,"310","17");case 63:return new Kt(g,"320","17")}}catch(e){throw console.log(e),new Xt("unknown decoder: "+g)}}class Jt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Jt?Jt.equalsOrNull(e.leftchar,t.leftchar)&&Jt.equalsOrNull(e.rightchar,t.rightchar)&&Jt.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Jt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ci{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Ci?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,o)=>{t.forEach(s=>{r.getLeftChar().getValue()===s.getLeftChar().getValue()&&r.getRightChar().getValue()===s.getRightChar().getValue()&&r.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}}class L extends fn{constructor(e){super(...arguments),this.pairs=new Array(L.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return L.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,L.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(o){if(o instanceof D){if(!this.pairs.length)throw new D;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new D}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(r.getPairs()),!L.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let o=new Array(e);o.push(r);try{return this.checkRows(o,n+1)}catch(s){this.verbose&&console.log(s)}}throw new D}static isValidSequence(e){for(let t of L.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,o=!1;for(;n<this.rows.length;){let s=this.rows[n];if(s.getRowNumber()>e){o=s.isEquivalent(this.pairs);break}r=s.isEquivalent(this.pairs),n++}o||r||L.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Ci(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let o of e)if(Jt.equals(r,o))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let o of e){let s=!1;for(let l of n.getPairs())if(o.equals(l)){s=!0;break}if(!s){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=E0.buildBitArray(e),r=ga(t).parseInformation(),o=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new nt(r,null,null,l,J.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),o=2;for(let l=1;l<this.pairs.size();++l){let f=this.pairs.get(l);r+=f.getLeftChar().getChecksumPortion(),o++;let d=f.getRightChar();d!=null&&(r+=d.getChecksumPortion(),o++)}return r%=211,211*(o-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let o,s=!0,l=-1;do this.findNextPair(e,t,l),o=this.parseFoundFinderPattern(e,n,r),o==null?l=L.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let f=this.decodeDataCharacter(e,o,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new D;let d;try{d=this.decodeDataCharacter(e,o,r,!1)}catch(x){d=null,this.verbose&&console.log(x)}return new Jt(f,d,o,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),s;n>=0?s=n:this.isEmptyPair(t)?s=0:s=t[t.length-1].getFinderPattern().getStartEnd()[1];let l=t.length%2!=0;this.startFromEven&&(l=!l);let f=!1;for(;s<o&&(f=!e.get(s),!!f);)s++;let d=0,x=s;for(let m=s;m<o;m++)if(e.get(m)!=f)r[d]++;else{if(d==3){if(l&&L.reverseCounters(r),L.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=m;return}l&&L.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,d--}else d++;r[d]=1,f=!f}throw new D}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,o,s;if(n){let d=this.startEnd[0]-1;for(;d>=0&&!e.get(d);)d--;d++,r=this.startEnd[0]-d,o=d,s=this.startEnd[1]}else o=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let l=this.getDecodeFinderCounters();Q.arraycopy(l,0,l,1,l.length-1),l[0]=r;let f;try{f=this.parseFinderValue(l,L.FINDER_PATTERNS)}catch{return null}return new mr(f,[o,s],o,s,t)}decodeDataCharacter(e,t,n,r){let o=this.getDataCharacterCounters();for(let Te=0;Te<o.length;Te++)o[Te]=0;if(r)L.recordPatternInReverse(e,t.getStartEnd()[0],o);else{L.recordPattern(e,t.getStartEnd()[1],o);for(let Te=0,Ke=o.length-1;Te<Ke;Te++,Ke--){let mt=o[Te];o[Te]=o[Ke],o[Ke]=mt}}let s=17,l=xe.sum(new Int32Array(o))/s,f=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(l-f)/f>.3)throw new D;let d=this.getOddCounts(),x=this.getEvenCounts(),m=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let Te=0;Te<o.length;Te++){let Ke=1*o[Te]/l,mt=Ke+.5;if(mt<1){if(Ke<.3)throw new D;mt=1}else if(mt>8){if(Ke>8.7)throw new D;mt=8}let In=Te/2;(Te&1)==0?(d[In]=mt,m[In]=Ke-mt):(x[In]=mt,E[In]=Ke-mt)}this.adjustOddEvenCounts(s);let y=4*t.getValue()+(n?0:2)+(r?0:1)-1,b=0,I=0;for(let Te=d.length-1;Te>=0;Te--){if(L.isNotA1left(t,n,r)){let Ke=L.WEIGHTS[y][2*Te];I+=d[Te]*Ke}b+=d[Te]}let S=0;for(let Te=x.length-1;Te>=0;Te--)if(L.isNotA1left(t,n,r)){let Ke=L.WEIGHTS[y][2*Te+1];S+=x[Te]*Ke}let O=I+S;if((b&1)!=0||b>13||b<4)throw new D;let P=(13-b)/2,j=L.SYMBOL_WIDEST[P],R=9-j,ce=Ft.getRSSvalue(d,j,!0),re=Ft.getRSSvalue(x,R,!1),ut=L.EVEN_TOTAL_SUBSET[P],Dt=L.GSUM[P],ft=ce*ut+re+Dt;return new En(ft,O)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=xe.sum(new Int32Array(this.getOddCounts())),n=xe.sum(new Int32Array(this.getEvenCounts())),r=!1,o=!1;t>13?o=!0:t<4&&(r=!0);let s=!1,l=!1;n>13?l=!0:n<4&&(s=!0);let f=t+n-e,d=(t&1)==1,x=(n&1)==0;if(f==1)if(d){if(x)throw new D;o=!0}else{if(!x)throw new D;l=!0}else if(f==-1)if(d){if(x)throw new D;r=!0}else{if(!x)throw new D;s=!0}else if(f==0){if(d){if(!x)throw new D;t<n?(r=!0,l=!0):(o=!0,s=!0)}else if(x)throw new D}else throw new D;if(r){if(o)throw new D;L.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&L.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new D;L.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&L.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}L.SYMBOL_WIDEST=[7,5,4,3,1],L.EVEN_TOTAL_SUBSET=[4,20,52,104,204],L.GSUM=[0,348,1388,2948,3988],L.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],L.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],L.FINDER_PAT_A=0,L.FINDER_PAT_B=1,L.FINDER_PAT_C=2,L.FINDER_PAT_D=3,L.FINDER_PAT_E=4,L.FINDER_PAT_F=5,L.FINDER_PATTERN_SEQUENCES=[[L.FINDER_PAT_A,L.FINDER_PAT_A],[L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B],[L.FINDER_PAT_A,L.FINDER_PAT_C,L.FINDER_PAT_B,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_C],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F]],L.MAX_PAIRS=11;class S0 extends En{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Pe extends fn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){let r=this.decodePair(t,!1,e,n);Pe.addOrTally(this.possibleLeftPairs,r),t.reverse();let o=this.decodePair(t,!0,e,n);Pe.addOrTally(this.possibleRightPairs,o),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1){for(let l of this.possibleRightPairs)if(l.getCount()>1&&Pe.checkChecksum(s,l))return Pe.constructResult(s,l)}throw new D}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),o=new be;for(let d=13-r.length;d>0;d--)o.append("0");o.append(r);let s=0;for(let d=0;d<13;d++){let x=o.charAt(d).charCodeAt(0)-48;s+=(d&1)===0?3*x:x}s=10-s%10,s===10&&(s=0),o.append(s.toString());let l=e.getFinderPattern().getResultPoints(),f=t.getFinderPattern().getResultPoints();return new nt(o.toString(),null,0,[l[0],l[1],f[0],f[1]],J.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let o=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,o),l=r==null?null:r.get(de.NEED_RESULT_POINT_CALLBACK);if(l!=null){let x=(o[0]+o[1])/2;t&&(x=e.getSize()-1-x),l.foundPossibleResultPoint(new W(x,n))}let f=this.decodeDataCharacter(e,s,!0),d=this.decodeDataCharacter(e,s,!1);return new S0(1597*f.getValue()+d.getValue(),f.getChecksumPortion()+4*d.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let S=0;S<r.length;S++)r[S]=0;if(n)He.recordPatternInReverse(e,t.getStartEnd()[0],r);else{He.recordPattern(e,t.getStartEnd()[1]+1,r);for(let S=0,O=r.length-1;S<O;S++,O--){let P=r[S];r[S]=r[O],r[O]=P}}let o=n?16:15,s=xe.sum(new Int32Array(r))/o,l=this.getOddCounts(),f=this.getEvenCounts(),d=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let S=0;S<r.length;S++){let O=r[S]/s,P=Math.floor(O+.5);P<1?P=1:P>8&&(P=8);let j=Math.floor(S/2);(S&1)===0?(l[j]=P,d[j]=O-P):(f[j]=P,x[j]=O-P)}this.adjustOddEvenCounts(n,o);let m=0,E=0;for(let S=l.length-1;S>=0;S--)E*=9,E+=l[S],m+=l[S];let y=0,b=0;for(let S=f.length-1;S>=0;S--)y*=9,y+=f[S],b+=f[S];let I=E+3*y;if(n){if((m&1)!==0||m>12||m<4)throw new D;let S=(12-m)/2,O=Pe.OUTSIDE_ODD_WIDEST[S],P=9-O,j=Ft.getRSSvalue(l,O,!1),R=Ft.getRSSvalue(f,P,!0),ce=Pe.OUTSIDE_EVEN_TOTAL_SUBSET[S],re=Pe.OUTSIDE_GSUM[S];return new En(j*ce+R+re,I)}else{if((b&1)!==0||b>10||b<4)throw new D;let S=(10-b)/2,O=Pe.INSIDE_ODD_WIDEST[S],P=9-O,j=Ft.getRSSvalue(l,O,!0),R=Ft.getRSSvalue(f,P,!1),ce=Pe.INSIDE_ODD_TOTAL_SUBSET[S],re=Pe.INSIDE_GSUM[S];return new En(R*ce+j+re,I)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),o=!1,s=0;for(;s<r&&(o=!e.get(s),t!==o);)s++;let l=0,f=s;for(let d=s;d<r;d++)if(e.get(d)!==o)n[l]++;else{if(l===3){if(fn.isFinderPattern(n))return[f,d];f+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,o=!o}throw new D}parseFoundFinderPattern(e,t,n,r){let o=e.get(r[0]),s=r[0]-1;for(;s>=0&&o!==e.get(s);)s--;s++;let l=r[0]-s,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Q.arraycopy(f,0,d,1,f.length-1),d[0]=l;let x=this.parseFinderValue(d,Pe.FINDER_PATTERNS),m=s,E=r[1];return n&&(m=e.getSize()-1-m,E=e.getSize()-1-E),new mr(x,[s,r[1]],m,E,t)}adjustOddEvenCounts(e,t){let n=xe.sum(new Int32Array(this.getOddCounts())),r=xe.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,f=!1;e?(n>12?s=!0:n<4&&(o=!0),r>12?f=!0:r<4&&(l=!0)):(n>11?s=!0:n<5&&(o=!0),r>10?f=!0:r<4&&(l=!0));let d=n+r-t,x=(n&1)===(e?1:0),m=(r&1)===1;if(d===1)if(x){if(m)throw new D;s=!0}else{if(!m)throw new D;f=!0}else if(d===-1)if(x){if(m)throw new D;o=!0}else{if(!m)throw new D;l=!0}else if(d===0){if(x){if(!m)throw new D;n<r?(o=!0,f=!0):(s=!0,l=!0)}else if(m)throw new D}else throw new D;if(o){if(s)throw new D;fn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&fn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(f)throw new D;fn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&fn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Pe.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Pe.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Pe.OUTSIDE_GSUM=[0,161,961,2015,2715],Pe.INSIDE_GSUM=[0,336,1036,1516],Pe.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Pe.INSIDE_ODD_WIDEST=[2,4,6,8],Pe.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yn extends He{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;let n=e?e.get(de.POSSIBLE_FORMATS):null,r=e&&e.get(de.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(J.EAN_13)||n.includes(J.UPC_A)||n.includes(J.EAN_8)||n.includes(J.UPC_E))&&this.readers.push(new mi(e)),n.includes(J.CODE_39)&&this.readers.push(new xi(r)),n.includes(J.CODE_128)&&this.readers.push(new U),n.includes(J.ITF)&&this.readers.push(new Ie),n.includes(J.RSS_14)&&this.readers.push(new Pe),n.includes(J.RSS_EXPANDED)&&this.readers.push(new L(this.verbose))):(this.readers.push(new mi(e)),this.readers.push(new xi),this.readers.push(new mi(e)),this.readers.push(new U),this.readers.push(new Ie),this.readers.push(new Pe),this.readers.push(new L(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new D}reset(){this.readers.forEach(e=>e.reset())}}class T0 extends un{constructor(e=500,t){super(new yn(t),e,t)}}class Ae{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ce{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class he{constructor(e,t,n,r,o,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=o,this.ecBlocks=s;let l=0,f=s.getECCodewords(),d=s.getECBlocks();for(let x of d)l+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((e&1)!==0||(t&1)!==0)throw new k;for(let n of he.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new he(1,10,10,8,8,new Ae(5,new Ce(1,3))),new he(2,12,12,10,10,new Ae(7,new Ce(1,5))),new he(3,14,14,12,12,new Ae(10,new Ce(1,8))),new he(4,16,16,14,14,new Ae(12,new Ce(1,12))),new he(5,18,18,16,16,new Ae(14,new Ce(1,18))),new he(6,20,20,18,18,new Ae(18,new Ce(1,22))),new he(7,22,22,20,20,new Ae(20,new Ce(1,30))),new he(8,24,24,22,22,new Ae(24,new Ce(1,36))),new he(9,26,26,24,24,new Ae(28,new Ce(1,44))),new he(10,32,32,14,14,new Ae(36,new Ce(1,62))),new he(11,36,36,16,16,new Ae(42,new Ce(1,86))),new he(12,40,40,18,18,new Ae(48,new Ce(1,114))),new he(13,44,44,20,20,new Ae(56,new Ce(1,144))),new he(14,48,48,22,22,new Ae(68,new Ce(1,174))),new he(15,52,52,24,24,new Ae(42,new Ce(2,102))),new he(16,64,64,14,14,new Ae(56,new Ce(2,140))),new he(17,72,72,16,16,new Ae(36,new Ce(4,92))),new he(18,80,80,18,18,new Ae(48,new Ce(4,114))),new he(19,88,88,20,20,new Ae(56,new Ce(4,144))),new he(20,96,96,22,22,new Ae(68,new Ce(4,174))),new he(21,104,104,24,24,new Ae(56,new Ce(6,136))),new he(22,120,120,18,18,new Ae(68,new Ce(6,175))),new he(23,132,132,20,20,new Ae(62,new Ce(8,163))),new he(24,144,144,22,22,new Ae(62,new Ce(8,156),new Ce(2,155))),new he(25,8,18,6,16,new Ae(7,new Ce(1,5))),new he(26,8,32,6,14,new Ae(11,new Ce(1,10))),new he(27,12,26,10,24,new Ae(14,new Ce(1,16))),new he(28,12,36,10,16,new Ae(18,new Ce(1,22))),new he(29,16,36,14,16,new Ae(24,new Ce(1,32))),new he(30,16,48,14,22,new Ae(28,new Ce(1,49)))]}}he.VERSIONS=he.buildVersions();class Ai{constructor(e){let t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new k;this.version=Ai.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ve(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){let t=e.getHeight(),n=e.getWidth();return he.getVersionForDimensions(t,n)}readCodewords(){let e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,f=!1,d=!1,x=!1;do if(n===o&&r===0&&!l)e[t++]=this.readCorner1(o,s)&255,n-=2,r+=2,l=!0;else if(n===o-2&&r===0&&(s&3)!==0&&!f)e[t++]=this.readCorner2(o,s)&255,n-=2,r+=2,f=!0;else if(n===o+4&&r===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(o,s)&255,n-=2,r+=2,d=!0;else if(n===o-2&&r===0&&(s&7)===4&&!x)e[t++]=this.readCorner4(o,s)&255,n-=2,r+=2,x=!0;else{do n<o&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,o,s)&255),n-=2,r+=2;while(n>=0&&r<s);n+=1,r+=3;do n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,o,s)&255),n+=2,r-=2;while(n<o&&r>=0);n+=3,r+=1}while(n<o||r<s);if(t!==this.version.getTotalCodewords())throw new k;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let o=0;return this.readModule(e-2,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t,n,r)&&(o|=1),o<<=1,this.readModule(e,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e,t,n,r)&&(o|=1),o}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){let t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new w("Dimension of bitMatrix must match the version size");let r=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/r|0,l=n/o|0,f=s*r,d=l*o,x=new Ve(d,f);for(let m=0;m<s;++m){let E=m*r;for(let y=0;y<l;++y){let b=y*o;for(let I=0;I<r;++I){let S=m*(r+2)+1+I,O=E+I;for(let P=0;P<o;++P){let j=y*(o+2)+1+P;if(e.get(j,S)){let R=b+P;x.set(R,O)}}}}}return x}}class yi{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){let n=t.getECBlocks(),r=0,o=n.getECBlocks();for(let I of o)r+=I.getCount();let s=new Array(r),l=0;for(let I of o)for(let S=0;S<I.getCount();S++){let O=I.getDataCodewords(),P=n.getECCodewords()+O;s[l++]=new yi(O,new Uint8Array(P))}let d=s[0].codewords.length-n.getECCodewords(),x=d-1,m=0;for(let I=0;I<x;I++)for(let S=0;S<l;S++)s[S].codewords[I]=e[m++];let E=t.getVersionNumber()===24,y=E?8:l;for(let I=0;I<y;I++)s[I].codewords[d-1]=e[m++];let b=s[0].codewords.length;for(let I=d;I<b;I++)for(let S=0;S<l;S++){let O=E?(S+8)%l:S,P=E&&O>7?I-1:I;s[O].codewords[P]=e[m++]}if(m!==e.length)throw new w;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class bi{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new w(""+e);let t=0,n=this.bitOffset,r=this.byteOffset,o=this.bytes;if(n>0){let s=8-n,l=e<s?e:s,f=s-l,d=255>>8-l<<f;t=(o[r]&d)>>f,e-=l,n+=l,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|o[r]&255,r++,e-=8;if(e>0){let s=8-e,l=255>>s<<s;t=t<<e|(o[r]&l)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Xe=(function(g){return g[g.PAD_ENCODE=0]="PAD_ENCODE",g[g.ASCII_ENCODE=1]="ASCII_ENCODE",g[g.C40_ENCODE=2]="C40_ENCODE",g[g.TEXT_ENCODE=3]="TEXT_ENCODE",g[g.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",g[g.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",g[g.BASE256_ENCODE=6]="BASE256_ENCODE",g})(Xe||{});class $t{static decode(e){let t=new bi(e),n=new be,r=new be,o=new Array,s=Xe.ASCII_ENCODE;do if(s===Xe.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case Xe.C40_ENCODE:this.decodeC40Segment(t,n);break;case Xe.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Xe.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Xe.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Xe.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new k}s=Xe.ASCII_ENCODE}while(s!==Xe.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Vn(e,n.toString(),o.length===0?null:o,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let o=e.readBits(8);if(o===0)throw new k;if(o<=128)return r&&(o+=128),t.append(String.fromCharCode(o-1)),Xe.ASCII_ENCODE;if(o===129)return Xe.PAD_ENCODE;if(o<=229){let s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Xe.C40_ENCODE;case 231:return Xe.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Xe.ANSIX12_ENCODE;case 239:return Xe.TEXT_ENCODE;case 240:return Xe.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new k;break}}while(e.available()>0);return Xe.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1,r=[],o=0;do{if(e.available()===8)return;let s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let l=0;l<3;l++){let f=r[l];switch(o){case 0:if(f<3)o=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){let d=this.C40_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),o=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){let d=this.C40_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}o=0;break;case 3:n?(t.append(String.fromCharCode(f+224)),n=!1):t.append(String.fromCharCode(f+96)),o=0;break;default:throw new k}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],o=0;do{if(e.available()===8)return;let s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let l=0;l<3;l++){let f=r[l];switch(o){case 0:if(f<3)o=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){let d=this.TEXT_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),o=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){let d=this.TEXT_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}o=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){let d=this.TEXT_SHIFT3_SET_CHARS[f];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d),o=0}else throw new k;break;default:throw new k}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){let n=[];do{if(e.available()===8)return;let r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let o=0;o<3;o++){let s=n[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new k;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,o=Math.floor(r/1600);n[0]=o,r-=o*1600,o=Math.floor(r/40),n[1]=o,n[2]=r-o*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){let o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(r&32)===0&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),r++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new k;let l=new Uint8Array(s);for(let f=0;f<s;f++){if(e.available()<8)throw new k;l[f]=this.unrandomize255State(e.readBits(8),r++)}n.push(l);try{t.append(st.decode(l,ne.ISO88591))}catch(f){throw new Xt("Platform does not support required encoding: "+f.message)}}static unrandomize255State(e,t){let n=149*t%255+1,r=e-n;return r>=0?r:r+256}}$t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],$t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$t.TEXT_SHIFT2_SET_CHARS=$t.C40_SHIFT2_SET_CHARS,$t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class O0{constructor(){this.rsDecoder=new Xn(we.DATA_MATRIX_FIELD_256)}decode(e){let t=new Ai(e),n=t.getVersion(),r=t.readCodewords(),o=yi.getDataBlocks(r,n),s=0;for(let d of o)s+=d.getNumDataCodewords();let l=new Uint8Array(s),f=o.length;for(let d=0;d<f;d++){let x=o[d],m=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(m,E);for(let y=0;y<E;y++)l[y*f+d]=m[y]}return $t.decode(l)}correctErrors(e,t){let n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new B}for(let r=0;r<t;r++)e[r]=n[r]}}class Fe{constructor(e){this.image=e,this.rectangleDetector=new gr(this.image)}detect(){let e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new D;t=this.shiftToModuleCenter(t);let n=t[0],r=t[1],o=t[2],s=t[3],l=this.transitionsBetween(n,s)+1,f=this.transitionsBetween(o,s)+1;(l&1)===1&&(l+=1),(f&1)===1&&(f+=1),4*l<7*f&&4*f<7*l&&(l=f=Math.max(l,f));let d=Fe.sampleGrid(this.image,n,r,o,s,l,f);return new dr(d,[n,r,o,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new W(e.getX()+r,e.getY()+o)}static moveAway(e,t,n){let r=e.getX(),o=e.getY();return r<t?r-=1:r+=1,o<n?o-=1:o+=1,new W(r,o)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],o=e[2],s=this.transitionsBetween(t,n),l=this.transitionsBetween(n,r),f=this.transitionsBetween(r,o),d=this.transitionsBetween(o,t),x=s,m=[o,t,n,r];return x>l&&(x=l,m[0]=t,m[1]=n,m[2]=r,m[3]=o),x>f&&(x=f,m[0]=n,m[1]=r,m[2]=o,m[3]=t),x>d&&(m[0]=r,m[1]=o,m[2]=t,m[3]=n),m}detectSolid2(e){let t=e[0],n=e[1],r=e[2],o=e[3],s=this.transitionsBetween(t,o),l=Fe.shiftPoint(n,r,(s+1)*4),f=Fe.shiftPoint(r,n,(s+1)*4),d=this.transitionsBetween(l,t),x=this.transitionsBetween(f,o);return d<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=o):(e[0]=n,e[1]=r,e[2]=o,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],o=e[3],s=this.transitionsBetween(t,o),l=this.transitionsBetween(n,o),f=Fe.shiftPoint(t,n,(l+1)*4),d=Fe.shiftPoint(r,n,(s+1)*4);s=this.transitionsBetween(f,o),l=this.transitionsBetween(d,o);let x=new W(o.getX()+(r.getX()-n.getX())/(s+1),o.getY()+(r.getY()-n.getY())/(s+1)),m=new W(o.getX()+(t.getX()-n.getX())/(l+1),o.getY()+(t.getY()-n.getY())/(l+1));if(!this.isValid(x))return this.isValid(m)?m:null;if(!this.isValid(m))return x;let E=this.transitionsBetween(f,x)+this.transitionsBetween(d,x),y=this.transitionsBetween(f,m)+this.transitionsBetween(d,m);return E>y?x:m}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,l=this.transitionsBetween(r,o)+1,f=Fe.shiftPoint(t,n,l*4),d=Fe.shiftPoint(r,n,s*4);s=this.transitionsBetween(f,o)+1,l=this.transitionsBetween(d,o)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);let x=(t.getX()+n.getX()+r.getX()+o.getX())/4,m=(t.getY()+n.getY()+r.getY()+o.getY())/4;t=Fe.moveAway(t,x,m),n=Fe.moveAway(n,x,m),r=Fe.moveAway(r,x,m),o=Fe.moveAway(o,x,m);let E,y;return f=Fe.shiftPoint(t,n,l*4),f=Fe.shiftPoint(f,o,s*4),E=Fe.shiftPoint(n,t,l*4),E=Fe.shiftPoint(E,r,s*4),d=Fe.shiftPoint(r,o,l*4),d=Fe.shiftPoint(d,n,s*4),y=Fe.shiftPoint(o,r,l*4),y=Fe.shiftPoint(y,t,s*4),[f,E,d,y]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,o,s,l){return Qt.getInstance().sampleGrid(e,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,t.getX(),t.getY(),o.getX(),o.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.abs(s-r)>Math.abs(o-n);if(l){let I=n;n=r,r=I,I=o,o=s,s=I}let f=Math.abs(o-n),d=Math.abs(s-r),x=-f/2,m=r<s?1:-1,E=n<o?1:-1,y=0,b=this.image.get(l?r:n,l?n:r);for(let I=n,S=r;I!==o;I+=E){let O=this.image.get(l?S:I,l?I:S);if(O!==b&&(y++,b=O),x+=d,x>0){if(S===s)break;S+=m,x-=f}}return y}}let Er=(()=>{class g{constructor(){this.decoder=new O0}decode(t,n=null){let r,o;if(n!=null&&n.has(de.PURE_BARCODE)){let x=g.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(x),o=g.NO_POINTS}else{let x=new Fe(t.getBlackMatrix()).detect();r=this.decoder.decode(x.getBits()),o=x.getPoints()}let s=r.getRawBytes(),l=new nt(r.getText(),s,8*s.length,o,J.DATA_MATRIX,Q.currentTimeMillis()),f=r.getByteSegments();f!=null&&l.putMetadata(Ge.BYTE_SEGMENTS,f);let d=r.getECLevel();return d!=null&&l.putMetadata(Ge.ERROR_CORRECTION_LEVEL,d),l}reset(){}static extractPureBits(t){let n=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(n==null||r==null)throw new D;let o=this.moduleSize(n,t),s=n[1],l=r[1],f=n[0],x=(r[0]-f+1)/o,m=(l-s+1)/o;if(x<=0||m<=0)throw new D;let E=o/2;s+=E,f+=E;let y=new Ve(x,m);for(let b=0;b<m;b++){let I=s+b*o;for(let S=0;S<x;S++)t.get(f+S*o,I)&&y.set(S,b)}return y}static moduleSize(t,n){let r=n.getWidth(),o=t[0],s=t[1];for(;o<r&&n.get(o,s);)o++;if(o===r)throw new D;let l=o-t[0];if(l===0)throw new D;return l}}return g.NO_POINTS=[],g})();class v0 extends un{constructor(e=500){super(new Er,e)}}var Yn=(function(g){return g[g.L=0]="L",g[g.M=1]="M",g[g.Q=2]="Q",g[g.H=3]="H",g})(Yn||{});class Oe{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Oe.FOR_BITS.set(n,this),Oe.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Oe.L;case"M":return Oe.M;case"Q":return Oe.Q;case"H":return Oe.H;default:throw new M(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Oe))return!1;let t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Oe.FOR_BITS.size)throw new w;return Oe.FOR_BITS.get(e)}}Oe.FOR_BITS=new Map,Oe.FOR_VALUE=new Map,Oe.L=new Oe(Yn.L,"L",1),Oe.M=new Oe(Yn.M,"M",0),Oe.Q=new Oe(Yn.Q,"Q",3),Oe.H=new Oe(Yn.H,"H",2);class $e{constructor(e){this.errorCorrectionLevel=Oe.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return Y.bitCount(e^t)}static decodeFormatInformation(e,t){let n=$e.doDecodeFormatInformation(e,t);return n!==null?n:$e.doDecodeFormatInformation(e^$e.FORMAT_INFO_MASK_QR,t^$e.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(let o of $e.FORMAT_INFO_DECODE_LOOKUP){let s=o[0];if(s===e||s===t)return new $e(o[1]);let l=$e.numBitsDiffering(e,s);l<n&&(r=o[1],n=l),e!==t&&(l=$e.numBitsDiffering(t,s),l<n&&(r=o[1],n=l))}return n<=3?new $e(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof $e))return!1;let t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}$e.FORMAT_INFO_MASK_QR=21522,$e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class T{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0,t=this.ecBlocks;for(let n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class A{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Z{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0,o=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(let l of s)r+=l.getCount()*(l.getDataCodewords()+o);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new k;try{return this.getVersionForNumber((e-17)/4)}catch{throw new k}}static getVersionForNumber(e){if(e<1||e>40)throw new w;return Z.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<Z.VERSION_DECODE_INFO.length;r++){let o=Z.VERSION_DECODE_INFO[r];if(o===e)return Z.getVersionForNumber(r+7);let s=$e.numBitsDiffering(e,o);s<t&&(n=r+7,t=s)}return t<=3?Z.getVersionForNumber(n):null}buildFunctionPattern(){let e=this.getDimensionForVersion(),t=new Ve(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);let n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){let o=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)r===0&&(s===0||s===n-1)||r===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Z.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Z.VERSIONS=[new Z(1,new Int32Array(0),new T(7,new A(1,19)),new T(10,new A(1,16)),new T(13,new A(1,13)),new T(17,new A(1,9))),new Z(2,Int32Array.from([6,18]),new T(10,new A(1,34)),new T(16,new A(1,28)),new T(22,new A(1,22)),new T(28,new A(1,16))),new Z(3,Int32Array.from([6,22]),new T(15,new A(1,55)),new T(26,new A(1,44)),new T(18,new A(2,17)),new T(22,new A(2,13))),new Z(4,Int32Array.from([6,26]),new T(20,new A(1,80)),new T(18,new A(2,32)),new T(26,new A(2,24)),new T(16,new A(4,9))),new Z(5,Int32Array.from([6,30]),new T(26,new A(1,108)),new T(24,new A(2,43)),new T(18,new A(2,15),new A(2,16)),new T(22,new A(2,11),new A(2,12))),new Z(6,Int32Array.from([6,34]),new T(18,new A(2,68)),new T(16,new A(4,27)),new T(24,new A(4,19)),new T(28,new A(4,15))),new Z(7,Int32Array.from([6,22,38]),new T(20,new A(2,78)),new T(18,new A(4,31)),new T(18,new A(2,14),new A(4,15)),new T(26,new A(4,13),new A(1,14))),new Z(8,Int32Array.from([6,24,42]),new T(24,new A(2,97)),new T(22,new A(2,38),new A(2,39)),new T(22,new A(4,18),new A(2,19)),new T(26,new A(4,14),new A(2,15))),new Z(9,Int32Array.from([6,26,46]),new T(30,new A(2,116)),new T(22,new A(3,36),new A(2,37)),new T(20,new A(4,16),new A(4,17)),new T(24,new A(4,12),new A(4,13))),new Z(10,Int32Array.from([6,28,50]),new T(18,new A(2,68),new A(2,69)),new T(26,new A(4,43),new A(1,44)),new T(24,new A(6,19),new A(2,20)),new T(28,new A(6,15),new A(2,16))),new Z(11,Int32Array.from([6,30,54]),new T(20,new A(4,81)),new T(30,new A(1,50),new A(4,51)),new T(28,new A(4,22),new A(4,23)),new T(24,new A(3,12),new A(8,13))),new Z(12,Int32Array.from([6,32,58]),new T(24,new A(2,92),new A(2,93)),new T(22,new A(6,36),new A(2,37)),new T(26,new A(4,20),new A(6,21)),new T(28,new A(7,14),new A(4,15))),new Z(13,Int32Array.from([6,34,62]),new T(26,new A(4,107)),new T(22,new A(8,37),new A(1,38)),new T(24,new A(8,20),new A(4,21)),new T(22,new A(12,11),new A(4,12))),new Z(14,Int32Array.from([6,26,46,66]),new T(30,new A(3,115),new A(1,116)),new T(24,new A(4,40),new A(5,41)),new T(20,new A(11,16),new A(5,17)),new T(24,new A(11,12),new A(5,13))),new Z(15,Int32Array.from([6,26,48,70]),new T(22,new A(5,87),new A(1,88)),new T(24,new A(5,41),new A(5,42)),new T(30,new A(5,24),new A(7,25)),new T(24,new A(11,12),new A(7,13))),new Z(16,Int32Array.from([6,26,50,74]),new T(24,new A(5,98),new A(1,99)),new T(28,new A(7,45),new A(3,46)),new T(24,new A(15,19),new A(2,20)),new T(30,new A(3,15),new A(13,16))),new Z(17,Int32Array.from([6,30,54,78]),new T(28,new A(1,107),new A(5,108)),new T(28,new A(10,46),new A(1,47)),new T(28,new A(1,22),new A(15,23)),new T(28,new A(2,14),new A(17,15))),new Z(18,Int32Array.from([6,30,56,82]),new T(30,new A(5,120),new A(1,121)),new T(26,new A(9,43),new A(4,44)),new T(28,new A(17,22),new A(1,23)),new T(28,new A(2,14),new A(19,15))),new Z(19,Int32Array.from([6,30,58,86]),new T(28,new A(3,113),new A(4,114)),new T(26,new A(3,44),new A(11,45)),new T(26,new A(17,21),new A(4,22)),new T(26,new A(9,13),new A(16,14))),new Z(20,Int32Array.from([6,34,62,90]),new T(28,new A(3,107),new A(5,108)),new T(26,new A(3,41),new A(13,42)),new T(30,new A(15,24),new A(5,25)),new T(28,new A(15,15),new A(10,16))),new Z(21,Int32Array.from([6,28,50,72,94]),new T(28,new A(4,116),new A(4,117)),new T(26,new A(17,42)),new T(28,new A(17,22),new A(6,23)),new T(30,new A(19,16),new A(6,17))),new Z(22,Int32Array.from([6,26,50,74,98]),new T(28,new A(2,111),new A(7,112)),new T(28,new A(17,46)),new T(30,new A(7,24),new A(16,25)),new T(24,new A(34,13))),new Z(23,Int32Array.from([6,30,54,78,102]),new T(30,new A(4,121),new A(5,122)),new T(28,new A(4,47),new A(14,48)),new T(30,new A(11,24),new A(14,25)),new T(30,new A(16,15),new A(14,16))),new Z(24,Int32Array.from([6,28,54,80,106]),new T(30,new A(6,117),new A(4,118)),new T(28,new A(6,45),new A(14,46)),new T(30,new A(11,24),new A(16,25)),new T(30,new A(30,16),new A(2,17))),new Z(25,Int32Array.from([6,32,58,84,110]),new T(26,new A(8,106),new A(4,107)),new T(28,new A(8,47),new A(13,48)),new T(30,new A(7,24),new A(22,25)),new T(30,new A(22,15),new A(13,16))),new Z(26,Int32Array.from([6,30,58,86,114]),new T(28,new A(10,114),new A(2,115)),new T(28,new A(19,46),new A(4,47)),new T(28,new A(28,22),new A(6,23)),new T(30,new A(33,16),new A(4,17))),new Z(27,Int32Array.from([6,34,62,90,118]),new T(30,new A(8,122),new A(4,123)),new T(28,new A(22,45),new A(3,46)),new T(30,new A(8,23),new A(26,24)),new T(30,new A(12,15),new A(28,16))),new Z(28,Int32Array.from([6,26,50,74,98,122]),new T(30,new A(3,117),new A(10,118)),new T(28,new A(3,45),new A(23,46)),new T(30,new A(4,24),new A(31,25)),new T(30,new A(11,15),new A(31,16))),new Z(29,Int32Array.from([6,30,54,78,102,126]),new T(30,new A(7,116),new A(7,117)),new T(28,new A(21,45),new A(7,46)),new T(30,new A(1,23),new A(37,24)),new T(30,new A(19,15),new A(26,16))),new Z(30,Int32Array.from([6,26,52,78,104,130]),new T(30,new A(5,115),new A(10,116)),new T(28,new A(19,47),new A(10,48)),new T(30,new A(15,24),new A(25,25)),new T(30,new A(23,15),new A(25,16))),new Z(31,Int32Array.from([6,30,56,82,108,134]),new T(30,new A(13,115),new A(3,116)),new T(28,new A(2,46),new A(29,47)),new T(30,new A(42,24),new A(1,25)),new T(30,new A(23,15),new A(28,16))),new Z(32,Int32Array.from([6,34,60,86,112,138]),new T(30,new A(17,115)),new T(28,new A(10,46),new A(23,47)),new T(30,new A(10,24),new A(35,25)),new T(30,new A(19,15),new A(35,16))),new Z(33,Int32Array.from([6,30,58,86,114,142]),new T(30,new A(17,115),new A(1,116)),new T(28,new A(14,46),new A(21,47)),new T(30,new A(29,24),new A(19,25)),new T(30,new A(11,15),new A(46,16))),new Z(34,Int32Array.from([6,34,62,90,118,146]),new T(30,new A(13,115),new A(6,116)),new T(28,new A(14,46),new A(23,47)),new T(30,new A(44,24),new A(7,25)),new T(30,new A(59,16),new A(1,17))),new Z(35,Int32Array.from([6,30,54,78,102,126,150]),new T(30,new A(12,121),new A(7,122)),new T(28,new A(12,47),new A(26,48)),new T(30,new A(39,24),new A(14,25)),new T(30,new A(22,15),new A(41,16))),new Z(36,Int32Array.from([6,24,50,76,102,128,154]),new T(30,new A(6,121),new A(14,122)),new T(28,new A(6,47),new A(34,48)),new T(30,new A(46,24),new A(10,25)),new T(30,new A(2,15),new A(64,16))),new Z(37,Int32Array.from([6,28,54,80,106,132,158]),new T(30,new A(17,122),new A(4,123)),new T(28,new A(29,46),new A(14,47)),new T(30,new A(49,24),new A(10,25)),new T(30,new A(24,15),new A(46,16))),new Z(38,Int32Array.from([6,32,58,84,110,136,162]),new T(30,new A(4,122),new A(18,123)),new T(28,new A(13,46),new A(32,47)),new T(30,new A(48,24),new A(14,25)),new T(30,new A(42,15),new A(32,16))),new Z(39,Int32Array.from([6,26,54,82,110,138,166]),new T(30,new A(20,117),new A(4,118)),new T(28,new A(40,47),new A(7,48)),new T(30,new A(43,24),new A(22,25)),new T(30,new A(10,15),new A(67,16))),new Z(40,Int32Array.from([6,30,58,86,114,142,170]),new T(30,new A(19,118),new A(6,119)),new T(28,new A(18,47),new A(31,48)),new T(30,new A(34,24),new A(34,25)),new T(30,new A(20,15),new A(61,16)))];var Ze=(function(g){return g[g.DATA_MASK_000=0]="DATA_MASK_000",g[g.DATA_MASK_001=1]="DATA_MASK_001",g[g.DATA_MASK_010=2]="DATA_MASK_010",g[g.DATA_MASK_011=3]="DATA_MASK_011",g[g.DATA_MASK_100=4]="DATA_MASK_100",g[g.DATA_MASK_101=5]="DATA_MASK_101",g[g.DATA_MASK_110=6]="DATA_MASK_110",g[g.DATA_MASK_111=7]="DATA_MASK_111",g})(Ze||{});class Ct{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Ct.values=new Map([[Ze.DATA_MASK_000,new Ct(Ze.DATA_MASK_000,(g,e)=>(g+e&1)===0)],[Ze.DATA_MASK_001,new Ct(Ze.DATA_MASK_001,(g,e)=>(g&1)===0)],[Ze.DATA_MASK_010,new Ct(Ze.DATA_MASK_010,(g,e)=>e%3===0)],[Ze.DATA_MASK_011,new Ct(Ze.DATA_MASK_011,(g,e)=>(g+e)%3===0)],[Ze.DATA_MASK_100,new Ct(Ze.DATA_MASK_100,(g,e)=>(Math.floor(g/2)+Math.floor(e/3)&1)===0)],[Ze.DATA_MASK_101,new Ct(Ze.DATA_MASK_101,(g,e)=>g*e%6===0)],[Ze.DATA_MASK_110,new Ct(Ze.DATA_MASK_110,(g,e)=>g*e%6<3)],[Ze.DATA_MASK_111,new Ct(Ze.DATA_MASK_111,(g,e)=>(g+e+g*e%3&1)===0)]]);class M0{constructor(e){let t=e.getHeight();if(t<21||(t&3)!==1)throw new k;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let o=0;o<6;o++)e=this.copyBit(o,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let o=5;o>=0;o--)e=this.copyBit(8,o,e);let t=this.bitMatrix.getHeight(),n=0,r=t-7;for(let o=t-1;o>=r;o--)n=this.copyBit(8,o,n);for(let o=t-8;o<t;o++)n=this.copyBit(o,8,n);if(this.parsedFormatInfo=$e.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Z.getVersionForNumber(t);let n=0,r=e-11;for(let s=5;s>=0;s--)for(let l=e-9;l>=r;l--)n=this.copyBit(l,s,n);let o=Z.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(let s=5;s>=0;s--)for(let l=e-9;l>=r;l--)n=this.copyBit(s,l,n);if(o=Z.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new k}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){let e=this.readFormatInformation(),t=this.readVersion(),n=Ct.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);let o=t.buildFunctionPattern(),s=!0,l=new Uint8Array(t.getTotalCodewords()),f=0,d=0,x=0;for(let m=r-1;m>0;m-=2){m===6&&m--;for(let E=0;E<r;E++){let y=s?r-1-E:E;for(let b=0;b<2;b++)o.get(m-b,y)||(x++,d<<=1,this.bitMatrix.get(m-b,y)&&(d|=1),x===8&&(l[f++]=d,x=0,d=0))}s=!s}if(f!==t.getTotalCodewords())throw new k;return l}remask(){if(this.parsedFormatInfo===null)return;let e=Ct.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){let e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,o=e.getHeight();r<o;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class _i{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new w;let r=t.getECBlocksForLevel(n),o=0,s=r.getECBlocks();for(let b of s)o+=b.getCount();let l=new Array(o),f=0;for(let b of s)for(let I=0;I<b.getCount();I++){let S=b.getDataCodewords(),O=r.getECCodewordsPerBlock()+S;l[f++]=new _i(S,new Uint8Array(O))}let d=l[0].codewords.length,x=l.length-1;for(;x>=0&&l[x].codewords.length!==d;)x--;x++;let m=d-r.getECCodewordsPerBlock(),E=0;for(let b=0;b<m;b++)for(let I=0;I<f;I++)l[I].codewords[b]=e[E++];for(let b=x;b<f;b++)l[b].codewords[m]=e[E++];let y=l[0].codewords.length;for(let b=m;b<y;b++)for(let I=0;I<f;I++){let S=I<x?b:b+1;l[I].codewords[S]=e[E++]}return l}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Rt=(function(g){return g[g.TERMINATOR=0]="TERMINATOR",g[g.NUMERIC=1]="NUMERIC",g[g.ALPHANUMERIC=2]="ALPHANUMERIC",g[g.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",g[g.BYTE=4]="BYTE",g[g.ECI=5]="ECI",g[g.KANJI=6]="KANJI",g[g.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",g[g.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",g[g.HANZI=9]="HANZI",g})(Rt||{});class K{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,K.FOR_BITS.set(r,this),K.FOR_VALUE.set(e,this)}static forBits(e){let t=K.FOR_BITS.get(e);if(t===void 0)throw new w;return t}getCharacterCountBits(e){let t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof K))return!1;let t=e;return this.value===t.value}toString(){return this.stringValue}}K.FOR_BITS=new Map,K.FOR_VALUE=new Map,K.TERMINATOR=new K(Rt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),K.NUMERIC=new K(Rt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),K.ALPHANUMERIC=new K(Rt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),K.STRUCTURED_APPEND=new K(Rt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),K.BYTE=new K(Rt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),K.ECI=new K(Rt.ECI,"ECI",Int32Array.from([0,0,0]),7),K.KANJI=new K(Rt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),K.FNC1_FIRST_POSITION=new K(Rt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),K.FNC1_SECOND_POSITION=new K(Rt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),K.HANZI=new K(Rt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let xa=(()=>{class g{static decode(t,n,r,o){let s=new bi(t),l=new be,f=new Array,d=-1,x=-1;try{let m=null,E=!1,y;do{if(s.available()<4)y=K.TERMINATOR;else{let b=s.readBits(4);y=K.forBits(b)}switch(y){case K.TERMINATOR:break;case K.FNC1_FIRST_POSITION:case K.FNC1_SECOND_POSITION:E=!0;break;case K.STRUCTURED_APPEND:if(s.available()<16)throw new k;d=s.readBits(8),x=s.readBits(8);break;case K.ECI:let b=g.parseECIValue(s);if(m=F.getCharacterSetECIByValue(b),m===null)throw new k;break;case K.HANZI:let I=s.readBits(4),S=s.readBits(y.getCharacterCountBits(n));I===g.GB2312_SUBSET&&g.decodeHanziSegment(s,l,S);break;default:let O=s.readBits(y.getCharacterCountBits(n));switch(y){case K.NUMERIC:g.decodeNumericSegment(s,l,O);break;case K.ALPHANUMERIC:g.decodeAlphanumericSegment(s,l,O,E);break;case K.BYTE:g.decodeByteSegment(s,l,O,m,f,o);break;case K.KANJI:g.decodeKanjiSegment(s,l,O);break;default:throw new k}break}}while(y!==K.TERMINATOR)}catch{throw new k}return new Vn(t,l.toString(),f.length===0?null:f,r===null?null:r.toString(),d,x)}static decodeHanziSegment(t,n,r){if(r*13>t.available())throw new k;let o=new Uint8Array(2*r),s=0;for(;r>0;){let l=t.readBits(13),f=l/96<<8&4294967295|l%96;f<959?f+=41377:f+=42657,o[s]=f>>8&255,o[s+1]=f&255,s+=2,r--}try{n.append(st.decode(o,ne.GB2312))}catch(l){throw new k(l)}}static decodeKanjiSegment(t,n,r){if(r*13>t.available())throw new k;let o=new Uint8Array(2*r),s=0;for(;r>0;){let l=t.readBits(13),f=l/192<<8&4294967295|l%192;f<7936?f+=33088:f+=49472,o[s]=f>>8,o[s+1]=f,s+=2,r--}try{n.append(st.decode(o,ne.SHIFT_JIS))}catch(l){throw new k(l)}}static decodeByteSegment(t,n,r,o,s,l){if(8*r>t.available())throw new k;let f=new Uint8Array(r);for(let x=0;x<r;x++)f[x]=t.readBits(8);let d;o===null?d=ne.guessEncoding(f,l):d=o.getName();try{n.append(st.decode(f,d))}catch(x){throw new k(x)}s.push(f)}static toAlphaNumericChar(t){if(t>=g.ALPHANUMERIC_CHARS.length)throw new k;return g.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,n,r,o){let s=n.length();for(;r>1;){if(t.available()<11)throw new k;let l=t.readBits(11);n.append(g.toAlphaNumericChar(Math.floor(l/45))),n.append(g.toAlphaNumericChar(l%45)),r-=2}if(r===1){if(t.available()<6)throw new k;n.append(g.toAlphaNumericChar(t.readBits(6)))}if(o)for(let l=s;l<n.length();l++)n.charAt(l)==="%"&&(l<n.length()-1&&n.charAt(l+1)==="%"?n.deleteCharAt(l+1):n.setCharAt(l,""))}static decodeNumericSegment(t,n,r){for(;r>=3;){if(t.available()<10)throw new k;let o=t.readBits(10);if(o>=1e3)throw new k;n.append(g.toAlphaNumericChar(Math.floor(o/100))),n.append(g.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(g.toAlphaNumericChar(o%10)),r-=3}if(r===2){if(t.available()<7)throw new k;let o=t.readBits(7);if(o>=100)throw new k;n.append(g.toAlphaNumericChar(Math.floor(o/10))),n.append(g.toAlphaNumericChar(o%10))}else if(r===1){if(t.available()<4)throw new k;let o=t.readBits(4);if(o>=10)throw new k;n.append(g.toAlphaNumericChar(o))}}static parseECIValue(t){let n=t.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){let r=t.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){let r=t.readBits(16);return(n&31)<<16&4294967295|r}throw new k}}return g.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",g.GB2312_SUBSET=1,g})();class pa{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;let t=e[0];e[0]=e[2],e[2]=t}}class N0{constructor(){this.rsDecoder=new Xn(we.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Ve.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){let n=new M0(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){r=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();let o=this.decodeBitMatrixParser(n,t);return o.setOther(new pa(!0)),o}catch(o){throw r!==null?r:o}}decodeBitMatrixParser(e,t){let n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),o=e.readCodewords(),s=_i.getDataBlocks(o,n,r),l=0;for(let x of s)l+=x.getNumDataCodewords();let f=new Uint8Array(l),d=0;for(let x of s){let m=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(m,E);for(let y=0;y<E;y++)f[d++]=m[y]}return xa.decode(f,n,r,t)}correctErrors(e,t){let n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new B}for(let r=0;r<t;r++)e[r]=n[r]}}class Ii extends W{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){let r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){let r=(this.getX()+t)/2,o=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Ii(r,o,s)}}class Cr{constructor(e,t,n,r,o,s,l){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=o,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let e=this.startX,t=this.height,n=this.width,r=e+n,o=this.startY+t/2,s=new Int32Array(3),l=this.image;for(let f=0;f<t;f++){let d=o+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));s[0]=0,s[1]=0,s[2]=0;let x=e;for(;x<r&&!l.get(x,d);)x++;let m=0;for(;x<r;){if(l.get(x,d))if(m===1)s[1]++;else if(m===2){if(this.foundPatternCross(s)){let E=this.handlePossibleCenter(s,d,x);if(E!==null)return E}s[0]=s[2],s[1]=1,s[2]=0,m=1}else s[++m]++;else m===1&&m++,s[m]++;x++}if(this.foundPatternCross(s)){let E=this.handlePossibleCenter(s,d,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new D}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){let t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){let o=this.image,s=o.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;let f=e;for(;f>=0&&o.get(t,f)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&!o.get(t,f)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<s&&o.get(t,f)&&l[1]<=n;)l[1]++,f++;if(f===s||l[1]>n)return NaN;for(;f<s&&!o.get(t,f)&&l[2]<=n;)l[2]++,f++;if(l[2]>n)return NaN;let d=l[0]+l[1]+l[2];return 5*Math.abs(d-r)>=2*r?NaN:this.foundPatternCross(l)?Cr.centerFromEnd(l,f):NaN}handlePossibleCenter(e,t,n){let r=e[0]+e[1]+e[2],o=Cr.centerFromEnd(e,n),s=this.crossCheckVertical(t,o,2*e[1],r);if(!isNaN(s)){let l=(e[0]+e[1]+e[2])/3;for(let d of this.possibleCenters)if(d.aboutEquals(l,s,o))return d.combineEstimate(s,o,l);let f=new Ii(o,s,l);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null}}class Si extends W{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){let r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){let r=this.count+1,o=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,l=(this.count*this.estimatedModuleSize+n)/r;return new Si(o,s,l,r)}}class R0{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let D0=(()=>{class g{constructor(t,n){this.image=t,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){let n=t!=null&&t.get(de.TRY_HARDER)!==void 0,r=t!=null&&t.get(de.PURE_BARCODE)!==void 0,o=this.image,s=o.getHeight(),l=o.getWidth(),f=Math.floor(3*s/(4*g.MAX_MODULES));(f<g.MIN_SKIP||n)&&(f=g.MIN_SKIP);let d=!1,x=new Int32Array(5);for(let E=f-1;E<s&&!d;E+=f){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let y=0;for(let b=0;b<l;b++)if(o.get(b,E))(y&1)===1&&y++,x[y]++;else if((y&1)===0)if(y===4)if(g.foundPatternCross(x)){if(this.handlePossibleCenter(x,E,b,r)===!0)if(f=2,this.hasSkipped===!0)d=this.haveMultiplyConfirmedCenters();else{let S=this.findRowSkip();S>x[2]&&(E+=S-x[2]-f,b=l-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,y=3;continue}y=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,y=3;else x[++y]++;else x[y]++;g.foundPatternCross(x)&&this.handlePossibleCenter(x,E,l,r)===!0&&(f=x[0],this.hasSkipped&&(d=this.haveMultiplyConfirmedCenters()))}let m=this.selectBestPatterns();return W.orderBestPatterns(m),new R0(m)}static centerFromEnd(t,n){return n-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let n=0;for(let s=0;s<5;s++){let l=t[s];if(l===0)return!1;n+=l}if(n<7)return!1;let r=n/7,o=r/2;return Math.abs(r-t[0])<o&&Math.abs(r-t[1])<o&&Math.abs(3*r-t[2])<3*o&&Math.abs(r-t[3])<o&&Math.abs(r-t[4])<o}getCrossCheckStateCount(){let t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,n,r,o){let s=this.getCrossCheckStateCount(),l=0,f=this.image;for(;t>=l&&n>=l&&f.get(n-l,t-l);)s[2]++,l++;if(t<l||n<l)return!1;for(;t>=l&&n>=l&&!f.get(n-l,t-l)&&s[1]<=r;)s[1]++,l++;if(t<l||n<l||s[1]>r)return!1;for(;t>=l&&n>=l&&f.get(n-l,t-l)&&s[0]<=r;)s[0]++,l++;if(s[0]>r)return!1;let d=f.getHeight(),x=f.getWidth();for(l=1;t+l<d&&n+l<x&&f.get(n+l,t+l);)s[2]++,l++;if(t+l>=d||n+l>=x)return!1;for(;t+l<d&&n+l<x&&!f.get(n+l,t+l)&&s[3]<r;)s[3]++,l++;if(t+l>=d||n+l>=x||s[3]>=r)return!1;for(;t+l<d&&n+l<x&&f.get(n+l,t+l)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return!1;let m=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(m-o)<2*o&&g.foundPatternCross(s)}crossCheckVertical(t,n,r,o){let s=this.image,l=s.getHeight(),f=this.getCrossCheckStateCount(),d=t;for(;d>=0&&s.get(n,d);)f[2]++,d--;if(d<0)return NaN;for(;d>=0&&!s.get(n,d)&&f[1]<=r;)f[1]++,d--;if(d<0||f[1]>r)return NaN;for(;d>=0&&s.get(n,d)&&f[0]<=r;)f[0]++,d--;if(f[0]>r)return NaN;for(d=t+1;d<l&&s.get(n,d);)f[2]++,d++;if(d===l)return NaN;for(;d<l&&!s.get(n,d)&&f[3]<r;)f[3]++,d++;if(d===l||f[3]>=r)return NaN;for(;d<l&&s.get(n,d)&&f[4]<r;)f[4]++,d++;if(f[4]>=r)return NaN;let x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-o)>=2*o?NaN:g.foundPatternCross(f)?g.centerFromEnd(f,d):NaN}crossCheckHorizontal(t,n,r,o){let s=this.image,l=s.getWidth(),f=this.getCrossCheckStateCount(),d=t;for(;d>=0&&s.get(d,n);)f[2]++,d--;if(d<0)return NaN;for(;d>=0&&!s.get(d,n)&&f[1]<=r;)f[1]++,d--;if(d<0||f[1]>r)return NaN;for(;d>=0&&s.get(d,n)&&f[0]<=r;)f[0]++,d--;if(f[0]>r)return NaN;for(d=t+1;d<l&&s.get(d,n);)f[2]++,d++;if(d===l)return NaN;for(;d<l&&!s.get(d,n)&&f[3]<r;)f[3]++,d++;if(d===l||f[3]>=r)return NaN;for(;d<l&&s.get(d,n)&&f[4]<r;)f[4]++,d++;if(f[4]>=r)return NaN;let x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-o)>=o?NaN:g.foundPatternCross(f)?g.centerFromEnd(f,d):NaN}handlePossibleCenter(t,n,r,o){let s=t[0]+t[1]+t[2]+t[3]+t[4],l=g.centerFromEnd(t,r),f=this.crossCheckVertical(n,Math.floor(l),t[2],s);if(!isNaN(f)&&(l=this.crossCheckHorizontal(Math.floor(l),Math.floor(f),t[2],s),!isNaN(l)&&(!o||this.crossCheckDiagonal(Math.floor(f),Math.floor(l),t[2],s)))){let d=s/7,x=!1,m=this.possibleCenters;for(let E=0,y=m.length;E<y;E++){let b=m[E];if(b.aboutEquals(d,f,l)){m[E]=b.combineEstimate(f,l,d),x=!0;break}}if(!x){let E=new Si(l,f,d);m.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(let r of this.possibleCenters)if(r.getCount()>=g.CENTER_QUORUM)if(n==null)n=r;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-r.getX())-Math.abs(n.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,n=0,r=this.possibleCenters.length;for(let l of this.possibleCenters)l.getCount()>=g.CENTER_QUORUM&&(t++,n+=l.getEstimatedModuleSize());if(t<3)return!1;let o=n/r,s=0;for(let l of this.possibleCenters)s+=Math.abs(l.getEstimatedModuleSize()-o);return s<=.05*n}selectBestPatterns(){let t=this.possibleCenters.length;if(t<3)throw new D;let n=this.possibleCenters,r;if(t>3){let o=0,s=0;for(let d of this.possibleCenters){let x=d.getEstimatedModuleSize();o+=x,s+=x*x}r=o/t;let l=Math.sqrt(s/t-r*r);n.sort((d,x)=>{let m=Math.abs(x.getEstimatedModuleSize()-r),E=Math.abs(d.getEstimatedModuleSize()-r);return m<E?-1:m>E?1:0});let f=Math.max(.2*r,l);for(let d=0;d<n.length&&n.length>3;d++){let x=n[d];Math.abs(x.getEstimatedModuleSize()-r)>f&&(n.splice(d,1),d--)}}if(n.length>3){let o=0;for(let s of n)o+=s.getEstimatedModuleSize();r=o/n.length,n.sort((s,l)=>{if(l.getCount()===s.getCount()){let f=Math.abs(l.getEstimatedModuleSize()-r),d=Math.abs(s.getEstimatedModuleSize()-r);return f<d?1:f>d?-1:0}else return l.getCount()-s.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}return g.CENTER_QUORUM=2,g.MIN_SKIP=3,g.MAX_MODULES=57,g})();class Zn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(de.NEED_RESULT_POINT_CALLBACK);let n=new D0(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){let t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),o=this.calculateModuleSize(t,n,r);if(o<1)throw new D("No pattern found in proccess finder.");let s=Zn.computeDimension(t,n,r,o),l=Z.getProvisionalVersionForDimension(s),f=l.getDimensionForVersion()-7,d=null;if(l.getAlignmentPatternCenters().length>0){let y=n.getX()-t.getX()+r.getX(),b=n.getY()-t.getY()+r.getY(),I=1-3/f,S=Math.floor(t.getX()+I*(y-t.getX())),O=Math.floor(t.getY()+I*(b-t.getY()));for(let P=4;P<=16;P<<=1)try{d=this.findAlignmentInRegion(o,S,O,P);break}catch(j){if(!(j instanceof D))throw j}}let x=Zn.createTransform(t,n,r,d,s),m=Zn.sampleGrid(this.image,x,s),E;return d===null?E=[r,t,n]:E=[r,t,n,d],new dr(m,E)}static createTransform(e,t,n,r,o){let s=o-3.5,l,f,d,x;return r!==null?(l=r.getX(),f=r.getY(),d=s-3,x=d):(l=t.getX()-e.getX()+n.getX(),f=t.getY()-e.getY()+n.getY(),d=s,x=s),Ot.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,x,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),l,f,n.getX(),n.getY())}static sampleGrid(e,t,n){return Qt.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){let o=xe.round(W.distance(e,t)/r),s=xe.round(W.distance(e,n)/r),l=Math.floor((o+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new D("Dimensions could be not found.")}return l}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){let n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let o=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,l=e-(n-e);l<0?(s=e/(e-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);let f=Math.floor(t-(r-t)*s);return s=1,f<0?(s=t/(t-f),f=0):f>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),l=Math.floor(e+(l-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,l,f),o-1}sizeOfBlackWhiteBlackRun(e,t,n,r){let o=Math.abs(r-t)>Math.abs(n-e);if(o){let y=e;e=t,t=y,y=n,n=r,r=y}let s=Math.abs(n-e),l=Math.abs(r-t),f=-s/2,d=e<n?1:-1,x=t<r?1:-1,m=0,E=n+d;for(let y=e,b=t;y!==E;y+=d){let I=o?b:y,S=o?y:b;if(m===1===this.image.get(I,S)){if(m===2)return xe.distance(y,b,e,t);m++}if(f+=l,f>0){if(b===r)break;b+=x,f-=s}}return m===2?xe.distance(n+d,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){let o=Math.floor(r*e),s=Math.max(0,t-o),l=Math.min(this.image.getWidth()-1,t+o);if(l-s<e*3)throw new D("Alignment top exceeds estimated module size.");let f=Math.max(0,n-o),d=Math.min(this.image.getHeight()-1,n+o);if(d-f<e*3)throw new D("Alignment bottom exceeds estimated module size.");return new Cr(this.image,s,f,l-s,d-f,e,this.resultPointCallback).find()}}class en{constructor(){this.decoder=new N0}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(de.PURE_BARCODE)!==void 0){let f=en.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(f,t),r=en.NO_POINTS}else{let f=new Zn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(f.getBits(),t),r=f.getPoints()}n.getOther()instanceof pa&&n.getOther().applyMirroredCorrection(r);let o=new nt(n.getText(),n.getRawBytes(),void 0,r,J.QR_CODE,void 0),s=n.getByteSegments();s!==null&&o.putMetadata(Ge.BYTE_SEGMENTS,s);let l=n.getECLevel();return l!==null&&o.putMetadata(Ge.ERROR_CORRECTION_LEVEL,l),n.hasStructuredAppend()&&(o.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(Ge.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new D;let r=this.moduleSize(t,e),o=t[1],s=n[1],l=t[0],f=n[0];if(l>=f||o>=s)throw new D;if(s-o!==f-l&&(f=l+(s-o),f>=e.getWidth()))throw new D;let d=Math.round((f-l+1)/r),x=Math.round((s-o+1)/r);if(d<=0||x<=0)throw new D;if(x!==d)throw new D;let m=Math.floor(r/2);o+=m,l+=m;let E=l+Math.floor((d-1)*r)-f;if(E>0){if(E>m)throw new D;l-=E}let y=o+Math.floor((x-1)*r)-s;if(y>0){if(y>m)throw new D;o-=y}let b=new Ve(d,x);for(let I=0;I<x;I++){let S=o+Math.floor(I*r);for(let O=0;O<d;O++)e.get(l+Math.floor(O*r),S)&&b.set(O,I)}return b}static moduleSize(e,t){let n=t.getHeight(),r=t.getWidth(),o=e[0],s=e[1],l=!0,f=0;for(;o<r&&s<n;){if(l!==t.get(o,s)){if(++f===5)break;l=!l}o++,s++}if(o===r||s===n)throw new D;return(o-e[0])/7}}en.NO_POINTS=new Array;class ee{PDF417Common(){}static getBitCountSum(e){return xe.sum(e)}static toIntArray(e){if(e==null||!e.length)return ee.EMPTY_INT_ARRAY;let t=new Int32Array(e.length),n=0;for(let r of e)t[n++]=r;return t}static getCodeword(e){let t=te.binarySearch(ee.SYMBOL_TABLE,e&262143);return t<0?-1:(ee.CODEWORD_TABLE[t]-1)%ee.NUMBER_OF_CODEWORDS}}ee.NUMBER_OF_CODEWORDS=929,ee.MAX_CODEWORDS_IN_BARCODE=ee.NUMBER_OF_CODEWORDS-1,ee.MIN_ROWS_IN_BARCODE=3,ee.MAX_ROWS_IN_BARCODE=90,ee.MODULES_IN_CODEWORD=17,ee.MODULES_IN_STOP_PATTERN=18,ee.BARS_IN_MODULE=8,ee.EMPTY_INT_ARRAY=new Int32Array([]),ee.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ee.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class L0{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class oe{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),o=oe.detect(n,r);return o.length||(r=r.clone(),r.rotate180(),o=oe.detect(n,r)),new L0(r,o)}static detect(e,t){let n=new Array,r=0,o=0,s=!1;for(;r<t.getHeight();){let l=oe.findVertices(t,r,o);if(l[0]==null&&l[3]==null){if(!s)break;s=!1,o=0;for(let f of n)f[1]!=null&&(r=Math.trunc(Math.max(r,f[1].getY()))),f[3]!=null&&(r=Math.max(r,Math.trunc(f[3].getY())));r+=oe.ROW_STEP;continue}if(s=!0,n.push(l),!e)break;l[2]!=null?(o=Math.trunc(l[2].getX()),r=Math.trunc(l[2].getY())):(o=Math.trunc(l[4].getX()),r=Math.trunc(l[4].getY()))}return n}static findVertices(e,t,n){let r=e.getHeight(),o=e.getWidth(),s=new Array(8);return oe.copyToResult(s,oe.findRowsWithPattern(e,r,o,t,n,oe.START_PATTERN),oe.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),oe.copyToResult(s,oe.findRowsWithPattern(e,r,o,t,n,oe.STOP_PATTERN),oe.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,o,s){let l=new Array(4),f=!1,d=new Int32Array(s.length);for(;r<t;r+=oe.ROW_STEP){let m=oe.findGuardPattern(e,o,r,n,!1,s,d);if(m!=null){for(;r>0;){let E=oe.findGuardPattern(e,o,--r,n,!1,s,d);if(E!=null)m=E;else{r++;break}}l[0]=new W(m[0],r),l[1]=new W(m[1],r),f=!0;break}}let x=r+1;if(f){let m=0,E=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);for(;x<t;x++){let y=oe.findGuardPattern(e,E[0],x,n,!1,s,d);if(y!=null&&Math.abs(E[0]-y[0])<oe.MAX_PATTERN_DRIFT&&Math.abs(E[1]-y[1])<oe.MAX_PATTERN_DRIFT)E=y,m=0;else{if(m>oe.SKIPPED_ROW_COUNT_MAX)break;m++}}x-=m+1,l[2]=new W(E[0],x),l[3]=new W(E[1],x)}return x-r<oe.BARCODE_MIN_HEIGHT&&te.fill(l,null),l}static findGuardPattern(e,t,n,r,o,s,l){te.fillWithin(l,0,l.length,0);let f=t,d=0;for(;e.get(f,n)&&f>0&&d++<oe.MAX_PIXEL_DRIFT;)f--;let x=f,m=0,E=s.length;for(let y=o;x<r;x++)if(e.get(x,n)!==y)l[m]++;else{if(m===E-1){if(oe.patternMatchVariance(l,s,oe.MAX_INDIVIDUAL_VARIANCE)<oe.MAX_AVG_VARIANCE)return new Int32Array([f,x]);f+=l[0]+l[1],Q.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,y=!y}return m===E-1&&oe.patternMatchVariance(l,s,oe.MAX_INDIVIDUAL_VARIANCE)<oe.MAX_AVG_VARIANCE?new Int32Array([f,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,o=0,s=0;for(let d=0;d<r;d++)o+=e[d],s+=t[d];if(o<s)return 1/0;let l=o/s;n*=l;let f=0;for(let d=0;d<r;d++){let x=e[d],m=t[d]*l,E=x>m?x-m:m-x;if(E>n)return 1/0;f+=E}return f/o}}oe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),oe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),oe.MAX_AVG_VARIANCE=.42,oe.MAX_INDIVIDUAL_VARIANCE=.8,oe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),oe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),oe.MAX_PIXEL_DRIFT=3,oe.MAX_PATTERN_DRIFT=5,oe.SKIPPED_ROW_COUNT_MAX=25,oe.ROW_STEP=5,oe.BARCODE_MIN_HEIGHT=10;class qe{constructor(e,t){if(t.length===0)throw new w;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),Q.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let o of this.coefficients)r=this.field.add(r,o);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),o=n.length-t.length;Q.arraycopy(n,0,r,0,o);for(let s=o;s<n.length;s++)r[s]=this.field.add(t[s-o],n[s]);return new qe(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new w("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof qe?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new qe(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,o=r.length,s=new Int32Array(n+o-1);for(let l=0;l<n;l++){let f=t[l];for(let d=0;d<o;d++)s[l+d]=this.field.add(s[l+d],this.field.multiply(f,r[d]))}return new qe(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new qe(this.field,t)}multiplyScalar(e){if(e===0)return new qe(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new qe(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new w;if(t===0)return new qe(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new qe(this.field,r)}toString(){let e=new be;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class P0{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new w;return this.logTable[e]}inverse(e){if(e===0)throw new hi;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Ti extends P0{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new qe(this,new Int32Array([0])),this.one=new qe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new w;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new qe(this,n)}}Ti.PDF417_GF=new Ti(ee.NUMBER_OF_CODEWORDS,3);class ma{constructor(){this.field=Ti.PDF417_GF}decode(e,t,n){let r=new qe(this.field,e),o=new Int32Array(t),s=!1;for(let b=t;b>0;b--){let I=r.evaluateAt(this.field.exp(b));o[t-b]=I,I!==0&&(s=!0)}if(!s)return 0;let l=this.field.getOne();if(n!=null)for(let b of n){let I=this.field.exp(e.length-1-b),S=new qe(this.field,new Int32Array([this.field.subtract(0,I),1]));l=l.multiply(S)}let f=new qe(this.field,o),d=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),f,t),x=d[0],m=d[1],E=this.findErrorLocations(x),y=this.findErrorMagnitudes(m,x,E);for(let b=0;b<E.length;b++){let I=e.length-1-this.field.log(E[b]);if(I<0)throw B.getChecksumInstance();e[I]=this.field.subtract(e[I],y[b])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,o=t,s=this.field.getZero(),l=this.field.getOne();for(;o.getDegree()>=Math.round(n/2);){let E=r,y=s;if(r=o,s=l,r.isZero())throw B.getChecksumInstance();o=E;let b=this.field.getZero(),I=r.getCoefficient(r.getDegree()),S=this.field.inverse(I);for(;o.getDegree()>=r.getDegree()&&!o.isZero();){let O=o.getDegree()-r.getDegree(),P=this.field.multiply(o.getCoefficient(o.getDegree()),S);b=b.add(this.field.buildMonomial(O,P)),o=o.subtract(r.multiplyByMonomial(O,P))}l=b.multiply(s).subtract(y).negative()}let f=l.getCoefficient(0);if(f===0)throw B.getChecksumInstance();let d=this.field.inverse(f),x=l.multiply(d),m=o.multiply(d);return[x,m]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let o=1;o<this.field.getSize()&&r<t;o++)e.evaluateAt(o)===0&&(n[r]=this.field.inverse(o),r++);if(r!==t)throw B.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),o=new Int32Array(r);for(let d=1;d<=r;d++)o[r-d]=this.field.multiply(d,t.getCoefficient(d));let s=new qe(this.field,o),l=n.length,f=new Int32Array(l);for(let d=0;d<l;d++){let x=this.field.inverse(n[d]),m=this.field.subtract(0,e.evaluateAt(x)),E=this.field.inverse(s.evaluateAt(x));f[d]=this.field.multiply(m,E)}return f}}class gn{constructor(e,t,n,r,o){e instanceof gn?this.constructor_2(e):this.constructor_1(e,t,n,r,o)}constructor_1(e,t,n,r,o){let s=t==null||n==null,l=r==null||o==null;if(s&&l)throw new D;s?(t=new W(0,r.getY()),n=new W(0,o.getY())):l&&(r=new W(e.getWidth()-1,t.getY()),o=new W(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new gn(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,o=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(e>0){let f=n?this.topLeft:this.topRight,d=Math.trunc(f.getY()-e);d<0&&(d=0);let x=new W(f.getX(),d);n?r=x:s=x}if(t>0){let f=n?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);let x=new W(f.getX(),d);n?o=x:l=x}return new gn(this.image,r,o,s,l)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class B0{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qn{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(s,l,f,d,x,m){if(s==="%%")return"%";if(t[++n]===void 0)return;s=d?parseInt(d.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,y;switch(m){case"s":y=t[n];break;case"c":y=t[n][0];break;case"f":y=parseFloat(t[n]).toFixed(s);break;case"p":y=parseFloat(t[n]).toPrecision(s);break;case"e":y=parseFloat(t[n]).toExponential(s);break;case"x":y=parseInt(t[n]).toString(E||16);break;case"d":y=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(E);let b=parseInt(f),I=f&&f[0]+""=="0"?"0":" ";for(;y.length<b;)y=l!==void 0?y+I:I+y;return y}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,r)}format(e,...t){this.buffer+=qn.form(e,t)}toString(){return this.buffer}}let wa=(()=>{class g{constructor(t){this.boundingBox=new gn(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let n=this.getCodeword(t);if(n!=null)return n;for(let r=1;r<g.MAX_NEARBY_DISTANCE;r++){let o=this.imageRowToCodewordIndex(t)-r;if(o>=0&&(n=this.codewords[o],n!=null)||(o=this.imageRowToCodewordIndex(t)+r,o<this.codewords.length&&(n=this.codewords[o],n!=null)))return n}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,n){this.codewords[this.imageRowToCodewordIndex(t)]=n}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let t=new qn,n=0;for(let r of this.codewords){if(r==null){t.format("%3d:    |   %n",n++);continue}t.format("%3d: %3d|%3d%n",n++,r.getRowNumber(),r.getValue())}return t.toString()}}return g.MAX_NEARBY_DISTANCE=5,g})();class Qn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(let[n,r]of this.values.entries()){let o={getKey:()=>n,getValue:()=>r};o.getValue()>e?(e=o.getValue(),t=[],t.push(o.getKey())):o.getValue()===e&&t.push(o.getKey())}return ee.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Ea extends wa{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,x=0;for(let m=s;m<l;m++){if(t[m]==null)continue;let E=t[m],y=E.getRowNumber()-f;if(y===0)x++;else if(y===1)d=Math.max(d,x),x=1,f=E.getRowNumber();else if(y<0||E.getRowNumber()>=e.getRowCount()||y>m)t[m]=null;else{let b;d>2?b=(d-2)*y:b=y;let I=b>=m;for(let S=1;S<=b&&!I;S++)I=t[m-S]!=null;I?t[m]=null:(f=E.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),l=this.getCodewords(),f=-1;for(let d=o;d<s;d++){if(l[d]==null)continue;let x=l[d];x.setRowNumberAsRowIndicatorColumn();let m=x.getRowNumber()-f;m===0||(m===1?f=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?l[d]=null:f=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Qn,n=new Qn,r=new Qn,o=new Qn;for(let l of e){if(l==null)continue;l.setRowNumberAsRowIndicatorColumn();let f=l.getValue()%30,d=l.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:n.setValue(f*3+1);break;case 1:o.setValue(f/3),r.setValue(f%3);break;case 2:t.setValue(f+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||o.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ee.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ee.MAX_ROWS_IN_BARCODE)return null;let s=new B0(t.getValue()[0],n.getValue()[0],r.getValue()[0],o.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let o=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(o/3)!==t.getErrorCorrectionLevel()||o%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Kn{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ee.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let o=this.detectionResultColumns[r].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),o=0;for(let s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){let l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(o=Kn.adjustRowNumberIfValid(r,o,l),l.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),o=0;for(let s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){let l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(o=Kn.adjustRowNumberIfValid(r,o,l),l.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],o=this.detectionResultColumns[e-1].getCodewords(),s=o;this.detectionResultColumns[e+1]!=null&&(s=this.detectionResultColumns[e+1].getCodewords());let l=new Array(14);l[2]=o[t],l[3]=s[t],t>0&&(l[0]=n[t-1],l[4]=o[t-1],l[5]=s[t-1]),t>1&&(l[8]=n[t-2],l[10]=o[t-2],l[11]=s[t-2]),t<n.length-1&&(l[1]=n[t+1],l[6]=o[t+1],l[7]=s[t+1]),t<n.length-2&&(l[9]=n[t+2],l[12]=o[t+2],l[13]=s[t+2]);for(let f of l)if(Kn.adjustRowNumber(r,f))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new qn;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let o=this.detectionResultColumns[r].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()}}let k0=(()=>{class g{constructor(t,n,r,o){this.rowNumber=g.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==g.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}return g.BARCODE_ROW_UNKNOWN=-1,g})();class ct{static initialize(){for(let e=0;e<ee.SYMBOL_TABLE.length;e++){let t=ee.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<ee.BARS_IN_MODULE;r++){let o=0;for(;(t&1)===n;)o+=1,t>>=1;n=t&1,ct.RATIOS_TABLE[e]||(ct.RATIOS_TABLE[e]=new Array(ee.BARS_IN_MODULE)),ct.RATIOS_TABLE[e][ee.BARS_IN_MODULE-r-1]=Math.fround(o/ee.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=ct.getDecodedCodewordValue(ct.sampleBitCounts(e));return t!==-1?t:ct.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=xe.sum(e),n=new Int32Array(ee.BARS_IN_MODULE),r=0,o=0;for(let s=0;s<ee.MODULES_IN_CODEWORD;s++){let l=t/(2*ee.MODULES_IN_CODEWORD)+s*t/ee.MODULES_IN_CODEWORD;o+e[r]<=l&&(o+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=ct.getBitValue(e);return ee.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=xe.sum(e),n=new Array(ee.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=hr.MAX_VALUE,o=-1;this.bSymbolTableReady||ct.initialize();for(let s=0;s<ct.RATIOS_TABLE.length;s++){let l=0,f=ct.RATIOS_TABLE[s];for(let d=0;d<ee.BARS_IN_MODULE;d++){let x=Math.fround(f[d]-n[d]);if(l+=Math.fround(x*x),l>=r)break}l<r&&(r=l,o=ee.SYMBOL_TABLE[s])}return o}}ct.bSymbolTableReady=!1,ct.RATIOS_TABLE=new Array(ee.SYMBOL_TABLE.length).map(g=>g=new Array(ee.BARS_IN_MODULE));class Ca{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Aa{static parseLong(e,t=void 0){return parseInt(e,t)}}let F0=(()=>{class g extends _{}return g.kind="NullPointerException",g})();class U0{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new F0;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new ke;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class H0 extends _{}class j0 extends U0{constructor(e=32){if(super(),this.count=0,e<0)throw new w("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new H0;n=Y.MAX_VALUE}this.buf=te.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new ke;this.ensureCapacity(this.count+n),Q.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return te.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Se=(function(g){return g[g.ALPHA=0]="ALPHA",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.PUNCT=3]="PUNCT",g[g.ALPHA_SHIFT=4]="ALPHA_SHIFT",g[g.PUNCT_SHIFT=5]="PUNCT_SHIFT",g})(Se||{});function ya(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ar;function tn(g){if(typeof Ar>"u"&&(Ar=ya()),Ar===null)throw new Error("BigInt is not supported!");return Ar(g)}function V0(){let g=[];g[0]=tn(1);let e=tn(900);g[1]=e;for(let t=2;t<16;t++)g[t]=g[t-1]*e;return g}class v{static decode(e,t){let n=new be(""),r=F.ISO8859_1;n.enableDecoding(r);let o=1,s=e[o++],l=new Ca;for(;o<e[0];){switch(s){case v.TEXT_COMPACTION_MODE_LATCH:o=v.textCompaction(e,o,n);break;case v.BYTE_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:o=v.byteCompaction(s,e,r,o,n);break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case v.NUMERIC_COMPACTION_MODE_LATCH:o=v.numericCompaction(e,o,n);break;case v.ECI_CHARSET:let d=F.getCharacterSetECIByValue(e[o++]);break;case v.ECI_GENERAL_PURPOSE:o+=2;break;case v.ECI_USER_DEFINED:o++;break;case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=v.decodeMacroBlock(e,o,l);break;case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:throw new k;default:o--,o=v.textCompaction(e,o,n);break}if(o<e.length)s=e[o++];else throw k.getFormatInstance()}if(n.length()===0)throw k.getFormatInstance();let f=new Vn(null,n.toString(),null,t);return f.setOther(l),f}static decodeMacroBlock(e,t,n){if(t+v.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw k.getFormatInstance();let r=new Int32Array(v.NUMBER_OF_SEQUENCE_CODEWORDS);for(let l=0;l<v.NUMBER_OF_SEQUENCE_CODEWORDS;l++,t++)r[l]=e[t];n.setSegmentIndex(Y.parseInt(v.decodeBase900toBase10(r,v.NUMBER_OF_SEQUENCE_CODEWORDS)));let o=new be;t=v.textCompaction(e,t,o),n.setFileId(o.toString());let s=-1;for(e[t]===v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case v.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let l=new be;t=v.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case v.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let f=new be;t=v.textCompaction(e,t+1,f),n.setSender(f.toString());break;case v.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let d=new be;t=v.textCompaction(e,t+1,d),n.setAddressee(d.toString());break;case v.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new be;t=v.numericCompaction(e,t+1,x),n.setSegmentCount(Y.parseInt(x.toString()));break;case v.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let m=new be;t=v.numericCompaction(e,t+1,m),n.setTimestamp(Aa.parseLong(m.toString()));break;case v.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new be;t=v.numericCompaction(e,t+1,E),n.setChecksum(Y.parseInt(E.toString()));break;case v.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let y=new be;t=v.numericCompaction(e,t+1,y),n.setFileSize(Aa.parseLong(y.toString()));break;default:throw k.getFormatInstance()}break;case v.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(s!==-1){let l=t-s;n.isLastSegment()&&l--,n.setOptionalData(te.copyOfRange(e,s,s+l))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,l=!1;for(;t<e[0]&&!l;){let f=e[t++];if(f<v.TEXT_COMPACTION_MODE_LATCH)r[s]=f/30,r[s+1]=f%30,s+=2;else switch(f){case v.TEXT_COMPACTION_MODE_LATCH:r[s++]=v.TEXT_COMPACTION_MODE_LATCH;break;case v.BYTE_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.NUMERIC_COMPACTION_MODE_LATCH:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],o[s]=f,s++;break}}return v.decodeTextCompaction(r,o,s,n),t}static decodeTextCompaction(e,t,n,r){let o=Se.ALPHA,s=Se.ALPHA,l=0;for(;l<n;){let f=e[l],d="";switch(o){case Se.ALPHA:if(f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case v.LL:o=Se.LOWER;break;case v.ML:o=Se.MIXED;break;case v.PS:s=o,o=Se.PUNCT_SHIFT;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case v.TEXT_COMPACTION_MODE_LATCH:o=Se.ALPHA;break}break;case Se.LOWER:if(f<26)d=String.fromCharCode(97+f);else switch(f){case 26:d=" ";break;case v.AS:s=o,o=Se.ALPHA_SHIFT;break;case v.ML:o=Se.MIXED;break;case v.PS:s=o,o=Se.PUNCT_SHIFT;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case v.TEXT_COMPACTION_MODE_LATCH:o=Se.ALPHA;break}break;case Se.MIXED:if(f<v.PL)d=v.MIXED_CHARS[f];else switch(f){case v.PL:o=Se.PUNCT;break;case 26:d=" ";break;case v.LL:o=Se.LOWER;break;case v.AL:o=Se.ALPHA;break;case v.PS:s=o,o=Se.PUNCT_SHIFT;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case v.TEXT_COMPACTION_MODE_LATCH:o=Se.ALPHA;break}break;case Se.PUNCT:if(f<v.PAL)d=v.PUNCT_CHARS[f];else switch(f){case v.PAL:o=Se.ALPHA;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case v.TEXT_COMPACTION_MODE_LATCH:o=Se.ALPHA;break}break;case Se.ALPHA_SHIFT:if(o=s,f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case v.TEXT_COMPACTION_MODE_LATCH:o=Se.ALPHA;break}break;case Se.PUNCT_SHIFT:if(o=s,f<v.PAL)d=v.PUNCT_CHARS[f];else switch(f){case v.PAL:o=Se.ALPHA;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case v.TEXT_COMPACTION_MODE_LATCH:o=Se.ALPHA;break}break}d!==""&&r.append(d),l++}}static byteCompaction(e,t,n,r,o){let s=new j0,l=0,f=0,d=!1;switch(e){case v.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),m=t[r++];for(;r<t[0]&&!d;)switch(x[l++]=m,f=900*f+m,m=t[r++],m){case v.TEXT_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH:case v.NUMERIC_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:r--,d=!0;break;default:if(l%5===0&&l>0){for(let E=0;E<6;++E)s.write(Number(tn(f)>>tn(8*(5-E))));f=0,l=0}break}r===t[0]&&m<v.TEXT_COMPACTION_MODE_LATCH&&(x[l++]=m);for(let E=0;E<l;E++)s.write(x[E]);break;case v.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!d;){let E=t[r++];if(E<v.TEXT_COMPACTION_MODE_LATCH)l++,f=900*f+E;else switch(E){case v.TEXT_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH:case v.NUMERIC_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:r--,d=!0;break}if(l%5===0&&l>0){for(let y=0;y<6;++y)s.write(Number(tn(f)>>tn(8*(5-y))));f=0,l=0}}break}return o.append(st.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,o=!1,s=new Int32Array(v.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!o;){let l=e[t++];if(t===e[0]&&(o=!0),l<v.TEXT_COMPACTION_MODE_LATCH)s[r]=l,r++;else switch(l){case v.TEXT_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(r%v.MAX_NUMERIC_CODEWORDS===0||l===v.NUMERIC_COMPACTION_MODE_LATCH||o)&&r>0&&(n.append(v.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=tn(0);for(let o=0;o<t;o++)n+=v.EXP900[t-o-1]*tn(e[o]);let r=n.toString();if(r.charAt(0)!=="1")throw new k;return r.substring(1)}}v.TEXT_COMPACTION_MODE_LATCH=900,v.BYTE_COMPACTION_MODE_LATCH=901,v.NUMERIC_COMPACTION_MODE_LATCH=902,v.BYTE_COMPACTION_MODE_LATCH_6=924,v.ECI_USER_DEFINED=925,v.ECI_GENERAL_PURPOSE=926,v.ECI_CHARSET=927,v.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,v.MACRO_PDF417_TERMINATOR=922,v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,v.MAX_NUMERIC_CODEWORDS=15,v.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,v.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,v.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,v.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,v.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,v.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,v.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,v.PL=25,v.LL=27,v.AS=27,v.ML=28,v.AL=28,v.PS=29,v.PAL=29,v.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,v.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",v.EXP900=ya()?V0():[],v.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ae{constructor(){}static decode(e,t,n,r,o,s,l){let f=new gn(e,t,n,r,o),d=null,x=null,m;for(let b=!0;;b=!1){if(t!=null&&(d=ae.getRowIndicatorColumn(e,f,t,!0,s,l)),r!=null&&(x=ae.getRowIndicatorColumn(e,f,r,!1,s,l)),m=ae.merge(d,x),m==null)throw D.getNotFoundInstance();let I=m.getBoundingBox();if(b&&I!=null&&(I.getMinY()<f.getMinY()||I.getMaxY()>f.getMaxY()))f=I;else break}m.setBoundingBox(f);let E=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,d),m.setDetectionResultColumn(E,x);let y=d!=null;for(let b=1;b<=E;b++){let I=y?b:E-b;if(m.getDetectionResultColumn(I)!==void 0)continue;let S;I===0||I===E?S=new Ea(f,I===0):S=new wa(f),m.setDetectionResultColumn(I,S);let O=-1,P=O;for(let j=f.getMinY();j<=f.getMaxY();j++){if(O=ae.getStartColumn(m,I,j,y),O<0||O>f.getMaxX()){if(P===-1)continue;O=P}let R=ae.detectCodeword(e,f.getMinX(),f.getMaxX(),y,O,j,s,l);R!=null&&(S.setCodeword(j,R),P=O,s=Math.min(s,R.getWidth()),l=Math.max(l,R.getWidth()))}}return ae.createDecoderResult(m)}static merge(e,t){if(e==null&&t==null)return null;let n=ae.getBarcodeMetadata(e,t);if(n==null)return null;let r=gn.merge(ae.adjustBoundingBox(e),ae.adjustBoundingBox(t));return new Kn(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=ae.getMax(t),r=0;for(let l of t)if(r+=n-l,l>0)break;let o=e.getCodewords();for(let l=0;r>0&&o[l]==null;l++)r--;let s=0;for(let l=t.length-1;l>=0&&(s+=n-t[l],!(t[l]>0));l--);for(let l=o.length-1;s>0&&o[l]==null;l--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,o,s){let l=new Ea(t,r);for(let f=0;f<2;f++){let d=f===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let m=Math.trunc(Math.trunc(n.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=d){let E=ae.detectCodeword(e,0,e.getWidth(),r,x,m,o,s);E!=null&&(l.setCodeword(m,E),r?x=E.getStartX():x=E.getEndX())}}return l}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ae.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(o<1||o>ee.MAX_CODEWORDS_IN_BARCODE)throw D.getNotFoundInstance();n.setValue(o)}else r[0]!==o&&n.setValue(o)}static createDecoderResult(e){let t=ae.createBarcodeMatrix(e);ae.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array;for(let f=0;f<e.getBarcodeRowCount();f++)for(let d=0;d<e.getBarcodeColumnCount();d++){let x=t[f][d+1].getValue(),m=f*e.getBarcodeColumnCount()+d;x.length===0?n.push(m):x.length===1?r[m]=x[0]:(s.push(m),o.push(x))}let l=new Array(o.length);for(let f=0;f<l.length;f++)l[f]=o[f];return ae.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,ee.toIntArray(n),ee.toIntArray(s),l)}static createDecoderResultFromAmbiguousValues(e,t,n,r,o){let s=new Int32Array(r.length),l=100;for(;l-- >0;){for(let f=0;f<s.length;f++)t[r[f]]=o[f][s[f]];try{return ae.decodeCodewords(t,e,n)}catch(f){if(!(f instanceof B))throw f}if(s.length===0)throw B.getChecksumInstance();for(let f=0;f<s.length;f++)if(s[f]<o[f].length-1){s[f]++;break}else if(s[f]=0,f===s.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)t[r][o]=new Qn;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let o of r.getCodewords())if(o!=null){let s=o.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][n].setValue(o.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let o=r?1:-1,s=null;if(ae.isValidBarcodeColumn(e,t-o)&&(s=e.getDetectionResultColumn(t-o).getCodeword(n)),s!=null)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),s!=null)return r?s.getStartX():s.getEndX();if(ae.isValidBarcodeColumn(e,t-o)&&(s=e.getDetectionResultColumn(t-o).getCodewordNearby(n)),s!=null)return r?s.getEndX():s.getStartX();let l=0;for(;ae.isValidBarcodeColumn(e,t-o);){t-=o;for(let f of e.getDetectionResultColumn(t).getCodewords())if(f!=null)return(r?f.getEndX():f.getStartX())+o*l*(f.getEndX()-f.getStartX());l++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,o,s,l,f){o=ae.adjustCodewordStartColumn(e,t,n,r,o,s);let d=ae.getModuleBitCount(e,t,n,r,o,s);if(d==null)return null;let x,m=xe.sum(d);if(r)x=o+m;else{for(let b=0;b<d.length/2;b++){let I=d[b];d[b]=d[d.length-1-b],d[d.length-1-b]=I}x=o,o=x-m}if(!ae.checkCodewordSkew(m,l,f))return null;let E=ct.getDecodedValue(d),y=ee.getCodeword(E);return y===-1?null:new k0(o,x,ae.getCodewordBucketNumber(E),y)}static getModuleBitCount(e,t,n,r,o,s){let l=o,f=new Int32Array(8),d=0,x=r?1:-1,m=r;for(;(r?l<n:l>=t)&&d<f.length;)e.get(l,s)===m?(f[d]++,l+=x):(d++,m=!m);return d===f.length||l===(r?n:t)&&d===f.length-1?f:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,o,s){let l=o,f=r?-1:1;for(let d=0;d<2;d++){for(;(r?l>=t:l<n)&&r===e.get(l,s);){if(Math.abs(o-l)>ae.CODEWORD_SKEW_SIZE)return o;l+=f}f=-f,r=!r}return l}static checkCodewordSkew(e,t,n){return t-ae.CODEWORD_SKEW_SIZE<=e&&e<=n+ae.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw k.getFormatInstance();let r=1<<t+1,o=ae.correctErrors(e,n,r);ae.verifyCodewordCount(e,r);let s=v.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(n.length),s}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+ae.MAX_ERRORS||n<0||n>ae.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return ae.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw k.getFormatInstance();let n=e[0];if(n>e.length)throw k.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw k.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ae.getCodewordBucketNumber(ae.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new qn;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let o=e[n][r];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()}}ae.CODEWORD_SKEW_SIZE=2,ae.MAX_ERRORS=3,ae.MAX_EC_CODEWORDS=512,ae.errorCorrection=new ma;class Qe{decode(e,t=null){let n=Qe.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw D.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return Qe.decode(e,t,!0)}catch(n){throw n instanceof k||n instanceof B?D.getNotFoundInstance():n}}static decode(e,t,n){let r=new Array,o=oe.detectMultiple(e,t,n);for(let s of o.getPoints()){let l=ae.decode(o.getBits(),s[4],s[5],s[6],s[7],Qe.getMinCodewordWidth(s),Qe.getMaxCodewordWidth(s)),f=new nt(l.getText(),l.getRawBytes(),void 0,s,J.PDF_417);f.putMetadata(Ge.ERROR_CORRECTION_LEVEL,l.getECLevel());let d=l.getOther();d!=null&&f.putMetadata(Ge.PDF417_EXTRA_METADATA,d),r.push(f)}return r.map(s=>s)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?Y.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Qe.getMaxWidth(e[0],e[4]),Qe.getMaxWidth(e[6],e[2])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN),Math.max(Qe.getMaxWidth(e[1],e[5]),Qe.getMaxWidth(e[7],e[3])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Qe.getMinWidth(e[0],e[4]),Qe.getMinWidth(e[6],e[2])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN),Math.min(Qe.getMinWidth(e[1],e[5]),Qe.getMinWidth(e[7],e[3])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN)))}reset(){}}let Oi=(()=>{class g extends _{}return g.kind="ReaderException",g})();class ba{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;let t=!i(e)&&e.get(de.TRY_HARDER)===!0,n=i(e)?null:e.get(de.POSSIBLE_FORMATS),r=new Array;if(!i(n)){let o=n.some(s=>s===J.UPC_A||s===J.UPC_E||s===J.EAN_13||s===J.EAN_8||s===J.CODABAR||s===J.CODE_39||s===J.CODE_93||s===J.CODE_128||s===J.ITF||s===J.RSS_14||s===J.RSS_EXPANDED);o&&!t&&r.push(new yn(e,this.verbose)),n.includes(J.QR_CODE)&&r.push(new en),n.includes(J.DATA_MATRIX)&&r.push(new Er),n.includes(J.AZTEC)&&r.push(new xr),n.includes(J.PDF_417)&&r.push(new Qe),o&&t&&r.push(new yn(e,this.verbose))}r.length===0&&(t||r.push(new yn(e,this.verbose)),r.push(new en),r.push(new Er),r.push(new xr),r.push(new Qe),t&&r.push(new yn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(let e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Oi("No readers where selected, nothing can be read.");for(let t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Oi)continue}throw new D("No MultiFormat Readers were able to detect the code.")}}class z0 extends un{constructor(e=null,t=500){let n=new ba;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class G0 extends un{constructor(e=500){super(new Qe,e)}}class X0 extends un{constructor(e=500){super(new en,e)}}var _a=(function(g){return g[g.ERROR_CORRECTION=0]="ERROR_CORRECTION",g[g.CHARACTER_SET=1]="CHARACTER_SET",g[g.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",g[g.MIN_SIZE=3]="MIN_SIZE",g[g.MAX_SIZE=4]="MAX_SIZE",g[g.MARGIN=5]="MARGIN",g[g.PDF417_COMPACT=6]="PDF417_COMPACT",g[g.PDF417_COMPACTION=7]="PDF417_COMPACTION",g[g.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",g[g.AZTEC_LAYERS=9]="AZTEC_LAYERS",g[g.QR_VERSION=10]="QR_VERSION",g})(_a||{}),je=_a;class vi{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new lt(e,Int32Array.from([1])))}buildGenerator(e){let t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1],r=this.field;for(let o=t.length;o<=e;o++){let s=n.multiply(new lt(r,Int32Array.from([1,r.exp(o-1+r.getGeneratorBase())])));t.push(s),n=s}}return t[e]}encode(e,t){if(t===0)throw new w("No error correction bytes");let n=e.length-t;if(n<=0)throw new w("No data bytes provided");let r=this.buildGenerator(t),o=new Int32Array(n);Q.arraycopy(e,0,o,0,n);let s=new lt(this.field,o);s=s.multiplyByMonomial(t,1);let f=s.divide(r)[1].getCoefficients(),d=t-f.length;for(let x=0;x<d;x++)e[n+x]=0;Q.arraycopy(f,0,e,n+d,f.length)}}let bn=(()=>{class g{constructor(){}static applyMaskPenaltyRule1(t){return g.applyMaskPenaltyRule1Internal(t,!0)+g.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let n=0,r=t.getArray(),o=t.getWidth(),s=t.getHeight();for(let l=0;l<s-1;l++){let f=r[l];for(let d=0;d<o-1;d++){let x=f[d];x===f[d+1]&&x===r[l+1][d]&&x===r[l+1][d+1]&&n++}}return g.N2*n}static applyMaskPenaltyRule3(t){let n=0,r=t.getArray(),o=t.getWidth(),s=t.getHeight();for(let l=0;l<s;l++)for(let f=0;f<o;f++){let d=r[l];f+6<o&&d[f]===1&&d[f+1]===0&&d[f+2]===1&&d[f+3]===1&&d[f+4]===1&&d[f+5]===0&&d[f+6]===1&&(g.isWhiteHorizontal(d,f-4,f)||g.isWhiteHorizontal(d,f+7,f+11))&&n++,l+6<s&&r[l][f]===1&&r[l+1][f]===0&&r[l+2][f]===1&&r[l+3][f]===1&&r[l+4][f]===1&&r[l+5][f]===0&&r[l+6][f]===1&&(g.isWhiteVertical(r,f,l-4,l)||g.isWhiteVertical(r,f,l+7,l+11))&&n++}return n*g.N3}static isWhiteHorizontal(t,n,r){n=Math.max(n,0),r=Math.min(r,t.length);for(let o=n;o<r;o++)if(t[o]===1)return!1;return!0}static isWhiteVertical(t,n,r,o){r=Math.max(r,0),o=Math.min(o,t.length);for(let s=r;s<o;s++)if(t[s][n]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let n=0,r=t.getArray(),o=t.getWidth(),s=t.getHeight();for(let d=0;d<s;d++){let x=r[d];for(let m=0;m<o;m++)x[m]===1&&n++}let l=t.getHeight()*t.getWidth();return Math.floor(Math.abs(n*2-l)*10/l)*g.N4}static getDataMaskBit(t,n,r){let o,s;switch(t){case 0:o=r+n&1;break;case 1:o=r&1;break;case 2:o=n%3;break;case 3:o=(r+n)%3;break;case 4:o=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:s=r*n,o=(s&1)+s%3;break;case 6:s=r*n,o=(s&1)+s%3&1;break;case 7:s=r*n,o=s%3+(r+n&1)&1;break;default:throw new w("Invalid mask pattern: "+t)}return o===0}static applyMaskPenaltyRule1Internal(t,n){let r=0,o=n?t.getHeight():t.getWidth(),s=n?t.getWidth():t.getHeight(),l=t.getArray();for(let f=0;f<o;f++){let d=0,x=-1;for(let m=0;m<s;m++){let E=n?l[f][m]:l[m][f];E===x?d++:(d>=5&&(r+=g.N1+(d-5)),d=1,x=E)}d>=5&&(r+=g.N1+(d-5))}return r}}return g.N1=3,g.N2=3,g.N3=40,g.N4=10,g})();class yr{constructor(e,t){this.width=e,this.height=t;let n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(let t of this.bytes)te.fill(t,e)}equals(e){if(!(e instanceof yr))return!1;let t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){let o=this.bytes[n],s=t.bytes[n];for(let l=0,f=this.width;l<f;++l)if(o[l]!==s[l])return!1}return!0}toString(){let e=new be;for(let t=0,n=this.height;t<n;++t){let r=this.bytes[t];for(let o=0,s=this.width;o<s;++o)switch(r[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}let br=(()=>{class g{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let t=new be;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<g.NUM_MASK_PATTERNS}}return g.NUM_MASK_PATTERNS=8,g})(),ve=(()=>{class g extends _{}return g.kind="WriterException",g})();class ${constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,o){$.clearMatrix(o),$.embedBasicPatterns(n,o),$.embedTypeInfo(t,r,o),$.maybeEmbedVersionInfo(n,o),$.embedDataBits(e,r,o)}static embedBasicPatterns(e,t){$.embedPositionDetectionPatternsAndSeparators(t),$.embedDarkDotAtLeftBottomCorner(t),$.maybeEmbedPositionAdjustmentPatterns(e,t),$.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){let r=new le;$.makeTypeInfoBits(e,t,r);for(let o=0,s=r.getSize();o<s;++o){let l=r.get(r.getSize()-1-o),f=$.TYPE_INFO_COORDINATES[o],d=f[0],x=f[1];if(n.setBoolean(d,x,l),o<8){let m=n.getWidth()-o-1;n.setBoolean(m,8,l)}else{let E=n.getHeight()-7+(o-8);n.setBoolean(8,E,l)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;let n=new le;$.makeVersionInfoBits(e,n);let r=17;for(let o=0;o<6;++o)for(let s=0;s<3;++s){let l=n.get(r);r--,t.setBoolean(o,t.getHeight()-11+s,l),t.setBoolean(t.getHeight()-11+s,o,l)}}static embedDataBits(e,t,n){let r=0,o=-1,s=n.getWidth()-1,l=n.getHeight()-1;for(;s>0;){for(s===6&&(s-=1);l>=0&&l<n.getHeight();){for(let f=0;f<2;++f){let d=s-f;if(!$.isEmpty(n.get(d,l)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&bn.getDataMaskBit(t,d,l)&&(x=!x),n.setBoolean(d,l,x)}l+=o}o=-o,l+=o,s-=2}if(r!==e.getSize())throw new ve("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-Y.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new w("0 polynomial");let n=$.findMSBSet(t);for(e<<=n-1;$.findMSBSet(e)>=n;)e^=t<<$.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!br.isValidMaskPattern(t))throw new ve("Invalid mask pattern");let r=e.getBits()<<3|t;n.appendBits(r,5);let o=$.calculateBCHCode(r,$.TYPE_INFO_POLY);n.appendBits(o,10);let s=new le;if(s.appendBits($.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new ve("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);let n=$.calculateBCHCode(e.getVersionNumber(),$.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new ve("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){let n=(t+1)%2;$.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),$.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new ve;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!$.isEmpty(n.get(e+r,t)))throw new ve;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!$.isEmpty(n.get(e,t+r)))throw new ve;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){let o=$.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,o[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){let o=$.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,o[s])}}static embedPositionDetectionPatternsAndSeparators(e){let t=$.POSITION_DETECTION_PATTERN[0].length;$.embedPositionDetectionPattern(0,0,e),$.embedPositionDetectionPattern(e.getWidth()-t,0,e),$.embedPositionDetectionPattern(0,e.getWidth()-t,e);let n=8;$.embedHorizontalSeparationPattern(0,n-1,e),$.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),$.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);let r=7;$.embedVerticalSeparationPattern(r,0,e),$.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),$.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;let n=e.getVersionNumber()-1,r=$.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let o=0,s=r.length;o!==s;o++){let l=r[o];if(l>=0)for(let f=0;f!==s;f++){let d=r[f];d>=0&&$.isEmpty(t.get(d,l))&&$.embedPositionAdjustmentPattern(d-2,l-2,t)}}}}$.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),$.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),$.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),$.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),$.VERSION_INFO_POLY=7973,$.TYPE_INFO_POLY=1335,$.TYPE_INFO_MASK_PATTERN=21522;class W0{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Re{constructor(){}static calculateMaskPenalty(e){return bn.applyMaskPenaltyRule1(e)+bn.applyMaskPenaltyRule2(e)+bn.applyMaskPenaltyRule3(e)+bn.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=Re.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(je.CHARACTER_SET)!==void 0;o&&(r=n.get(je.CHARACTER_SET).toString());let s=this.chooseMode(e,r),l=new le;if(s===K.BYTE&&(o||Re.DEFAULT_BYTE_MODE_ENCODING!==r)){let j=F.getCharacterSetECIByName(r);j!==void 0&&this.appendECI(j,l)}this.appendModeInfo(s,l);let f=new le;this.appendBytes(e,s,f,r);let d;if(n!==null&&n.get(je.QR_VERSION)!==void 0){let j=Number.parseInt(n.get(je.QR_VERSION).toString(),10);d=Z.getVersionForNumber(j);let R=this.calculateBitsNeeded(s,l,f,d);if(!this.willFit(R,d,t))throw new ve("Data too big for requested version")}else d=this.recommendVersion(t,s,l,f);let x=new le;x.appendBitArray(l);let m=s===K.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(m,d,s,x),x.appendBitArray(f);let E=d.getECBlocksForLevel(t),y=d.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(y,x);let b=this.interleaveWithECBytes(x,d.getTotalCodewords(),y,E.getNumBlocks()),I=new br;I.setECLevel(t),I.setMode(s),I.setVersion(d);let S=d.getDimensionForVersion(),O=new yr(S,S),P=this.chooseMaskPattern(b,t,d,O);return I.setMaskPattern(P),$.buildMatrix(b,t,d,P,O),I.setMatrix(O),I}static recommendVersion(e,t,n,r){let o=this.calculateBitsNeeded(t,n,r,Z.getVersionForNumber(1)),s=this.chooseVersion(o,e),l=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(l,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Re.ALPHANUMERIC_TABLE.length?Re.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(F.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return K.KANJI;let n=!1,r=!1;for(let o=0,s=e.length;o<s;++o){let l=e.charAt(o);if(Re.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)r=!0;else return K.BYTE}return r?K.ALPHANUMERIC:n?K.NUMERIC:K.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=st.encode(e,F.SJIS)}catch{return!1}let n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){let o=t[r]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let o=Number.MAX_SAFE_INTEGER,s=-1;for(let l=0;l<br.NUM_MASK_PATTERNS;l++){$.buildMatrix(e,t,n,l,r);let f=this.calculateMaskPenalty(r);f<o&&(o=f,s=l)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){let r=Z.getVersionForNumber(n);if(Re.willFit(e,r,t))return r}throw new ve("Data too big")}static willFit(e,t,n){let r=t.getTotalCodewords(),s=t.getECBlocksForLevel(n).getTotalECCodewords(),l=r-s,f=(e+7)/8;return l>=f}static terminateBits(e,t){let n=e*8;if(t.getSize()>n)throw new ve("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);let r=t.getSize()&7;if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);let o=e-t.getSizeInBytes();for(let s=0;s<o;++s)t.appendBits((s&1)===0?236:17,8);if(t.getSize()!==n)throw new ve("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,o,s){if(r>=n)throw new ve("Block ID too large");let l=e%n,f=n-l,d=Math.floor(e/n),x=d+1,m=Math.floor(t/n),E=m+1,y=d-m,b=x-E;if(y!==b)throw new ve("EC bytes mismatch");if(n!==f+l)throw new ve("RS blocks mismatch");if(e!==(m+y)*f+(E+b)*l)throw new ve("Total bytes mismatch");r<f?(o[0]=m,s[0]=y):(o[0]=E,s[0]=b)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new ve("Number of bits and data bytes does not match");let o=0,s=0,l=0,f=new Array;for(let x=0;x<r;++x){let m=new Int32Array(1),E=new Int32Array(1);Re.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,m,E);let y=m[0],b=new Uint8Array(y);e.toBytes(8*o,b,0,y);let I=Re.generateECBytes(b,E[0]);f.push(new W0(b,I)),s=Math.max(s,y),l=Math.max(l,I.length),o+=m[0]}if(n!==o)throw new ve("Data bytes does not match offset");let d=new le;for(let x=0;x<s;++x)for(let m of f){let E=m.getDataBytes();x<E.length&&d.appendBits(E[x],8)}for(let x=0;x<l;++x)for(let m of f){let E=m.getErrorCorrectionBytes();x<E.length&&d.appendBits(E[x],8)}if(t!==d.getSizeInBytes())throw new ve("Interleaving error: "+t+" and "+d.getSizeInBytes()+" differ.");return d}static generateECBytes(e,t){let n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=e[s]&255;new vi(we.QR_CODE_FIELD_256).encode(r,t);let o=new Uint8Array(t);for(let s=0;s<t;s++)o[s]=r[n+s];return o}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){let o=n.getCharacterCountBits(t);if(e>=1<<o)throw new ve(e+" is bigger than "+((1<<o)-1));r.appendBits(e,o)}static appendBytes(e,t,n,r){switch(t){case K.NUMERIC:Re.appendNumericBytes(e,n);break;case K.ALPHANUMERIC:Re.appendAlphanumericBytes(e,n);break;case K.BYTE:Re.append8BitBytes(e,n,r);break;case K.KANJI:Re.appendKanjiBytes(e,n);break;default:throw new ve("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){let t=Re.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){let n=e.length,r=0;for(;r<n;){let o=Re.getDigit(e.charAt(r));if(r+2<n){let s=Re.getDigit(e.charAt(r+1)),l=Re.getDigit(e.charAt(r+2));t.appendBits(o*100+s*10+l,10),r+=3}else if(r+1<n){let s=Re.getDigit(e.charAt(r+1));t.appendBits(o*10+s,7),r+=2}else t.appendBits(o,4),r++}}static appendAlphanumericBytes(e,t){let n=e.length,r=0;for(;r<n;){let o=Re.getAlphanumericCode(e.charCodeAt(r));if(o===-1)throw new ve;if(r+1<n){let s=Re.getAlphanumericCode(e.charCodeAt(r+1));if(s===-1)throw new ve;t.appendBits(o*45+s,11),r+=2}else t.appendBits(o,6),r++}}static append8BitBytes(e,t,n){let r;try{r=st.encode(e,n)}catch(o){throw new ve(o)}for(let o=0,s=r.length;o!==s;o++){let l=r[o];t.appendBits(l,8)}}static appendKanjiBytes(e,t){let n;try{n=st.encode(e,F.SJIS)}catch(o){throw new ve(o)}let r=n.length;for(let o=0;o<r;o+=2){let s=n[o]&255,l=n[o+1]&255,f=s<<8&4294967295|l,d=-1;if(f>=33088&&f<=40956?d=f-33088:f>=57408&&f<=60351&&(d=f-49472),d===-1)throw new ve("Invalid byte sequence");let x=(d>>8)*192+(d&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(K.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Re.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Re.DEFAULT_BYTE_MODE_ENCODING=F.UTF8.getName();let Y0=(()=>{class g{write(t,n,r,o=null){if(t.length===0)throw new w("Found empty contents");if(n<0||r<0)throw new w("Requested dimensions are too small: "+n+"x"+r);let s=Oe.L,l=g.QUIET_ZONE_SIZE;o!==null&&(o.get(je.ERROR_CORRECTION)!==void 0&&(s=Oe.fromString(o.get(je.ERROR_CORRECTION).toString())),o.get(je.MARGIN)!==void 0&&(l=Number.parseInt(o.get(je.MARGIN).toString(),10)));let f=Re.encode(t,s,o);return this.renderResult(f,n,r,l)}writeToDom(t,n,r,o,s=null){typeof t=="string"&&(t=document.querySelector(t));let l=this.write(n,r,o,s);t&&t.appendChild(l)}renderResult(t,n,r,o){let s=t.getMatrix();if(s===null)throw new Xt;let l=s.getWidth(),f=s.getHeight(),d=l+o*2,x=f+o*2,m=Math.max(n,d),E=Math.max(r,x),y=Math.min(Math.floor(m/d),Math.floor(E/x)),b=Math.floor((m-l*y)/2),I=Math.floor((E-f*y)/2),S=this.createSVGElement(m,E);for(let O=0,P=I;O<f;O++,P+=y)for(let j=0,R=b;j<l;j++,R+=y)if(s.get(j,O)===1){let ce=this.createSvgRectElement(R,P,y,y);S.appendChild(ce)}return S}createSVGElement(t,n){let r=document.createElementNS(g.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r}createSvgRectElement(t,n,r,o){let s=document.createElementNS(g.SVG_NS,"rect");return s.setAttributeNS(null,"x",t.toString()),s.setAttributeNS(null,"y",n.toString()),s.setAttributeNS(null,"height",r.toString()),s.setAttributeNS(null,"width",o.toString()),s.setAttributeNS(null,"fill","#000000"),s}}return g.QUIET_ZONE_SIZE=4,g.SVG_NS="http://www.w3.org/2000/svg",g})(),Ia=(()=>{class g{encode(t,n,r,o,s){if(t.length===0)throw new w("Found empty contents");if(n!==J.QR_CODE)throw new w("Can only encode QR_CODE, but got "+n);if(r<0||o<0)throw new w(`Requested dimensions are too small: ${r}x${o}`);let l=Oe.L,f=g.QUIET_ZONE_SIZE;s!==null&&(s.get(je.ERROR_CORRECTION)!==void 0&&(l=Oe.fromString(s.get(je.ERROR_CORRECTION).toString())),s.get(je.MARGIN)!==void 0&&(f=Number.parseInt(s.get(je.MARGIN).toString(),10)));let d=Re.encode(t,l,s);return g.renderResult(d,r,o,f)}static renderResult(t,n,r,o){let s=t.getMatrix();if(s===null)throw new Xt;let l=s.getWidth(),f=s.getHeight(),d=l+o*2,x=f+o*2,m=Math.max(n,d),E=Math.max(r,x),y=Math.min(Math.floor(m/d),Math.floor(E/x)),b=Math.floor((m-l*y)/2),I=Math.floor((E-f*y)/2),S=new Ve(m,E);for(let O=0,P=I;O<f;O++,P+=y)for(let j=0,R=b;j<l;j++,R+=y)s.get(j,O)===1&&S.setRegion(R,P,y,y);return S}}return g.QUIET_ZONE_SIZE=4,g})();class Z0{encode(e,t,n,r,o){let s;switch(t){case J.QR_CODE:s=new Ia;break;default:throw new w("No encoder available for format "+t)}return s.encode(e,t,n,r,o)}}let q0=(()=>{class g extends jn{constructor(t,n,r,o,s,l,f,d){if(super(l,f),this.yuvData=t,this.dataWidth=n,this.dataHeight=r,this.left=o,this.top=s,o+l>n||s+f>r)throw new w("Crop rectangle does not fit within image data.");d&&this.reverseHorizontal(l,f)}getRow(t,n){if(t<0||t>=this.getHeight())throw new w("Requested row is outside the image: "+t);let r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));let o=(t+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.yuvData,o,n,0,r),n}getMatrix(){let t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;let r=t*n,o=new Uint8ClampedArray(r),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Q.arraycopy(this.yuvData,s,o,0,r),o;for(let l=0;l<n;l++){let f=l*t;Q.arraycopy(this.yuvData,s,o,f,t),s+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,n,r,o){return new g(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,r,o,!1)}renderThumbnail(){let t=this.getWidth()/g.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/g.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*n),o=this.yuvData,s=this.top*this.dataWidth+this.left;for(let l=0;l<n;l++){let f=l*t;for(let d=0;d<t;d++){let x=o[s+d*g.THUMBNAIL_SCALE_FACTOR]&255;r[f+d]=4278190080|x*65793}s+=this.dataWidth*g.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/g.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/g.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,n){let r=this.yuvData;for(let o=0,s=this.top*this.dataWidth+this.left;o<n;o++,s+=this.dataWidth){let l=s+t/2;for(let f=s,d=s+t-1;f<l;f++,d--){let x=r[f];r[f]=r[d],r[d]=x}}}invert(){return new Zt(this)}}return g.THUMBNAIL_SCALE_FACTOR=2,g})();class Mi extends jn{constructor(e,t,n,r,o,s,l){if(super(t,n),this.dataWidth=r,this.dataHeight=o,this.left=s,this.top=l,e.BYTES_PER_ELEMENT===4){let f=t*n,d=new Uint8ClampedArray(f);for(let x=0;x<f;x++){let m=e[x],E=m>>16&255,y=m>>7&510,b=m&255;d[x]=(E+y+b)/4&255}this.luminances=d}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),o===void 0&&(this.dataHeight=n),s===void 0&&(this.left=0),l===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new w("Requested row is outside the image: "+e);let n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));let r=(e+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;let n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Q.arraycopy(this.luminances,o,r,0,n),r;for(let s=0;s<t;s++){let l=s*e;Q.arraycopy(this.luminances,o,r,l,e),o+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Mi(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Zt(this)}}class Sa extends F{static forName(e){return this.getCharacterSetECIByName(e)}}class Ni{}Ni.ISO_8859_1=F.ISO8859_1;class Ta{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Oa{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Q0{constructor(e){this.previous=e}getPrevious(){return this.previous}}class _n extends Q0{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new _n(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new _n(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+Y.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ri extends _n{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Ri(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function K0(g,e,t){return new Ri(g,e,t)}function Jn(g,e,t){return new _n(g,e,t)}let J0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],nn=0,_r=1,At=2,va=3,Ut=4,$0=new _n(null,0,0),Di=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function el(g){for(let e of g)te.fill(e,-1);return g[nn][Ut]=0,g[_r][Ut]=0,g[_r][nn]=28,g[va][Ut]=0,g[At][Ut]=0,g[At][nn]=15,g}let Ma=el(te.createInt32Array(6,6));class Ht{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let s=Di[this.mode][e];r=Jn(r,s&65535,s>>16),n+=s>>16}let o=e===At?4:5;return r=Jn(r,t,o),new Ht(r,e,0,n+o)}shiftAndAppend(e,t){let n=this.token,r=this.mode===At?4:5;return n=Jn(n,Ma[this.mode][e],r),n=Jn(n,t,5),new Ht(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Ut||this.mode===At){let l=Di[n][nn];t=Jn(t,l&65535,l>>16),r+=l>>16,n=nn}let o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new Ht(t,n,this.binaryShiftByteCount+1,r+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=K0(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ht(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Di[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Ht.calculateBinaryShiftCost(e)-Ht.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new le;for(let r of t)r.appendTo(n,e);return n}toString(){return ne.format("%s bits=%d bytes=%d",J0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Ht.INITIAL_STATE=new Ht($0,nn,0,0);function tl(g){let e=ne.getCharCode(" "),t=ne.getCharCode("."),n=ne.getCharCode(",");g[nn][e]=1;let r=ne.getCharCode("Z"),o=ne.getCharCode("A");for(let E=o;E<=r;E++)g[nn][E]=E-o+2;g[_r][e]=1;let s=ne.getCharCode("z"),l=ne.getCharCode("a");for(let E=l;E<=s;E++)g[_r][E]=E-l+2;g[At][e]=1;let f=ne.getCharCode("9"),d=ne.getCharCode("0");for(let E=d;E<=f;E++)g[At][E]=E-d+2;g[At][n]=12,g[At][t]=13;let x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let E=0;E<x.length;E++)g[va][ne.getCharCode(x[E])]=E;let m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<m.length;E++)ne.getCharCode(m[E])>0&&(g[Ut][ne.getCharCode(m[E])]=E);return g}let Li=tl(te.createInt32Array(5,256));class $n{constructor(e){this.text=e}encode(){let e=ne.getCharCode(" "),t=ne.getCharCode(`
`),n=Oa.singletonList(Ht.INITIAL_STATE);for(let o=0;o<this.text.length;o++){let s,l=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case ne.getCharCode("\r"):s=l===t?2:0;break;case ne.getCharCode("."):s=l===e?3:0;break;case ne.getCharCode(","):s=l===e?4:0;break;case ne.getCharCode(":"):s=l===e?5:0;break;default:s=0}s>0?(n=$n.updateStateListForPair(n,o,s),o++):n=this.updateStateListForChar(n,o)}return Oa.min(n,(o,s)=>o.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){let n=[];for(let r of e)this.updateStateForChar(r,t,n);return $n.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,o=Li[e.getMode()][r]>0,s=null;for(let l=0;l<=Ut;l++){let f=Li[l][r];if(f>0){if(s==null&&(s=e.endBinaryShift(t)),!o||l===e.getMode()||l===At){let d=s.latchAndAppend(l,f);n.push(d)}if(!o&&Ma[e.getMode()][l]>=0){let d=s.shiftAndAppend(l,f);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||Li[e.getMode()][r]===0){let l=e.addBinaryShiftChar(t);n.push(l)}}static updateStateListForPair(e,t,n){let r=[];for(let o of e)this.updateStateForPair(o,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let o=e.endBinaryShift(t);if(r.push(o.latchAndAppend(Ut,n)),e.getMode()!==Ut&&r.push(o.shiftAndAppend(Ut,n)),n===3||n===4){let s=o.latchAndAppend(At,16-n).latchAndAppend(At,1);r.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(s)}}static simplifyStates(e){let t=[];for(let n of e){let r=!0;for(let o of t){if(o.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(o)&&(t=t.filter(s=>s!==o))}r&&t.push(n)}return t}}class pe{constructor(){}static encodeBytes(e){return pe.encode(e,pe.DEFAULT_EC_PERCENT,pe.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new $n(e).encode(),o=Y.truncDivision(r.getSize()*t,100)+11,s=r.getSize()+o,l,f,d,x,m;if(n!==pe.DEFAULT_AZTEC_LAYERS){if(l=n<0,f=Math.abs(n),f>(l?pe.MAX_NB_BITS_COMPACT:pe.MAX_NB_BITS))throw new w(ne.format("Illegal value %s for layers",n));d=pe.totalBitsInLayer(f,l),x=pe.WORD_SIZE[f];let R=d-d%x;if(m=pe.stuffBits(r,x),m.getSize()+o>R)throw new w("Data to large for user specified layer");if(l&&m.getSize()>x*64)throw new w("Data to large for user specified layer")}else{x=0,m=null;for(let R=0;;R++){if(R>pe.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(l=R<=3,f=l?R+1:R,d=pe.totalBitsInLayer(f,l),s>d)continue;(m==null||x!==pe.WORD_SIZE[f])&&(x=pe.WORD_SIZE[f],m=pe.stuffBits(r,x));let ce=d-d%x;if(!(l&&m.getSize()>x*64)&&m.getSize()+o<=ce)break}}let E=pe.generateCheckWords(m,d,x),y=m.getSize()/x,b=pe.generateModeMessage(l,f,y),I=(l?11:14)+f*4,S=new Int32Array(I),O;if(l){O=I;for(let R=0;R<S.length;R++)S[R]=R}else{O=I+1+2*Y.truncDivision(Y.truncDivision(I,2)-1,15);let R=Y.truncDivision(I,2),ce=Y.truncDivision(O,2);for(let re=0;re<R;re++){let ut=re+Y.truncDivision(re,15);S[R-re-1]=ce-ut-1,S[R+re]=ce+ut+1}}let P=new Ve(O);for(let R=0,ce=0;R<f;R++){let re=(f-R)*4+(l?9:12);for(let ut=0;ut<re;ut++){let Dt=ut*2;for(let ft=0;ft<2;ft++)E.get(ce+Dt+ft)&&P.set(S[R*2+ft],S[R*2+ut]),E.get(ce+re*2+Dt+ft)&&P.set(S[R*2+ut],S[I-1-R*2-ft]),E.get(ce+re*4+Dt+ft)&&P.set(S[I-1-R*2-ft],S[I-1-R*2-ut]),E.get(ce+re*6+Dt+ft)&&P.set(S[I-1-R*2-ut],S[R*2+ft])}ce+=re*8}if(pe.drawModeMessage(P,l,O,b),l)pe.drawBullsEye(P,Y.truncDivision(O,2),5);else{pe.drawBullsEye(P,Y.truncDivision(O,2),7);for(let R=0,ce=0;R<Y.truncDivision(I,2)-1;R+=15,ce+=16)for(let re=Y.truncDivision(O,2)&1;re<O;re+=2)P.set(Y.truncDivision(O,2)-ce,re),P.set(Y.truncDivision(O,2)+ce,re),P.set(re,Y.truncDivision(O,2)-ce),P.set(re,Y.truncDivision(O,2)+ce)}let j=new Ta;return j.setCompact(l),j.setSize(O),j.setLayers(f),j.setCodeWords(y),j.setMatrix(P),j}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let o=t-r;o<=t+r;o++)e.set(o,t-r),e.set(o,t+r),e.set(t-r,o),e.set(t+r,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new le;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=pe.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=pe.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let o=Y.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let l=o-3+s;r.get(s)&&e.set(l,o-5),r.get(s+7)&&e.set(o+5,l),r.get(20-s)&&e.set(l,o+5),r.get(27-s)&&e.set(o-5,l)}else for(let s=0;s<10;s++){let l=o-5+s+Y.truncDivision(s,5);r.get(s)&&e.set(l,o-7),r.get(s+10)&&e.set(o+7,l),r.get(29-s)&&e.set(l,o+7),r.get(39-s)&&e.set(o-7,l)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,o=new vi(pe.getGF(n)),s=Y.truncDivision(t,n),l=pe.bitsToWords(e,n,s);o.encode(l,s-r);let f=t%n,d=new le;d.appendBits(0,f);for(let x of Array.from(l))d.appendBits(x,n);return d}static bitsToWords(e,t,n){let r=new Int32Array(n),o,s;for(o=0,s=e.getSize()/t;o<s;o++){let l=0;for(let f=0;f<t;f++)l|=e.get(o*t+f)?1<<t-f-1:0;r[o]=l}return r}static getGF(e){switch(e){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new w("Unsupported word size "+e)}}static stuffBits(e,t){let n=new le,r=e.getSize(),o=(1<<t)-2;for(let s=0;s<r;s+=t){let l=0;for(let f=0;f<t;f++)(s+f>=r||e.get(s+f))&&(l|=1<<t-1-f);(l&o)===o?(n.appendBits(l&o,t),s--):(l&o)===0?(n.appendBits(l|1,t),s--):n.appendBits(l,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}pe.DEFAULT_EC_PERCENT=33,pe.DEFAULT_AZTEC_LAYERS=0,pe.MAX_NB_BITS=32,pe.MAX_NB_BITS_COMPACT=4,pe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ir{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,o){let s=Ni.ISO_8859_1,l=pe.DEFAULT_EC_PERCENT,f=pe.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(je.CHARACTER_SET)&&(s=Sa.forName(o.get(je.CHARACTER_SET).toString())),o.has(je.ERROR_CORRECTION)&&(l=Y.parseInt(o.get(je.ERROR_CORRECTION).toString())),o.has(je.AZTEC_LAYERS)&&(f=Y.parseInt(o.get(je.AZTEC_LAYERS).toString()))),Ir.encodeLayers(e,t,n,r,s,l,f)}static encodeLayers(e,t,n,r,o,s,l){if(t!==J.AZTEC)throw new w("Can only encode AZTEC, but got "+t);let f=pe.encode(ne.getBytes(e,o),s,l);return Ir.renderResult(f,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new Xt;let o=r.getWidth(),s=r.getHeight(),l=Math.max(t,o),f=Math.max(n,s),d=Math.min(l/o,f/s),x=(l-o*d)/2,m=(f-s*d)/2,E=new Ve(l,f);for(let y=0,b=m;y<s;y++,b+=d)for(let I=0,S=x;I<o;I++,S+=d)r.get(I,y)&&E.setRegion(S,b,d,d);return E}}a.AbstractExpandedDecoder=Ei,a.ArgumentException=M,a.ArithmeticException=hi,a.AztecCode=Ta,a.AztecCodeReader=xr,a.AztecCodeWriter=Ir,a.AztecDecoder=di,a.AztecDetector=ca,a.AztecDetectorResult=sa,a.AztecEncoder=pe,a.AztecHighLevelEncoder=$n,a.AztecPoint=rt,a.BarcodeFormat=J,a.Binarizer=fe,a.BinaryBitmap=N,a.BitArray=le,a.BitMatrix=Ve,a.BitSource=bi,a.BrowserAztecCodeReader=w0,a.BrowserBarcodeReader=T0,a.BrowserCodeReader=un,a.BrowserDatamatrixCodeReader=v0,a.BrowserMultiFormatReader=z0,a.BrowserPDF417Reader=G0,a.BrowserQRCodeReader=X0,a.BrowserQRCodeSvgWriter=Y0,a.CharacterSetECI=F,a.ChecksumException=B,a.Code128Reader=U,a.Code39Reader=xi,a.DataMatrixDecodedBitStreamParser=$t,a.DataMatrixReader=Er,a.DecodeHintType=de,a.DecoderResult=Vn,a.DefaultGridSampler=la,a.DetectorResult=dr,a.EAN13Reader=pr,a.EncodeHintType=je,a.Exception=_,a.FormatException=k,a.GenericGF=we,a.GenericGFPoly=lt,a.GlobalHistogramBinarizer=ze,a.GridSampler=gi,a.GridSamplerInstance=Qt,a.HTMLCanvasElementLuminanceSource=qt,a.HybridBinarizer=ie,a.ITFReader=Ie,a.IllegalArgumentException=w,a.IllegalStateException=Xt,a.InvertedLuminanceSource=Zt,a.LuminanceSource=jn,a.MathUtils=xe,a.MultiFormatOneDReader=yn,a.MultiFormatReader=ba,a.MultiFormatWriter=Z0,a.NotFoundException=D,a.OneDReader=He,a.PDF417DecodedBitStreamParser=v,a.PDF417DecoderErrorCorrection=ma,a.PDF417Reader=Qe,a.PDF417ResultMetadata=Ca,a.PerspectiveTransform=Ot,a.PlanarYUVLuminanceSource=q0,a.QRCodeByteMatrix=yr,a.QRCodeDataMask=Ct,a.QRCodeDecodedBitStreamParser=xa,a.QRCodeDecoderErrorCorrectionLevel=Oe,a.QRCodeDecoderFormatInformation=$e,a.QRCodeEncoder=Re,a.QRCodeEncoderQRCode=br,a.QRCodeMaskUtil=bn,a.QRCodeMatrixUtil=$,a.QRCodeMode=K,a.QRCodeReader=en,a.QRCodeVersion=Z,a.QRCodeWriter=Ia,a.RGBLuminanceSource=Mi,a.RSS14Reader=Pe,a.RSSExpandedReader=L,a.ReaderException=Oi,a.ReedSolomonDecoder=Xn,a.ReedSolomonEncoder=vi,a.ReedSolomonException=Gn,a.Result=nt,a.ResultMetadataType=Ge,a.ResultPoint=W,a.StringUtils=ne,a.UnsupportedOperationException=Hn,a.VideoInputDevice=ia,a.WhiteRectangleDetector=gr,a.WriterException=ve,a.ZXingArrays=te,a.ZXingCharset=Sa,a.ZXingInteger=Y,a.ZXingStandardCharsets=Ni,a.ZXingStringBuilder=be,a.ZXingStringEncoding=st,a.ZXingSystem=Q,a.createAbstractExpandedDecoder=ga,Object.defineProperty(a,"__esModule",{value:!0})})});var yt=class a{TOKEN_KEY="auth_token";isAuthenticatedSubject=new Ra(this.checkToken());get isAuthenticated$(){return this.isAuthenticatedSubject.asObservable()}login(i,c){if(i&&c){let u="Bearer_token_"+i;return localStorage.setItem(this.TOKEN_KEY,u),this.isAuthenticatedSubject.next(!0),!0}return!1}isAuthenticated(){return this.checkToken()}checkToken(){return!!localStorage.getItem(this.TOKEN_KEY)}getToken(){return localStorage.getItem(this.TOKEN_KEY)}logout(){localStorage.removeItem(this.TOKEN_KEY),this.isAuthenticatedSubject.next(!1)}static \u0275fac=function(c){return new(c||a)};static \u0275prov=jt({token:a,factory:a.\u0275fac,providedIn:"root"})};var Lr=class a{auth=Be(yt);router=Be(rn);fb=Be(us);showPassword=!1;loginForm=this.fb.group({username:[""],password:[""]});togglePasswordVisibility(){this.showPassword=!this.showPassword}login(){this.auth.login(this.loginForm.value.username,this.loginForm.value.password)&&this.router.navigate(["/dashboard"])}static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["app-login"]],decls:30,vars:4,consts:[[1,"login-container"],[1,"login-wrapper"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"fas","fa-shirt"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username",1,"form-label"],[1,"fas","fa-user"],["id","username","type","text","placeholder","Enter your username","formControlName","username","autocomplete","username",1,"form-control"],["for","password",1,"form-label"],[1,"fas","fa-lock"],[1,"password-wrapper"],["id","password","placeholder","Enter your password","formControlName","password","autocomplete","current-password",1,"form-control",3,"type"],["type","button",1,"toggle-password",3,"click","title"],[3,"ngClass"],["type","submit",1,"btn-login","w-100"],[1,"fas","fa-sign-in-alt"],[1,"login-footer"],[1,"footer-text"]],template:function(c,u){c&1&&(H(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),ue(5,"i",5),X(),H(6,"h1",6),V(7,"Garments ERP"),X(),H(8,"p",7),V(9,"Manufacturing & Operations System"),X()(),H(10,"form",8),at("ngSubmit",function(){return u.login()}),H(11,"div",9)(12,"label",10),ue(13,"i",11),V(14," Username "),X(),ue(15,"input",12),X(),H(16,"div",9)(17,"label",13),ue(18,"i",14),V(19," Password "),X(),H(20,"div",15),ue(21,"input",16),H(22,"button",17),at("click",function(){return u.togglePasswordVisibility()}),ue(23,"i",18),X()()(),H(24,"button",19),ue(25,"i",20),V(26," Sign In "),X()(),H(27,"div",21)(28,"p",22),V(29,"\xA9 2026 Garments ERP System"),X()()()()()),c&2&&(se(10),ht("formGroup",u.loginForm),se(11),ht("type",u.showPassword?"text":"password"),se(),ht("title",u.showPassword?"Hide password":"Show password"),se(),ht("ngClass",u.showPassword?"fas fa-eye-slash":"fas fa-eye"))},dependencies:[Vt,vr,fs,Dr,On,vn,Nr,os,as,on],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;width:400px;height:400px;background:#ffffff0d;border-radius:50%;top:-100px;right:-100px;animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.login-container[_ngcontent-%COMP%]:after{content:"";position:absolute;width:300px;height:300px;background:#ffffff0d;border-radius:50%;bottom:-80px;left:-80px;animation:_ngcontent-%COMP%_float 8s ease-in-out infinite reverse}.login-wrapper[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:420px;padding:1rem}.login-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px #00000026;border:none}.login-header[_ngcontent-%COMP%]{padding:2rem 2rem 1.5rem;background:linear-gradient(135deg,#667eea,#764ba2);text-align:center;color:#fff}.login-header[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:3rem;color:#fff;margin-bottom:.5rem;display:inline-block;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}.login-header[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:700;margin:0 0 .5rem;letter-spacing:.5px}.login-header[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{color:#ffffffd9;font-size:.95rem;margin:0;font-weight:400}.login-form[_ngcontent-%COMP%]{padding:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#1a1a1a;font-weight:600;font-size:.95rem}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#667eea}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #e9ecef;border-radius:8px;font-size:.95rem;color:#1a1a1a;background-color:#f8f9fa;transition:all .3s ease;font-family:inherit}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#b8bcc4}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background-color:#fff;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover:not(:focus){border-color:#667eea;background-color:#fff}.form-group[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.form-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;color:#667eea;cursor:pointer;padding:8px;font-size:.95rem;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.form-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#764ba2;transform:scale(1.1)}.form-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:active{transform:scale(.95)}.form-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.btn-login[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}.btn-login[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66;color:#fff}.btn-login[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-login[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.login-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;text-align:center;border-top:1px solid #e9ecef}.login-footer[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{color:#b8bcc4;font-size:.85rem;margin:0}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-30px)}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@media (max-width: 576px){.login-wrapper[_ngcontent-%COMP%]{max-width:100%;padding:.5rem}.login-card[_ngcontent-%COMP%]{border-radius:8px}.login-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.login-header[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:1.5rem}.login-header[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{font-size:.85rem}.login-form[_ngcontent-%COMP%]{padding:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}}']})};var il=a=>({collapsed:a}),Pr=class a{router=Be(rn);auth=Be(yt);sidebarCollapsed=!1;toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed}logout(){this.auth.logout(),this.router.navigate(["/login"])}static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["app-sidebar"]],decls:64,vars:3,consts:[[1,"sidebar",3,"ngClass"],[1,"sidebar-header"],[1,"fas","fa-layer-group"],[1,"brand-text"],["title","Toggle Sidebar",1,"toggle-btn",3,"click"],[1,"fas","fa-chevron-left"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active","title","Dashboard",1,"nav-link"],[1,"fas","fa-chart-line"],[1,"nav-text"],["routerLink","/cpo","routerLinkActive","active","title","CPO",1,"nav-link"],[1,"fas","fa-file-invoice-dollar"],["routerLink","/workorders","routerLinkActive","active","title","Work Orders",1,"nav-link"],[1,"fas","fa-tasks"],["routerLink","/process","routerLinkActive","active","title","Process",1,"nav-link"],[1,"fas","fa-cogs"],["routerLink","/inventory","routerLinkActive","active","title","Inventory",1,"nav-link"],[1,"fas","fa-warehouse"],["routerLink","/qc","routerLinkActive","active","title","QC",1,"nav-link"],[1,"fas","fa-check-circle"],["routerLink","/packing","routerLinkActive","active","title","Packing",1,"nav-link"],[1,"fas","fa-boxes"],["routerLink","/barcode/generate","routerLinkActive","active","title","Barcode Generator",1,"nav-link"],[1,"fas","fa-barcode"],["routerLink","/barcode/scan","routerLinkActive","active","title","Barcode Scanner",1,"nav-link"],[1,"fas","fa-qrcode"],["routerLink","/users","routerLinkActive","active","title","Users",1,"nav-link"],[1,"fas","fa-users"],[1,"sidebar-footer"],["title","Logout",1,"logout-btn",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(c,u){c&1&&(H(0,"div",0)(1,"div",1)(2,"h6"),ue(3,"i",2),H(4,"span",3),V(5,"Garments ERP"),X()(),H(6,"button",4),at("click",function(){return u.toggleSidebar()}),ue(7,"i",5),X()(),H(8,"ul",6)(9,"li",7)(10,"a",8),ue(11,"i",9),H(12,"span",10),V(13,"Dashboard"),X()()(),H(14,"li",7)(15,"a",11),ue(16,"i",12),H(17,"span",10),V(18,"CPO"),X()()(),H(19,"li",7)(20,"a",13),ue(21,"i",14),H(22,"span",10),V(23,"Work Orders"),X()()(),H(24,"li",7)(25,"a",15),ue(26,"i",16),H(27,"span",10),V(28,"Process"),X()()(),H(29,"li",7)(30,"a",17),ue(31,"i",18),H(32,"span",10),V(33,"Inventory"),X()()(),H(34,"li",7)(35,"a",19),ue(36,"i",20),H(37,"span",10),V(38,"QC"),X()()(),H(39,"li",7)(40,"a",21),ue(41,"i",22),H(42,"span",10),V(43,"Packing"),X()()(),H(44,"li",7)(45,"a",23),ue(46,"i",24),H(47,"span",10),V(48,"Generate Barcode"),X()()(),H(49,"li",7)(50,"a",25),ue(51,"i",26),H(52,"span",10),V(53,"Scanner"),X()()(),H(54,"li",7)(55,"a",27),ue(56,"i",28),H(57,"span",10),V(58,"Users"),X()()()(),H(59,"div",29)(60,"button",30),at("click",function(){return u.logout()}),ue(61,"i",31),H(62,"span",10),V(63,"Logout"),X()()()()),c&2&&ht("ngClass",Ga(1,il,u.sidebarCollapsed))},dependencies:[Vt,vr,ts,ns],styles:[".sidebar[_ngcontent-%COMP%]{width:250px;height:100vh;background-color:#1a1a1a;color:#fff;overflow-y:auto;overflow-x:hidden;border-right:1px solid #333333;position:fixed;left:0;top:0;z-index:1000;box-shadow:2px 0 8px #00000026;display:flex;flex-direction:column;transition:width all .3s ease}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8f9fa;border-radius:4px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea;border-radius:4px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#764ba2}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:70px}.sidebar[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{justify-content:center;padding:20px 8px}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{justify-content:center;padding:16px 8px}}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar.collapsed[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{justify-content:center;padding:20px 8px}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{justify-content:center;padding:16px 8px}.sidebar.collapsed[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:center;justify-content:space-between;border-bottom:none}.sidebar-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{padding:20px;margin:0;font-size:1.1rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;gap:8px;color:#fff;box-shadow:0 4px 12px #667eea4d;letter-spacing:.5px;flex:1}.sidebar-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.toggle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff;cursor:pointer;padding:20px 12px;font-size:1.1rem;transition:all .2s ease;display:none;align-items:center;justify-content:center;height:100%;min-width:50px}.toggle-btn[_ngcontent-%COMP%]:hover{opacity:.9}.toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .3s ease}@media (max-width: 768px){.toggle-btn[_ngcontent-%COMP%]{display:flex}}.nav[_ngcontent-%COMP%]{padding:12px 0;flex:1}.nav-item[_ngcontent-%COMP%]{margin:0;transition:all .3s ease}.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#b8bcc4;padding:12px 20px;display:flex;align-items:center;gap:8px;text-decoration:none;font-size:.95rem;border-left:4px solid transparent;transition:all .2s ease;font-weight:500}.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#2a2a2a;color:#fff;border-left-color:#667eea;padding-left:19px}.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center;font-size:1.1rem;flex-shrink:0}.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#667eea1a);color:#fff;border-left-color:#667eea;font-weight:600;box-shadow:inset 3px 0 8px #667eea33}.sidebar-footer[_ngcontent-%COMP%]{padding:12px 0;border-top:1px solid #333333}.logout-btn[_ngcontent-%COMP%]{width:100%;color:#b8bcc4;padding:12px 20px;display:flex;align-items:center;gap:8px;background:none;border:none;text-decoration:none;font-size:.95rem;cursor:pointer;transition:all .2s ease;font-weight:500;justify-content:flex-start}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#2a2a2a;color:#fff;border-left:4px solid #667eea;padding-left:19px}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center;font-size:1.1rem;flex-shrink:0}.logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}"]})};var Br=class a{static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["app-footer"]],decls:2,vars:0,consts:[[1,"bg-light","text-center","py-2","border-top"]],template:function(c,u){c&1&&(Me(0,"footer",0),V(1,` \xA9 2026 Garments ERP
`),Ne())},encapsulation:2})};var kr=class a{static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["app-layout"]],decls:6,vars:0,consts:[[1,"layout-wrapper"],[1,"layout-content"],[1,"content-area"]],template:function(c,u){c&1&&(H(0,"div",0),ue(1,"app-sidebar"),H(2,"div",1)(3,"main",2),ue(4,"router-outlet"),X(),ue(5,"app-footer"),X()())},dependencies:[Pr,Br,Mr],styles:[".layout-wrapper[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden;background-color:#f5f6f8}.layout-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;margin-left:250px;width:calc(100% - 250px);transition:all .3s ease}@media (max-width: 768px){.layout-content[_ngcontent-%COMP%]{margin-left:70px;width:calc(100% - 70px)}}@media (max-width: 576px){.layout-content[_ngcontent-%COMP%]{margin-left:70px;width:calc(100% - 70px)}}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:20px;background-color:#f5f6f8}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8f9fa;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea;border-radius:4px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#764ba2}"]})};var ds=(a,i)=>{let c=Be(yt),u=Be(rn);return c.isAuthenticated()?!0:(u.navigate(["/login"],{queryParams:{returnUrl:i.url}}),!1)};var U1=Na(F1());var og=["barcode"],ag=["labelPreview"],Kr=class a{barcodeEl;labelPreview;fields={customerPo:"",custReference:"",styleModel:"",leather:"",color:"",size:"",barcode:""};barcodeValue="";_applyListener=i=>this.applyParsedScan(i.detail);constructor(){window.addEventListener("barcode:apply",this._applyListener)}render(){if(this.barcodeValue=this.fields.barcode&&this.fields.barcode.trim()||this.fields.styleModel&&this.fields.styleModel.trim()||String(Date.now()).slice(-8),!!this.barcodeEl)try{(0,U1.default)(this.barcodeEl.nativeElement,this.barcodeValue,{format:"CODE128",width:2,height:60,displayValue:!1,margin:6})}catch(i){console.error(i),alert("Failed to generate barcode")}}download(){if(!this.barcodeEl){alert("No barcode available. Please generate first.");return}let i=600,c=420,u=window.devicePixelRatio||1,h=document.createElement("canvas");h.width=Math.ceil(i*u),h.height=Math.ceil(c*u),h.style.width=i+"px",h.style.height=c+"px";let p=h.getContext("2d");if(!p){alert("Failed to create canvas");return}p.setTransform(u,0,0,u,0,0),p.fillStyle="#fff",p.fillRect(0,0,i,c),p.strokeStyle="#333",p.lineWidth=1,p.setLineDash([4,3]),p.beginPath(),p.moveTo(12,20),p.lineTo(i-12,20),p.stroke(),p.setLineDash([]),p.fillStyle="#222",p.font="14px Arial",p.fillText(this.fields.customerPo||"Customer / PO#",14,44),p.font="12px Arial",p.fillText(this.fields.custReference||"Cust.Reference",14,64),p.font="bold 18px Arial",p.fillText(this.fields.styleModel||"Style/Model No.",14,92),p.font="12px Arial",p.fillText(this.fields.leather||"Leather",14,114),p.font="bold 14px Arial",p.fillText(this.fields.color||"Color",14,136),p.fillText(this.fields.size||"Size",14,156);try{let _=new XMLSerializer().serializeToString(this.barcodeEl.nativeElement),M=new Blob([_],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(M),N=new Image;N.onload=()=>{let B=i-120,fe=80,Q=Math.round((i-B)/2),ke=c-fe-60;p.drawImage(N,Q,ke,B,fe),p.font="16px Arial",p.textAlign="center",p.fillText(this.barcodeValue||"",i/2,ke+fe+22);try{let _e=h.toDataURL("image/png"),te=document.createElement("a");te.href=_e,te.download=`${this.barcodeValue||"barcode"}.png`,te.click(),URL.revokeObjectURL(w)}catch(_e){console.error(_e);let te=new Blob([_],{type:"image/svg+xml;charset=utf-8"}),Y=URL.createObjectURL(te),le=document.createElement("a");le.href=Y,le.download=`${this.barcodeValue||"barcode"}.svg`,le.click(),URL.revokeObjectURL(Y),alert("Export to PNG failed due to browser restrictions. An SVG of the barcode was downloaded instead.")}},N.onerror=B=>{console.error("Barcode image rendering failed",B),alert("Failed to render barcode image for export"),URL.revokeObjectURL(w)},N.src=w}catch(C){console.error(C),alert("Failed to export label")}}applyParsedScan(i){if(!i)return;let c=i.split("|").map(u=>u.trim());c.length>=4?(this.fields.styleModel=c[0]||this.fields.styleModel,this.fields.leather=c[1]||this.fields.leather,this.fields.color=c[2]||this.fields.color,this.fields.size=c[3]||this.fields.size,c[4]&&(this.fields.barcode=c[4])):c.length===1&&(this.fields.barcode=c[0]),this.render()}ngOnDestroy(){window.removeEventListener("barcode:apply",this._applyListener)}static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["barcode-generator"]],viewQuery:function(c,u){if(c&1&&(Bi(og,5),Bi(ag,5)),c&2){let h;ki(h=Fi())&&(u.barcodeEl=h.first),ki(h=Fi())&&(u.labelPreview=h.first)}},decls:70,vars:14,consts:[["labelPreview",""],["barcode",""],[1,"card","barcode-generator"],[1,"card-header"],[1,"fa","fa-barcode"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"barcode-form",3,"ngSubmit"],[1,"mb-2"],[1,"form-label"],["name","customerPo",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["name","custReference",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["name","styleModel",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"mb-2","row","g-2"],[1,"col"],["name","leather",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["name","color",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-auto"],["name","size",1,"form-control","form-control-sm",2,"width","70px",3,"ngModelChange","ngModel"],[1,"mb-3"],["name","barcode","placeholder","Leave empty to use Style/Model or auto-gen",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-link","btn-sm","text-muted",3,"click"],[1,"col-md-6","d-flex","justify-content-center","align-items-start"],[1,"label-preview"],[1,"label-top"],[1,"label-body"],[1,"small","text-muted","top-left"],[1,"small","text-muted"],[1,"h6","mt-2","mb-1","fw-bold"],[1,"small"],[1,"fw-bold","mt-1"],[1,"fw-bold"],[1,"label-barcode"],[1,"barcode-text"]],template:function(c,u){if(c&1){let h=Tr();H(0,"div",2)(1,"div",3)(2,"h5"),ue(3,"i",4),V(4," Barcode Label"),X()(),H(5,"div",5)(6,"div",6)(7,"div",7)(8,"form",8),at("ngSubmit",function(){return it(h),ot(u.render())}),H(9,"div",9)(10,"label",10),V(11,"Customer / PO#"),X(),H(12,"input",11),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.customerPo,C)||(u.fields.customerPo=C),ot(C)}),X()(),H(13,"div",9)(14,"label",10),V(15,"Cust.Reference"),X(),H(16,"input",12),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.custReference,C)||(u.fields.custReference=C),ot(C)}),X()(),H(17,"div",9)(18,"label",10)(19,"b"),V(20,"Style/Model No."),X()(),H(21,"input",13),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.styleModel,C)||(u.fields.styleModel=C),ot(C)}),X()(),H(22,"div",14)(23,"div",15)(24,"label",10),V(25,"Leather"),X(),H(26,"input",16),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.leather,C)||(u.fields.leather=C),ot(C)}),X()(),H(27,"div",15)(28,"label",10)(29,"b"),V(30,"Color"),X()(),H(31,"input",17),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.color,C)||(u.fields.color=C),ot(C)}),X()(),H(32,"div",18)(33,"label",10)(34,"b"),V(35,"Size"),X()(),H(36,"input",19),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.size,C)||(u.fields.size=C),ot(C)}),X()()(),H(37,"div",20)(38,"label",10),V(39,"Barcode Value (optional)"),X(),H(40,"input",21),Bt("ngModelChange",function(C){return it(h),Pt(u.fields.barcode,C)||(u.fields.barcode=C),ot(C)}),X()(),H(41,"div",22)(42,"button",23),V(43,"Generate"),X(),H(44,"button",24),at("click",function(){return it(h),ot(u.download())}),V(45,"Download PNG"),X(),H(46,"button",25),at("click",function(){return it(h),ot(u.fields={customerPo:"",custReference:"",styleModel:"",leather:"",color:"",size:"",barcode:""})}),V(47,"Clear"),X()()()(),H(48,"div",26)(49,"div",27,0),ue(51,"div",28),H(52,"div",29)(53,"div",30),V(54),X(),H(55,"div",31),V(56),X(),H(57,"div",32),V(58),X(),H(59,"div",33),V(60),X(),H(61,"div",34),V(62),X(),H(63,"div",35),V(64),X()(),H(65,"div",36),La(),ue(66,"svg",null,1),Pa(),H(68,"div",37),V(69),X()()()()()()()}c&2&&(se(12),Lt("ngModel",u.fields.customerPo),se(4),Lt("ngModel",u.fields.custReference),se(5),Lt("ngModel",u.fields.styleModel),se(5),Lt("ngModel",u.fields.leather),se(5),Lt("ngModel",u.fields.color),se(5),Lt("ngModel",u.fields.size),se(4),Lt("ngModel",u.fields.barcode),se(14),We(u.fields.customerPo||"Customer / PO#"),se(2),We(u.fields.custReference||"Cust.Reference"),se(2),We(u.fields.styleModel||"Style/Model No."),se(2),We(u.fields.leather||"Leather"),se(2),We(u.fields.color||"Color"),se(2),We(u.fields.size||"Size"),se(5),We(u.barcodeValue))},dependencies:[Vt,on,Dr,On,vn,Nr,Rr,is],styles:[".barcode-generator[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:12px;background-color:#fff;box-shadow:0 2px 8px #00000014;margin-bottom:16px}.barcode-generator[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:12px 12px 0 0;padding:8px 12px}.barcode-generator[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.5px;color:#fff;margin:0;font-size:1.1rem;display:flex;align-items:center;gap:8px}.barcode-generator[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.barcode-generator[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{font-size:.95rem;padding:12px}.barcode-generator[_ngcontent-%COMP%]   .barcode-form[_ngcontent-%COMP%]{max-width:100%}.barcode-generator[_ngcontent-%COMP%]   .label-preview[_ngcontent-%COMP%]{width:320px;border:1px solid #ddd;background:#fff;padding:.6rem;box-shadow:0 1px 2px #00000008}.barcode-generator[_ngcontent-%COMP%]   .label-top[_ngcontent-%COMP%]{border-bottom:1px dashed #333;height:8px;margin-bottom:8px}.barcode-generator[_ngcontent-%COMP%]   .label-body[_ngcontent-%COMP%]{font-size:13px;color:#222}.barcode-generator[_ngcontent-%COMP%]   .label-barcode[_ngcontent-%COMP%]{text-align:center;margin-top:8px}.barcode-generator[_ngcontent-%COMP%]   .label-barcode[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:60px}.barcode-generator[_ngcontent-%COMP%]   .barcode-text[_ngcontent-%COMP%]{margin-top:4px;font-size:13px;letter-spacing:2px}.barcode-generator[_ngcontent-%COMP%]   .d-flex.gap-2[_ngcontent-%COMP%]{gap:.5rem}"]})};var Jr=new Da("API_BASE_URL");var $r=class a{http=Be($a);baseUrl="";constructor(){let i=Be(Jr,{optional:!0});i&&this.setBaseUrl(i)}setBaseUrl(i){this.baseUrl=i?.replace(/\/$/,"")}fullUrl(i){if(!i)return this.baseUrl;let c=i.startsWith("/")?i.slice(1):i;return`${this.baseUrl}/${c}`}get(i,c){let u=c?new Ja({fromObject:c}):void 0;return this.http.get(this.fullUrl(i),{params:u}).pipe(xn(this.handleError))}post(i,c){return this.http.post(this.fullUrl(i),c).pipe(xn(this.handleError))}put(i,c){return this.http.put(this.fullUrl(i),c).pipe(xn(this.handleError))}delete(i){return this.http.delete(this.fullUrl(i)).pipe(xn(this.handleError))}handleError(i){return console.error("API error",i),Sr(()=>i)}static \u0275fac=function(c){return new(c||a)};static \u0275prov=jt({token:a,factory:a.\u0275fac,providedIn:"root"})};var ei=class a{api=Be($r);saveScans(i){return this.api.post("scans",{items:i})}static \u0275fac=function(c){return new(c||a)};static \u0275prov=jt({token:a,factory:a.\u0275fac,providedIn:"root"})};function sg(a,i){if(a&1){let c=Tr();Me(0,"tr")(1,"td"),V(2),Ne(),Me(3,"td"),V(4),Ne(),Me(5,"td"),V(6),Ne(),Me(7,"td"),V(8),Ne(),Me(9,"td"),V(10),Ne(),Me(11,"td",6),V(12),Ne(),Me(13,"td"),V(14),Xa(15,"date"),Ne(),Me(16,"td")(17,"button",7),Tn("click",function(){let h=it(c).$index,p=Or();return ot(p.apply(h))}),V(18,"Apply"),Ne(),Me(19,"button",8),Tn("click",function(){let h=it(c).$index,p=Or();return ot(p.copy(h))}),V(20,"Copy"),Ne(),Me(21,"button",9),Tn("click",function(){let h=it(c).$index,p=Or();return ot(p.remove(h))}),V(22,"Delete"),Ne()()()}if(a&2){let c=i.$implicit,u=i.$index;se(2),We(u+1),se(2),We(c.parsed?c.styleModel:"-"),se(2),We(c.parsed?c.leather:"-"),se(2),We(c.parsed?c.color:"-"),se(2),We(c.parsed?c.size:"-"),se(2),We(c.barcode||c.value),se(2),We(Wa(15,7,c.time,"short"))}}function lg(a,i){a&1&&(Me(0,"tr")(1,"td",10),V(2,"No scans yet"),Ne()())}var ti=class a{scans=[];bs=Be(ei);remove(i){this.scans.splice(i,1)}apply(i){let c=this.scans[i];if(!c)return;let u=c.value;navigator&&navigator.clipboard&&navigator.clipboard.writeText(u).catch(()=>{}),window.dispatchEvent(new CustomEvent("barcode:apply",{detail:u})),alert("Scanned value applied to generator and copied to clipboard")}copy(i){let c=this.scans[i];if(!c)return;let u=c.value;navigator&&navigator.clipboard?navigator.clipboard.writeText(u).then(()=>alert("Copied to clipboard")).catch(()=>alert("Copy failed")):alert("Clipboard not available")}clear(){this.scans=[]}save(){if(!this.scans||this.scans.length===0){alert("No scans to save");return}this.bs.saveScans(this.scans).subscribe({next:()=>{alert("Scans saved successfully"),this.clear()},error:i=>{console.error(i),alert("Failed to save scans")}})}static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["scan-grid"]],inputs:{scans:"scans"},decls:31,vars:1,consts:[[1,"scan-grid"],[1,"table","table-sm"],[1,"table-dark"],[1,"actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"text-monospace"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"btn","btn-sm","btn-outline-secondary","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","8",1,"text-center"]],template:function(c,u){c&1&&(Me(0,"div",0)(1,"h5"),V(2,"Scanned Items"),Ne(),Me(3,"table",1)(4,"thead",2)(5,"tr")(6,"th"),V(7,"#"),Ne(),Me(8,"th"),V(9,"Style/Model"),Ne(),Me(10,"th"),V(11,"Leather"),Ne(),Me(12,"th"),V(13,"Color"),Ne(),Me(14,"th"),V(15,"Size"),Ne(),Me(16,"th"),V(17,"Barcode"),Ne(),Me(18,"th"),V(19,"Time"),Ne(),Me(20,"th"),V(21,"Actions"),Ne()()(),Me(22,"tbody"),Va(23,sg,23,10,"tr",null,ja),Ua(25,lg,3,0,"tr"),Ne()(),Me(26,"div",3)(27,"button",4),Tn("click",function(){return u.save()}),V(28,"Save"),Ne(),Me(29,"button",5),Tn("click",function(){return u.clear()}),V(30,"Clear"),Ne()()()),c&2&&(se(23),za(u.scans),se(2),Ha(!u.scans||u.scans.length===0?25:-1))},dependencies:[Vt,on,Qa],styles:[".scan-grid[_ngcontent-%COMP%]{margin-top:1rem;font-size:.95rem}.scan-grid[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;word-wrap:break-word}.scan-grid[_ngcontent-%COMP%]   thead.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;font-weight:600;border:none;padding:16px 12px;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}.scan-grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.scan-grid[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.scan-grid[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}"]})};var z=(function(a){return a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",a})(z||{}),H1=new Map([[z.QR_CODE,"QR_CODE"],[z.AZTEC,"AZTEC"],[z.CODABAR,"CODABAR"],[z.CODE_39,"CODE_39"],[z.CODE_93,"CODE_93"],[z.CODE_128,"CODE_128"],[z.DATA_MATRIX,"DATA_MATRIX"],[z.MAXICODE,"MAXICODE"],[z.ITF,"ITF"],[z.EAN_13,"EAN_13"],[z.EAN_8,"EAN_8"],[z.PDF_417,"PDF_417"],[z.RSS_14,"RSS_14"],[z.RSS_EXPANDED,"RSS_EXPANDED"],[z.UPC_A,"UPC_A"],[z.UPC_E,"UPC_E"],[z.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function j1(a){return Object.values(z).includes(a)}var Gt=(function(a){return a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",a})(Gt||{}),xt=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[Gt.SCAN_TYPE_CAMERA,Gt.SCAN_TYPE_FILE],a})();var ni=(function(){function a(i,c){this.format=i,this.formatName=c}return a.prototype.toString=function(){return this.formatName},a.create=function(i){if(!H1.has(i))throw"".concat(i," not in html5QrcodeSupportedFormatsTextMap");return new a(i,H1.get(i))},a})();var Zo=(function(){function a(){}return a.createFromText=function(i){var c={text:i};return{decodedText:i,result:c}},a.createFromQrcodeResult=function(i){return{decodedText:i.text,result:i}},a})();var V1=(function(a){return a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",a})(V1||{}),ri=(function(){function a(){}return a.createFrom=function(i){return{errorMessage:i,type:V1.UNKWOWN_ERROR}},a})();var ii=(function(){function a(i){this.verbose=i}return a.prototype.log=function(i){this.verbose&&console.log(i)},a.prototype.warn=function(i){this.verbose&&console.warn(i)},a.prototype.logError=function(i,c){(this.verbose||c===!0)&&console.error(i)},a.prototype.logErrors=function(i){if(i.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(i)},a})();function St(a){return typeof a>"u"||a===null}function z1(a,i,c){return a>c?c:a<i?i:a}var cn=(function(){function a(){}return a.codeParseError=function(i){return"QR code parse error, error = ".concat(i)},a.errorGettingUserMedia=function(i){return"Error getting userMedia, error = ".concat(i)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})();var ge=(function(){function a(){}return a.scanningStatus=function(){return"Scanning"},a.idleStatus=function(){return"Idle"},a.errorStatus=function(){return"Error"},a.permissionStatus=function(){return"Permission"},a.noCameraFoundErrorStatus=function(){return"No Cameras"},a.lastMatch=function(i){return"Last Match: ".concat(i)},a.codeScannerTitle=function(){return"Code Scanner"},a.cameraPermissionTitle=function(){return"Request Camera Permissions"},a.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},a.noCameraFound=function(){return"No camera found"},a.scanButtonStopScanningText=function(){return"Stop Scanning"},a.scanButtonStartScanningText=function(){return"Start Scanning"},a.torchOnButton=function(){return"Switch On Torch"},a.torchOffButton=function(){return"Switch Off Torch"},a.torchOnFailedMessage=function(){return"Failed to turn on torch"},a.torchOffFailedMessage=function(){return"Failed to turn off torch"},a.scanButtonScanningStarting=function(){return"Launching Camera..."},a.textIfCameraScanSelected=function(){return"Scan an Image File"},a.textIfFileScanSelected=function(){return"Scan using camera directly"},a.selectCamera=function(){return"Select Camera"},a.fileSelectionChooseImage=function(){return"Choose Image"},a.fileSelectionChooseAnother=function(){return"Choose Another"},a.fileSelectionNoImageSelected=function(){return"No image choosen"},a.anonymousCameraPrefix=function(){return"Anonymous Camera"},a.dragAndDropMessage=function(){return"Or drop an image to scan"},a.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},a.zoom=function(){return"zoom"},a.loadingImage=function(){return"Loading image..."},a.cameraScanAltText=function(){return"Camera based scan"},a.fileScanAltText=function(){return"Fule based scan"},a})();var qo=(function(){function a(){}return a.poweredBy=function(){return"Powered by "},a.reportIssues=function(){return"Report issues"},a})();var Qo=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(i,c){if(typeof i!="object"){var u=typeof i;return c.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(u,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],p=new Set(h),C=Object.keys(i),_=0,M=C;_<M.length;_++){var w=M[_];if(p.has(w))return c.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},a})();var ye=Na(X1());var Ko=(function(){function a(i,c,u){if(this.formatMap=new Map([[z.QR_CODE,ye.BarcodeFormat.QR_CODE],[z.AZTEC,ye.BarcodeFormat.AZTEC],[z.CODABAR,ye.BarcodeFormat.CODABAR],[z.CODE_39,ye.BarcodeFormat.CODE_39],[z.CODE_93,ye.BarcodeFormat.CODE_93],[z.CODE_128,ye.BarcodeFormat.CODE_128],[z.DATA_MATRIX,ye.BarcodeFormat.DATA_MATRIX],[z.MAXICODE,ye.BarcodeFormat.MAXICODE],[z.ITF,ye.BarcodeFormat.ITF],[z.EAN_13,ye.BarcodeFormat.EAN_13],[z.EAN_8,ye.BarcodeFormat.EAN_8],[z.PDF_417,ye.BarcodeFormat.PDF_417],[z.RSS_14,ye.BarcodeFormat.RSS_14],[z.RSS_EXPANDED,ye.BarcodeFormat.RSS_EXPANDED],[z.UPC_A,ye.BarcodeFormat.UPC_A],[z.UPC_E,ye.BarcodeFormat.UPC_E],[z.UPC_EAN_EXTENSION,ye.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ye)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=c,this.logger=u;var h=this.createZXingFormats(i),p=new Map;p.set(ye.DecodeHintType.POSSIBLE_FORMATS,h),p.set(ye.DecodeHintType.TRY_HARDER,!1),this.hints=p}return a.prototype.decodeAsync=function(i){var c=this;return new Promise(function(u,h){try{u(c.decode(i))}catch(p){h(p)}})},a.prototype.decode=function(i){var c=new ye.MultiFormatReader(this.verbose,this.hints),u=new ye.HTMLCanvasElementLuminanceSource(i),h=new ye.BinaryBitmap(new ye.HybridBinarizer(u)),p=c.decode(h);return{text:p.text,format:ni.create(this.toHtml5QrcodeSupportedFormats(p.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(c,u,h){i.set(c,u)}),i},a.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},a.prototype.createZXingFormats=function(i){for(var c=[],u=0,h=i;u<h.length;u++){var p=h[u];this.formatMap.has(p)?c.push(this.formatMap.get(p)):this.logger.logError("".concat(p," is not supported by")+"ZXingHtml5QrcodeShim")}return c},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})();var cg=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},ug=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Jo=(function(){function a(i,c,u){if(this.formatMap=new Map([[z.QR_CODE,"qr_code"],[z.AZTEC,"aztec"],[z.CODABAR,"codabar"],[z.CODE_39,"code_39"],[z.CODE_93,"code_93"],[z.CODE_128,"code_128"],[z.DATA_MATRIX,"data_matrix"],[z.ITF,"itf"],[z.EAN_13,"ean_13"],[z.EAN_8,"ean_8"],[z.PDF_417,"pdf417"],[z.UPC_A,"upc_a"],[z.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=u;var h=this.createBarcodeDetectorFormats(i);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var i=new BarcodeDetector({formats:["qr_code"]});return typeof i<"u"},a.prototype.decodeAsync=function(i){return cg(this,void 0,void 0,function(){var c,u;return ug(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(i)];case 1:if(c=h.sent(),!c||c.length===0)throw"No barcode or QR code detected.";return u=this.selectLargestBarcode(c),[2,{text:u.rawValue,format:ni.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(i){for(var c=null,u=0,h=0,p=i;h<p.length;h++){var C=p[h],_=C.boundingBox.width*C.boundingBox.height;_>u&&(u=_,c=C)}if(!c)throw"No largest barcode found";return c},a.prototype.createBarcodeDetectorFormats=function(i){for(var c=[],u=0,h=i;u<h.length;u++){var p=h[u];this.formatMap.has(p)?c.push(this.formatMap.get(p)):this.logger.warn("".concat(p," is not supported by")+"BarcodeDetectorDelegate")}return{formats:c}},a.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},a.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(c,u,h){i.set(c,u)}),i},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})();var W1=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},Y1=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Z1=(function(){function a(i,c,u,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=u,c&&Jo.isSupported()?(this.primaryDecoder=new Jo(i,u,h),this.secondaryDecoder=new Ko(i,u,h)):this.primaryDecoder=new Ko(i,u,h)}return a.prototype.decodeAsync=function(i){return W1(this,void 0,void 0,function(){var c;return Y1(this,function(u){switch(u.label){case 0:c=performance.now(),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(i)];case 2:return[2,u.sent()];case 3:return this.possiblyLogPerformance(c),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(i){return W1(this,void 0,void 0,function(){var c,u;return Y1(this,function(h){switch(h.label){case 0:c=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(i)];case 2:return[2,h.sent()];case 3:if(u=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(i)];throw u;case 4:return this.possiblyLogPerformance(c),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(i){if(this.verbose){var c=performance.now()-i;this.executionResults.push(c),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var i=0,c=0,u=this.executionResults;c<u.length;c++){var h=u[c];i+=h}var p=i/this.executionResults.length;console.log("".concat(p," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})();var $o=(function(){var a=function(i,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(u[p]=h[p])},a(i,c)};return function(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(i,c);function u(){this.constructor=i}i.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),ai=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},si=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},q1=(function(){function a(i,c){this.name=i,this.track=c}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(i){var c={};c[this.name]=i;var u={advanced:[c]};return this.track.applyConstraints(u)},a.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var c=i[this.name];return c}return null},a})(),fg=(function(a){$o(i,a);function i(c,u){return a.call(this,c,u)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(c){var u={};u[this.name]=c;var h={advanced:[u]};return this.track.applyConstraints(h)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var c=this.track.getCapabilities(),u=c[this.name];return{min:u.min,max:u.max,step:u.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i})(q1),hg=(function(a){$o(i,a);function i(c){return a.call(this,"zoom",c)||this}return i})(fg),dg=(function(a){$o(i,a);function i(c){return a.call(this,"torch",c)||this}return i})(q1),gg=(function(){function a(i){this.track=i}return a.prototype.zoomFeature=function(){return new hg(this.track)},a.prototype.torchFeature=function(){return new dg(this.track)},a})(),xg=(function(){function a(i,c,u){this.isClosed=!1,this.parentElement=i,this.mediaStream=c,this.callbacks=u,this.surface=this.createVideoElement(this.parentElement.clientWidth),i.append(this.surface)}return a.prototype.createVideoElement=function(i){var c=document.createElement("video");return c.style.width="".concat(i,"px"),c.style.display="block",c.muted=!0,c.setAttribute("muted","true"),c.playsInline=!0,c},a.prototype.setupSurface=function(){var i=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var c=function(){var u=i.surface.clientWidth,h=i.surface.clientHeight;i.callbacks.onRenderSurfaceReady(u,h),i.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(i,c,u,h){return ai(this,void 0,void 0,function(){var p,C;return si(this,function(_){switch(_.label){case 0:return p=new a(i,c,h),u.aspectRatio?(C={aspectRatio:u.aspectRatio},[4,p.getFirstTrackOrFail().applyConstraints(C)]):[3,2];case 1:_.sent(),_.label=2;case 2:return p.setupSurface(),[2,p]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(i){this.failIfClosed();var c=this,u=function(){setTimeout(i,200),c.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(i){return ai(this,void 0,void 0,function(){return si(this,function(c){if("aspectRatio"in i)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(i)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var i=this;return new Promise(function(c,u){var h=i.mediaStream.getVideoTracks(),p=h.length,C=0;i.mediaStream.getVideoTracks().forEach(function(_){i.mediaStream.removeTrack(_),_.stop(),++C,C>=p&&(i.isClosed=!0,i.parentElement.removeChild(i.surface),c())})})},a.prototype.getCapabilities=function(){return new gg(this.getFirstTrackOrFail())},a})(),Q1=(function(){function a(i){this.mediaStream=i}return a.prototype.render=function(i,c,u){return ai(this,void 0,void 0,function(){return si(this,function(h){return[2,xg.create(i,this.mediaStream,c,u)]})})},a.create=function(i){return ai(this,void 0,void 0,function(){var c,u;return si(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:i},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return u=h.sent(),[2,new a(u)]}})})},a})();var K1=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},J1=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},$1=(function(){function a(){}return a.failIfNotSupported=function(){return K1(this,void 0,void 0,function(){return J1(this,function(i){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(i){return K1(this,void 0,void 0,function(){return J1(this,function(c){return[2,Q1.create(i)]})})},a})();var pg=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},mg=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},e0=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var i=MediaStreamTrack;return MediaStreamTrack&&i.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var i=cn.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(i=cn.insecureContextCameraQueryError()),Promise.reject(i)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var i=location.host.split(":")[0];return i==="127.0.0.1"||i==="localhost"},a.getCamerasFromMediaDevices=function(){return pg(this,void 0,void 0,function(){var i,c,u,h,p,C,_;return mg(this,function(M){switch(M.label){case 0:return i=function(w){for(var N=w.getVideoTracks(),B=0,fe=N;B<fe.length;B++){var Q=fe[B];Q.enabled=!1,Q.stop(),w.removeTrack(Q)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return c=M.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(u=M.sent(),h=[],p=0,C=u;p<C.length;p++)_=C[p],_.kind==="videoinput"&&h.push({id:_.deviceId,label:_.label});return i(c),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(i,c){var u=function(p){for(var C=[],_=0,M=p;_<M.length;_++){var w=M[_];w.kind==="video"&&C.push({id:w.id,label:w.label})}i(C)},h=MediaStreamTrack;h.getSources(u)})},a})();var De=(function(a){return a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED",a})(De||{}),wg=(function(){function a(){this.state=De.NOT_STARTED,this.onGoingTransactionNewState=De.UNKNOWN}return a.prototype.directTransition=function(i){this.failIfTransitionOngoing(),this.validateTransition(i),this.state=i},a.prototype.startTransition=function(i){return this.failIfTransitionOngoing(),this.validateTransition(i),this.onGoingTransactionNewState=i,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===De.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var i=this.onGoingTransactionNewState;this.onGoingTransactionNewState=De.UNKNOWN,this.directTransition(i)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===De.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=De.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==De.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(i){switch(this.state){case De.UNKNOWN:throw"Transition from unknown is not allowed";case De.NOT_STARTED:this.failIfNewStateIs(i,[De.PAUSED]);break;case De.SCANNING:break;case De.PAUSED:break}},a.prototype.failIfNewStateIs=function(i,c){for(var u=0,h=c;u<h.length;u++){var p=h[u];if(i===p)throw"Cannot transition from ".concat(this.state," to ").concat(i)}},a})(),Eg=(function(){function a(i){this.stateManager=i}return a.prototype.startTransition=function(i){return this.stateManager.startTransition(i)},a.prototype.directTransition=function(i){this.stateManager.directTransition(i)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===De.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==De.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===De.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===De.PAUSED},a})();var t0=(function(){function a(){}return a.create=function(){return new Eg(new wg)},a})();var Cg=(function(){var a=function(i,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(u[p]=h[p])},a(i,c)};return function(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(i,c);function u(){this.constructor=i}i.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),Et=(function(a){Cg(i,a);function i(){return a!==null&&a.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(xt),Ag=(function(){function a(i,c){this.logger=c,this.fps=Et.SCAN_DEFAULT_FPS,i?(i.fps&&(this.fps=i.fps),this.disableFlip=i.disableFlip===!0,this.qrbox=i.qrbox,this.aspectRatio=i.aspectRatio,this.videoConstraints=i.videoConstraints):this.disableFlip=Et.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Qo.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!St(this.qrbox)},a.create=function(i,c){return new a(i,c)},a})(),wn=(function(){function a(i,c){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.elementId=i,this.verbose=!1;var u,h;typeof c=="boolean"?this.verbose=c===!0:c&&(h=c,this.verbose=h.verbose===!0,u=h.experimentalFeatures),this.logger=new ii(this.verbose),this.qrcode=new Z1(this.getSupportedFormats(c),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=t0.create()}return a.prototype.start=function(i,c,u,h){var p=this;if(!i)throw"cameraIdOrConfig is required";if(!u||typeof u!="function")throw"qrCodeSuccessCallback is required and should be a function.";var C;h?C=h:C=this.verbose?this.logger.log:function(){};var _=Ag.create(c,this.logger);this.clearElement();var M=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?M=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=M,N=document.getElementById(this.elementId),B=N.clientWidth?N.clientWidth:Et.DEFAULT_WIDTH;N.style.position="relative",this.shouldScan=!0,this.element=N;var fe=this,Q=this.stateManagerProxy.startTransition(De.SCANNING);return new Promise(function(ke,_e){var te=w?_.videoConstraints:fe.createVideoConstraints(i);if(!te){Q.cancel(),_e("videoConstraints should be defined");return}var Y={};(!w||_.aspectRatio)&&(Y.aspectRatio=_.aspectRatio);var le={onRenderSurfaceReady:function(kt,de){fe.setupUi(kt,de,_),fe.isScanning=!0,fe.foreverScan(_,u,C)}};$1.failIfNotSupported().then(function(kt){kt.create(te).then(function(de){return de.render(p.element,Y,le).then(function(k){fe.renderedCamera=k,Q.execute(),ke(null)}).catch(function(k){Q.cancel(),_e(k)})}).catch(function(de){Q.cancel(),_e(cn.errorGettingUserMedia(de))})}).catch(function(kt){Q.cancel(),_e(cn.cameraStreamingNotSupported())})})},a.prototype.pause=function(i){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(De.PAUSED),this.showPausedState(),(St(i)||i!==!0)&&(i=!1),i&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var i=this,c=function(){i.stateManagerProxy.directTransition(De.SCANNING),i.hidePausedState()};if(!this.renderedCamera.isPaused()){c();return}this.renderedCamera.resume(function(){c()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var i=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var c=this.stateManagerProxy.startTransition(De.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var u=function(){if(i.element){var p=document.getElementById(Et.SHADED_REGION_ELEMENT_ID);p&&i.element.removeChild(p)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),u(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),c.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(i,c){return this.scanFileV2(i,c).then(function(u){return u.decodedText})},a.prototype.scanFileV2=function(i,c){var u=this;if(!i||!(i instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(St(c)&&(c=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,p){u.possiblyCloseLastScanImageFile(),u.clearElement(),u.lastScanImageFile=URL.createObjectURL(i);var C=new Image;C.onload=function(){var _=C.width,M=C.height,w=document.getElementById(u.elementId),N=w.clientWidth?w.clientWidth:Et.DEFAULT_WIDTH,B=Math.max(w.clientHeight?w.clientHeight:M,Et.FILE_SCAN_MIN_HEIGHT),fe=u.computeCanvasDrawConfig(_,M,N,B);if(c){var Q=u.createCanvasElement(N,B,"qr-canvas-visible");Q.style.display="inline-block",w.appendChild(Q);var ke=Q.getContext("2d");if(!ke)throw"Unable to get 2d context from canvas";ke.canvas.width=N,ke.canvas.height=B,ke.drawImage(C,0,0,_,M,fe.x,fe.y,fe.width,fe.height)}var _e=Et.FILE_SCAN_HIDDEN_CANVAS_PADDING,te=Math.max(C.width,fe.width),Y=Math.max(C.height,fe.height),le=te+2*_e,kt=Y+2*_e,de=u.createCanvasElement(le,kt);w.appendChild(de);var k=de.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=le,k.canvas.height=kt,k.drawImage(C,0,0,_,M,_e,_e,te,Y);try{u.qrcode.decodeRobustlyAsync(de).then(function(me){h(Zo.createFromQrcodeResult(me))}).catch(p)}catch(me){p("QR code parse error, error = ".concat(me))}},C.onerror=p,C.onabort=p,C.onstalled=p,C.onsuspend=p,C.src=URL.createObjectURL(i)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return e0.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(i){if(i){if(!Qo.isMediaStreamConstraintsValid(i,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(i)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(i){var c=[z.QR_CODE,z.AZTEC,z.CODABAR,z.CODE_39,z.CODE_93,z.CODE_128,z.DATA_MATRIX,z.MAXICODE,z.ITF,z.EAN_13,z.EAN_8,z.PDF_417,z.RSS_14,z.RSS_EXPANDED,z.UPC_A,z.UPC_E,z.UPC_EAN_EXTENSION];if(!i||typeof i=="boolean"||!i.formatsToSupport)return c;if(!Array.isArray(i.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(i.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var u=[],h=0,p=i.formatsToSupport;h<p.length;h++){var C=p[h];j1(C)?u.push(C):this.logger.warn("Invalid format: ".concat(C," passed in config, ignoring."))}if(u.length===0)throw"None of formatsToSupport match supported values.";return u},a.prototype.getUseBarCodeDetectorIfSupported=function(i){if(St(i))return!0;if(!St(i.useBarCodeDetectorIfSupported))return i.useBarCodeDetectorIfSupported!==!1;if(St(i.experimentalFeatures))return!0;var c=i.experimentalFeatures;return St(c.useBarCodeDetectorIfSupported)?!0:c.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(i,c,u){var h=this,p=u.qrbox;this.validateQrboxConfig(p);var C=this.toQrdimensions(i,c,p),_=function(w){if(w<Et.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Et.MIN_QR_BOX_SIZE,"px.")},M=function(w){return w>i&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=i),w};_(C.width),_(C.height),C.width=M(C.width)},a.prototype.validateQrboxConfig=function(i){if(typeof i!="number"&&typeof i!="function"&&(i.width===void 0||i.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(i,c,u){if(typeof u=="number")return{width:u,height:u};if(typeof u=="function")try{return u(i,c)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return u},a.prototype.setupUi=function(i,c,u){u.isShadedBoxEnabled()&&this.validateQrboxSize(i,c,u);var h=St(u.qrbox)?{width:i,height:c}:u.qrbox;this.validateQrboxConfig(h);var p=this.toQrdimensions(i,c,h);p.height>c&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var C=u.isShadedBoxEnabled()&&p.height<=c,_={x:0,y:0,width:i,height:c},M=C?this.getShadedRegionBounds(i,c,p):_,w=this.createCanvasElement(M.width,M.height),N={willReadFrequently:!0},B=w.getContext("2d",N);B.canvas.width=M.width,B.canvas.height=M.height,this.element.append(w),C&&this.possiblyInsertShadingElement(this.element,i,c,p),this.createScannerPausedUiElement(this.element),this.qrRegion=M,this.context=B,this.canvasElement=w},a.prototype.createScannerPausedUiElement=function(i){var c=document.createElement("div");c.innerText=cn.scannerPaused(),c.style.display="none",c.style.position="absolute",c.style.top="0px",c.style.zIndex="1",c.style.background="rgba(9, 9, 9, 0.46)",c.style.color="#FFECEC",c.style.textAlign="center",c.style.width="100%",i.appendChild(c),this.scannerPausedUiElement=c},a.prototype.scanContext=function(i,c){var u=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return i(h.text,Zo.createFromQrcodeResult(h)),u.possiblyUpdateShaders(!0),!0}).catch(function(h){u.possiblyUpdateShaders(!1);var p=cn.codeParseError(h);return c(p,ri.createFrom(p)),!1})},a.prototype.foreverScan=function(i,c,u){var h=this;if(this.shouldScan&&this.renderedCamera){var p=this.renderedCamera.getSurface(),C=p.videoWidth/p.clientWidth,_=p.videoHeight/p.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var M=this.qrRegion.width*C,w=this.qrRegion.height*_,N=this.qrRegion.x*C,B=this.qrRegion.y*_;this.context.drawImage(p,N,B,M,w,0,0,this.qrRegion.width,this.qrRegion.height);var fe=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(i,c,u)},h.getTimeoutFps(i.fps))};this.scanContext(c,u).then(function(Q){!Q&&i.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(c,u).finally(function(){fe()})):fe()}).catch(function(Q){h.logger.logError("Error happend while scanning context",Q),fe()})}},a.prototype.createVideoConstraints=function(i){if(typeof i=="string")return{deviceId:{exact:i}};if(typeof i=="object"){var c="facingMode",u="deviceId",h={user:!0,environment:!0},p="exact",C=function(ke){if(ke in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ke,"'")},_=Object.keys(i);if(_.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var M=Object.keys(i)[0];if(M!==c&&M!==u)throw"Only '".concat(c,"' and '").concat(u,"' ")+" are supported for 'cameraIdOrConfig'";if(M===c){var w=i.facingMode;if(typeof w=="string"){if(C(w))return{facingMode:w}}else if(typeof w=="object")if(p in w){if(C(w["".concat(p)]))return{facingMode:{exact:w["".concat(p)]}}}else throw"'facingMode' should be string or object with"+" ".concat(p," as key.");else{var N=typeof w;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var B=i.deviceId;if(typeof B=="string")return{deviceId:B};if(typeof B=="object"){if(p in B)return{deviceId:{exact:B["".concat(p)]}};throw"'deviceId' should be string or object with"+" ".concat(p," as key.")}else{var fe=typeof B;throw"Invalid type of 'deviceId' = ".concat(fe)}}}var Q=typeof i;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Q)},a.prototype.computeCanvasDrawConfig=function(i,c,u,h){if(i<=u&&c<=h){var p=(u-i)/2,C=(h-c)/2;return{x:p,y:C,width:i,height:c}}else{var _=i,M=c;return i>u&&(c=u/i*c,i=u),c>h&&(i=h/c*i,c=h),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(M)+" to ".concat(i,"X").concat(c,".")),this.computeCanvasDrawConfig(i,c,u,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var i=document.getElementById(this.elementId);i&&(i.innerHTML="")},a.prototype.possiblyUpdateShaders=function(i){this.qrMatch!==i&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(c){c.style.backgroundColor=i?Et.BORDER_SHADER_MATCH_COLOR:Et.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=i)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(i,c,u){var h=i,p=c,C=document.createElement("canvas");return C.style.width="".concat(h,"px"),C.style.height="".concat(p,"px"),C.style.display="none",C.id=St(u)?"qr-canvas":u,C},a.prototype.getShadedRegionBounds=function(i,c,u){if(u.width>i||u.height>c)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(i-u.width)/2,y:(c-u.height)/2,width:u.width,height:u.height}},a.prototype.possiblyInsertShadingElement=function(i,c,u,h){if(!(c-h.width<1||u-h.height<1)){var p=document.createElement("div");p.style.position="absolute";var C=(c-h.width)/2,_=(u-h.height)/2;if(p.style.borderLeft="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderRight="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),p.style.boxSizing="border-box",p.style.top="0px",p.style.bottom="0px",p.style.left="0px",p.style.right="0px",p.id="".concat(Et.SHADED_REGION_ELEMENT_ID),c-h.width<11||u-h.height<11)this.hasBorderShaders=!1;else{var M=5,w=40;this.insertShaderBorders(p,w,M,-M,null,0,!0),this.insertShaderBorders(p,w,M,-M,null,0,!1),this.insertShaderBorders(p,w,M,null,-M,0,!0),this.insertShaderBorders(p,w,M,null,-M,0,!1),this.insertShaderBorders(p,M,w+M,-M,null,-M,!0),this.insertShaderBorders(p,M,w+M,null,-M,-M,!0),this.insertShaderBorders(p,M,w+M,-M,null,-M,!1),this.insertShaderBorders(p,M,w+M,null,-M,-M,!1),this.hasBorderShaders=!0}i.append(p)}},a.prototype.insertShaderBorders=function(i,c,u,h,p,C,_){var M=document.createElement("div");M.style.position="absolute",M.style.backgroundColor=Et.BORDER_SHADER_DEFAULT_COLOR,M.style.width="".concat(c,"px"),M.style.height="".concat(u,"px"),h!==null&&(M.style.top="".concat(h,"px")),p!==null&&(M.style.bottom="".concat(p,"px")),_?M.style.left="".concat(C,"px"):M.style.right="".concat(C,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(M),i.appendChild(M)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(i){return 1e3/i},a})();var ea="data:image/svg+xml;base64,",n0=ea+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",r0=ea+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",ta=ea+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",i0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var o0=(function(){function a(){}return a.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},a})(),a0=(function(){function a(){this.data=o0.createDefault();var i=localStorage.getItem(a.LOCAL_STORAGE_KEY);i?this.data=JSON.parse(i):this.reset()}return a.prototype.hasCameraPermissions=function(){return this.data.hasPermission},a.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},a.prototype.setHasPermission=function(i){this.data.hasPermission=i,this.flush()},a.prototype.setLastUsedCameraId=function(i){this.data.lastUsedCameraId=i,this.flush()},a.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},a.prototype.reset=function(){this.data=o0.createDefault(),this.flush()},a.prototype.flush=function(){localStorage.setItem(a.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},a.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",a})();var yg=(function(){function a(){this.infoDiv=document.createElement("div")}return a.prototype.renderInto=function(i){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=qo.poweredBy();var c=document.createElement("a");c.innerText="ScanApp",c.href="https://scanapp.org",c.target="new",c.style.color="white",this.infoDiv.appendChild(c);var u=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(u),this.infoDiv.appendChild(h);var p=document.createElement("a");p.innerText=qo.reportIssues(),p.href="https://github.com/mebjas/html5-qrcode/issues",p.target="new",p.style.color="white",this.infoDiv.appendChild(p),i.appendChild(this.infoDiv)},a.prototype.show=function(){this.infoDiv.style.display="block"},a.prototype.hide=function(){this.infoDiv.style.display="none"},a})(),bg=(function(){function a(i,c){this.isShowingInfoIcon=!0,this.onTapIn=i,this.onTapOut=c,this.infoIcon=document.createElement("img")}return a.prototype.renderInto=function(i){var c=this;this.infoIcon.alt="Info icon",this.infoIcon.src=ta,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(u){return c.onHoverIn()},this.infoIcon.onmouseout=function(u){return c.onHoverOut()},this.infoIcon.onclick=function(u){return c.onClick()},i.appendChild(this.infoIcon)},a.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},a.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},a.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=i0,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=ta,this.infoIcon.style.opacity="0.6")},a})(),s0=(function(){function a(){var i=this;this.infoDiv=new yg,this.infoIcon=new bg(function(){i.infoDiv.show()},function(){i.infoDiv.hide()})}return a.prototype.renderInto=function(i){this.infoDiv.renderInto(i),this.infoIcon.renderInto(i)},a})();var _g=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},Ig=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},na=(function(){function a(){}return a.hasPermissions=function(){return _g(this,void 0,void 0,function(){var i,c,u,h;return Ig(this,function(p){switch(p.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(i=p.sent(),c=0,u=i;c<u.length;c++)if(h=u[c],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},a})();var Yt=(function(){function a(i){this.supportedScanTypes=this.validateAndReturnScanTypes(i)}return a.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},a.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},a.prototype.isCameraScanRequired=function(){for(var i=0,c=this.supportedScanTypes;i<c.length;i++){var u=c[i];if(a.isCameraScanType(u))return!0}return!1},a.isCameraScanType=function(i){return i===Gt.SCAN_TYPE_CAMERA},a.isFileScanType=function(i){return i===Gt.SCAN_TYPE_FILE},a.prototype.validateAndReturnScanTypes=function(i){if(!i||i.length===0)return xt.DEFAULT_SUPPORTED_SCAN_TYPE;var c=xt.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(i.length>c)throw"Max ".concat(c," values expected for ")+"supportedScanTypes";for(var u=0,h=i;u<h.length;u++){var p=h[u];if(!xt.DEFAULT_SUPPORTED_SCAN_TYPE.includes(p))throw"Unsupported scan type ".concat(p)}return i},a})();var Ye=(function(){function a(){}return a.ALL_ELEMENT_CLASS="html5-qrcode-element",a.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",a.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",a.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",a.TORCH_BUTTON_ID="html5-qrcode-button-torch",a.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",a.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",a.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",a.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",a.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",a.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",a})();var pt=(function(){function a(){}return a.createElement=function(i,c){var u=document.createElement(i);return u.id=c,u.classList.add(Ye.ALL_ELEMENT_CLASS),i==="button"&&u.setAttribute("type","button"),u},a})();var c0=function(a,i,c,u){function h(p){return p instanceof c?p:new c(function(C){C(p)})}return new(c||(c=Promise))(function(p,C){function _(N){try{w(u.next(N))}catch(B){C(B)}}function M(N){try{w(u.throw(N))}catch(B){C(B)}}function w(N){N.done?p(N.value):h(N.value).then(_,M)}w((u=u.apply(a,i||[])).next())})},u0=function(a,i){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,h,p,C;return C={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function _(w){return function(N){return M([w,N])}}function M(w){if(u)throw new TypeError("Generator is already executing.");for(;C&&(C=0,w[0]&&(c=0)),c;)try{if(u=1,h&&(p=w[0]&2?h.return:w[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,w[1])).done)return p;switch(h=0,p&&(w=[w[0]&2,p.value]),w[0]){case 0:case 1:p=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,h=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!p||w[1]>p[0]&&w[1]<p[3])){c.label=w[1];break}if(w[0]===6&&c.label<p[1]){c.label=p[1],p=w;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(w);break}p[2]&&c.ops.pop(),c.trys.pop();continue}w=i.call(a,c)}catch(N){w=[6,N],h=0}finally{u=p=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},l0=(function(){function a(i,c,u){this.isTorchOn=!1,this.torchCapability=i,this.buttonController=c,this.onTorchActionFailureCallback=u}return a.prototype.isTorchEnabled=function(){return this.isTorchOn},a.prototype.flipState=function(){return c0(this,void 0,void 0,function(){var i,c;return u0(this,function(u){switch(u.label){case 0:this.buttonController.disable(),i=!this.isTorchOn,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.torchCapability.apply(i)];case 2:return u.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),i),[3,4];case 3:return c=u.sent(),this.propagateFailure(i,c),this.buttonController.enable(),[3,4];case 4:return[2]}})})},a.prototype.updateUiBasedOnLatestSettings=function(i,c){i===c?(this.buttonController.setText(c?ge.torchOffButton():ge.torchOnButton()),this.isTorchOn=c):this.propagateFailure(c),this.buttonController.enable()},a.prototype.propagateFailure=function(i,c){var u=i?ge.torchOnFailedMessage():ge.torchOffFailedMessage();c&&(u+="; Error = "+c),this.onTorchActionFailureCallback(u)},a.prototype.reset=function(){this.isTorchOn=!1},a})(),f0=(function(){function a(i,c){this.onTorchActionFailureCallback=c,this.torchButton=pt.createElement("button",Ye.TORCH_BUTTON_ID),this.torchController=new l0(i,this,c)}return a.prototype.render=function(i,c){var u=this;this.torchButton.innerText=ge.torchOnButton(),this.torchButton.style.display=c.display,this.torchButton.style.marginLeft=c.marginLeft;var h=this;this.torchButton.addEventListener("click",function(p){return c0(u,void 0,void 0,function(){return u0(this,function(C){switch(C.label){case 0:return[4,h.torchController.flipState()];case 1:return C.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove(Ye.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add(Ye.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove(Ye.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add(Ye.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),i.appendChild(this.torchButton)},a.prototype.updateTorchCapability=function(i){this.torchController=new l0(i,this,this.onTorchActionFailureCallback)},a.prototype.getTorchButton=function(){return this.torchButton},a.prototype.hide=function(){this.torchButton.style.display="none"},a.prototype.show=function(){this.torchButton.style.display="inline-block"},a.prototype.disable=function(){this.torchButton.disabled=!0},a.prototype.enable=function(){this.torchButton.disabled=!1},a.prototype.setText=function(i){this.torchButton.innerText=i},a.prototype.reset=function(){this.torchButton.innerText=ge.torchOnButton(),this.torchController.reset()},a.create=function(i,c,u,h){var p=new a(c,h);return p.render(i,u),p},a})();var h0=(function(){function a(i,c,u){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=c?"block":"none",i.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=pt.createElement("button",Ye.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(_){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=pt.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var p=this;this.fileScanInput.addEventListener("change",function(_){if(!(_==null||_.target==null)){var M=_.target;if(!(M.files&&M.files.length===0)){var w=M.files,N=w[0],B=N.name;p.setImageNameToButton(B),u(N)}}});var C=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(C),this.fileBasedScanRegion.addEventListener("dragenter",function(_){p.fileBasedScanRegion.style.border=p.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(_){p.fileBasedScanRegion.style.border=p.fileBasedScanRegionDefaultBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(_){p.fileBasedScanRegion.style.border=p.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(_){_.stopPropagation(),_.preventDefault(),p.fileBasedScanRegion.style.border=p.fileBasedScanRegionDefaultBorder();var M=_.dataTransfer;if(M){var w=M.files;if(!w||w.length===0)return;for(var N=!1,B=0;B<w.length;++B){var fe=w.item(B);if(fe){var Q=/image.*/;if(fe.type.match(Q)){N=!0;var ke=fe.name;p.setImageNameToButton(ke),u(fe),C.innerText=ge.dragAndDropMessage();break}}}N||(C.innerText=ge.dragAndDropMessageOnlyImages())}})}return a.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},a.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},a.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},a.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},a.prototype.createFileBasedScanRegion=function(){var i=document.createElement("div");return i.style.textAlign="center",i.style.margin="auto",i.style.width="80%",i.style.maxWidth="600px",i.style.border=this.fileBasedScanRegionDefaultBorder(),i.style.padding="10px",i.style.marginBottom="10px",i},a.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},a.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},a.prototype.createDragAndDropMessage=function(){var i=document.createElement("div");return i.innerText=ge.dragAndDropMessage(),i.style.fontWeight="400",i},a.prototype.setImageNameToButton=function(i){var c=20;if(i.length>c){var u=i.substring(0,8),h=i.length,p=i.substring(h-8,h);i="".concat(u,"....").concat(p)}var C=ge.fileSelectionChooseAnother()+" - "+i;this.fileSelectionButton.innerText=C},a.prototype.setInitialValueToButton=function(){var i=ge.fileSelectionChooseImage()+" - "+ge.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=i},a.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},a.create=function(i,c,u){var h=new a(i,c,u);return h},a})();var d0=(function(){function a(i){this.selectElement=pt.createElement("select",Ye.CAMERA_SELECTION_SELECT_ID),this.cameras=i,this.options=[]}return a.prototype.render=function(i){var c=document.createElement("span");c.style.marginRight="10px";var u=this.cameras.length;if(u===0)throw new Error("No cameras found");if(u===1)c.style.display="none";else{var h=ge.selectCamera();c.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var p=1,C=0,_=this.cameras;C<_.length;C++){var M=_[C],w=M.id,N=M.label==null?w:M.label;(!N||N==="")&&(N=[ge.anonymousCameraPrefix(),p++].join(" "));var B=document.createElement("option");B.value=w,B.innerText=N,this.options.push(B),this.selectElement.appendChild(B)}c.appendChild(this.selectElement),i.appendChild(c)},a.prototype.disable=function(){this.selectElement.disabled=!0},a.prototype.isDisabled=function(){return this.selectElement.disabled===!0},a.prototype.enable=function(){this.selectElement.disabled=!1},a.prototype.getValue=function(){return this.selectElement.value},a.prototype.hasValue=function(i){for(var c=0,u=this.options;c<u.length;c++){var h=u[c];if(h.value===i)return!0}return!1},a.prototype.setValue=function(i){if(!this.hasValue(i))throw new Error("".concat(i," is not present in the camera list."));this.selectElement.value=i},a.prototype.hasSingleItem=function(){return this.cameras.length===1},a.prototype.numCameras=function(){return this.cameras.length},a.create=function(i,c){var u=new a(c);return u.render(i),u},a})();var g0=(function(){function a(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=pt.createElement("input",Ye.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return a.prototype.render=function(i,c){this.zoomElementContainer.style.display=c?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",i.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var u=ge.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(u),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},a.prototype.onValueChange=function(){var i=ge.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},a.prototype.setValues=function(i,c,u,h){this.rangeInput.min=i.toString(),this.rangeInput.max=c.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=u.toString(),this.onValueChange()},a.prototype.show=function(){this.zoomElementContainer.style.display="block"},a.prototype.hide=function(){this.zoomElementContainer.style.display="none"},a.prototype.setOnCameraZoomValueChangeCallback=function(i){this.onChangeCallback=i},a.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},a.create=function(i,c){var u=new a;return u.render(i,c),u},a})();var Tt=(function(a){return a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",a})(Tt||{});function Sg(a){return{fps:a.fps,qrbox:a.qrbox,aspectRatio:a.aspectRatio,disableFlip:a.disableFlip,videoConstraints:a.videoConstraints}}function Tg(a,i){return{formatsToSupport:a.formatsToSupport,useBarCodeDetectorIfSupported:a.useBarCodeDetectorIfSupported,experimentalFeatures:a.experimentalFeatures,verbose:i}}var Og=(function(){function a(i,c,u){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=i,this.config=this.createConfig(c),this.verbose=u===!0,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.scanTypeSelector=new Yt(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ii(this.verbose),this.persistedDataManager=new a0,c.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return a.prototype.render=function(i,c){var u=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(p,C){if(i)i(p,C);else{if(u.lastMatchFound===p)return;u.lastMatchFound=p,u.setHeaderMessage(ge.lastMatch(p),Tt.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(p,C){c&&c(p,C)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new wn(this.getScanRegionId(),Tg(this.config,this.verbose))},a.prototype.pause=function(i){(St(i)||i!==!0)&&(i=!1),this.getHtml5QrcodeOrFail().pause(i)},a.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},a.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},a.prototype.clear=function(){var i=this,c=function(){var u=document.getElementById(i.elementId);u&&(u.innerHTML="",i.resetBasicLayout(u))};return this.html5Qrcode?new Promise(function(u,h){if(!i.html5Qrcode){u();return}i.html5Qrcode.isScanning?i.html5Qrcode.stop().then(function(p){if(!i.html5Qrcode){u();return}i.html5Qrcode.clear(),c(),u()}).catch(function(p){i.verbose&&i.logger.logError("Unable to stop qrcode scanner",p),h(p)}):(i.html5Qrcode.clear(),c(),u())}):Promise.resolve()},a.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},a.prototype.applyVideoConstraints=function(i){return this.getHtml5QrcodeOrFail().applyVideoConstraints(i)},a.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},a.prototype.createConfig=function(i){return i?(i.fps||(i.fps=xt.SCAN_DEFAULT_FPS),i.rememberLastUsedCamera!==!xt.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(i.rememberLastUsedCamera=xt.DEFAULT_REMEMBER_LAST_CAMERA_USED),i.supportedScanTypes||(i.supportedScanTypes=xt.DEFAULT_SUPPORTED_SCAN_TYPE),i):{fps:xt.SCAN_DEFAULT_FPS,rememberLastUsedCamera:xt.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:xt.DEFAULT_SUPPORTED_SCAN_TYPE}},a.prototype.createBasicLayout=function(i){i.style.position="relative",i.style.padding="0px",i.style.border="1px solid silver",this.createHeader(i);var c=document.createElement("div"),u=this.getScanRegionId();c.id=u,c.style.width="100%",c.style.minHeight="100px",c.style.textAlign="center",i.appendChild(c),Yt.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),p=this.getDashboardId();h.id=p,h.style.width="100%",i.appendChild(h),this.setupInitialDashboard(h)},a.prototype.resetBasicLayout=function(i){i.style.border="none"},a.prototype.setupInitialDashboard=function(i){this.createSection(i),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},a.prototype.createHeader=function(i){var c=document.createElement("div");c.style.textAlign="left",c.style.margin="0px",i.appendChild(c);var u=new s0;u.renderInto(c);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",c.appendChild(h)},a.prototype.createSection=function(i){var c=document.createElement("div");c.id=this.getDashboardSectionId(),c.style.width="100%",c.style.padding="10px 0px 10px 0px",c.style.textAlign="left",i.appendChild(c)},a.prototype.createCameraListUi=function(i,c,u){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(ge.cameraPermissionRequesting());var p=function(){u||h.createPermissionButton(i,c)};wn.getCameras().then(function(C){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),C&&C.length>0?(i.removeChild(c),h.renderCameraSelection(C)):(h.setHeaderMessage(ge.noCameraFound(),Tt.STATUS_WARNING),p())}).catch(function(C){h.persistedDataManager.setHasPermission(!1),u?u.disabled=!1:p(),h.setHeaderMessage(C,Tt.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},a.prototype.createPermissionButton=function(i,c){var u=this,h=pt.createElement("button",this.getCameraPermissionButtonId());h.innerText=ge.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,u.createCameraListUi(i,c,h)}),c.appendChild(h)},a.prototype.createPermissionsUi=function(i,c){var u=this;if(Yt.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){na.hasPermissions().then(function(h){h?u.createCameraListUi(i,c):(u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(i,c))}).catch(function(h){u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(i,c)});return}this.createPermissionButton(i,c)},a.prototype.createSectionControlPanel=function(){var i=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");i.appendChild(c);var u=document.createElement("div");u.id=this.getDashboardSectionCameraScanRegionId(),u.style.display=Yt.isCameraScanType(this.currentScanType)?"block":"none",c.appendChild(u);var h=document.createElement("div");h.style.textAlign="center",u.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(u,h),this.renderFileScanUi(c)},a.prototype.renderFileScanUi=function(i){var c=Yt.isFileScanType(this.currentScanType),u=this,h=function(p){if(!u.html5Qrcode)throw"html5Qrcode not defined";Yt.isFileScanType(u.currentScanType)&&(u.setHeaderMessage(ge.loadingImage()),u.html5Qrcode.scanFileV2(p,!0).then(function(C){u.resetHeaderMessage(),u.qrCodeSuccessCallback(C.decodedText,C)}).catch(function(C){u.setHeaderMessage(C,Tt.STATUS_WARNING),u.qrCodeErrorCallback(C,ri.createFrom(C))}))};this.fileSelectionUi=h0.create(i,c,h)},a.prototype.renderCameraSelection=function(i){var c=this,u=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var p=g0.create(h,!1),C=function(_e){var te=_e.zoomFeature();if(te.isSupported()){p.setOnCameraZoomValueChangeCallback(function(le){te.apply(le)});var Y=1;c.config.defaultZoomValueIfSupported&&(Y=c.config.defaultZoomValueIfSupported),Y=z1(Y,te.min(),te.max()),p.setValues(te.min(),te.max(),Y,te.step()),p.show()}},_=d0.create(h,i),M=document.createElement("span"),w=pt.createElement("button",Ye.CAMERA_START_BUTTON_ID);w.innerText=ge.scanButtonStartScanningText(),M.appendChild(w);var N=pt.createElement("button",Ye.CAMERA_STOP_BUTTON_ID);N.innerText=ge.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,M.appendChild(N);var B,fe=function(_e){if(!_e.torchFeature().isSupported()){B&&B.hide();return}B?B.updateTorchCapability(_e.torchFeature()):B=f0.create(M,_e.torchFeature(),{display:"none",marginLeft:"5px"},function(te){u.setHeaderMessage(te,Tt.STATUS_WARNING)}),B.show()};h.appendChild(M);var Q=function(_e){_e||(w.style.display="none"),w.innerText=ge.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,_e&&(w.style.display="inline-block")};if(w.addEventListener("click",function(_e){w.innerText=ge.scanButtonScanningStarting(),_.disable(),w.disabled=!0,w.style.opacity="0.5",c.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!1),u.resetHeaderMessage();var te=_.getValue();u.persistedDataManager.setLastUsedCameraId(te),u.html5Qrcode.start(te,Sg(u.config),u.qrCodeSuccessCallback,u.qrCodeErrorCallback).then(function(Y){N.disabled=!1,N.style.display="inline-block",Q(!1);var le=u.html5Qrcode.getRunningTrackCameraCapabilities();c.config.showTorchButtonIfSupported===!0&&fe(le),c.config.showZoomSliderIfSupported===!0&&C(le)}).catch(function(Y){u.showHideScanTypeSwapLink(!0),_.enable(),Q(!0),u.setHeaderMessage(Y,Tt.STATUS_WARNING)})}),_.hasSingleItem()&&w.click(),N.addEventListener("click",function(_e){if(!u.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,u.html5Qrcode.stop().then(function(te){c.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!0),_.enable(),w.disabled=!1,N.style.display="none",w.style.display="inline-block",B&&(B.reset(),B.hide()),p.removeOnCameraZoomValueChangeCallback(),p.hide(),u.insertCameraScanImageToScanRegion()}).catch(function(te){N.disabled=!1,u.setHeaderMessage(te,Tt.STATUS_WARNING)})}),u.persistedDataManager.getLastUsedCameraId()){var ke=u.persistedDataManager.getLastUsedCameraId();_.hasValue(ke)?(_.setValue(ke),w.click()):u.persistedDataManager.resetLastUsedCameraId()}},a.prototype.createSectionSwap=function(){var i=this,c=ge.textIfCameraScanSelected(),u=ge.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),p=document.createElement("div");p.style.textAlign="center";var C=pt.createElement("span",this.getDashboardSectionSwapLinkId());C.style.textDecoration="underline",C.style.cursor="pointer",C.innerText=Yt.isCameraScanType(this.currentScanType)?c:u,C.addEventListener("click",function(){if(!i.sectionSwapAllowed){i.verbose&&i.logger.logError("Section swap called when not allowed");return}i.resetHeaderMessage(),i.fileSelectionUi.resetValue(),i.sectionSwapAllowed=!1,Yt.isCameraScanType(i.currentScanType)?(i.clearScanRegion(),i.getCameraScanRegion().style.display="none",i.fileSelectionUi.show(),C.innerText=u,i.currentScanType=Gt.SCAN_TYPE_FILE,i.insertFileScanImageToScanRegion()):(i.clearScanRegion(),i.getCameraScanRegion().style.display="block",i.fileSelectionUi.hide(),C.innerText=c,i.currentScanType=Gt.SCAN_TYPE_CAMERA,i.insertCameraScanImageToScanRegion(),i.startCameraScanIfPermissionExistsOnSwap()),i.sectionSwapAllowed=!0}),p.appendChild(C),h.appendChild(p)},a.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var i=this,c=this;if(this.persistedDataManager.hasCameraPermissions()){na.hasPermissions().then(function(u){if(u){var h=document.getElementById(c.getCameraPermissionButtonId());if(!h)throw i.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else c.persistedDataManager.setHasPermission(!1)}).catch(function(u){c.persistedDataManager.setHasPermission(!1)});return}},a.prototype.resetHeaderMessage=function(){var i=document.getElementById(this.getHeaderMessageContainerId());i.style.display="none"},a.prototype.setHeaderMessage=function(i,c){c||(c=Tt.STATUS_DEFAULT);var u=this.getHeaderMessageDiv();switch(u.innerText=i,u.style.display="block",c){case Tt.STATUS_SUCCESS:u.style.background="rgba(106, 175, 80, 0.26)",u.style.color="#477735";break;case Tt.STATUS_WARNING:u.style.background="rgba(203, 36, 49, 0.14)",u.style.color="#cb2431";break;case Tt.STATUS_DEFAULT:default:u.style.background="rgba(0, 0, 0, 0)",u.style.color="rgb(17, 17, 17)";break}},a.prototype.showHideScanTypeSwapLink=function(i){this.scanTypeSelector.hasMoreThanOneScanType()&&(i!==!0&&(i=!1),this.sectionSwapAllowed=i,this.getDashboardSectionSwapLink().style.display=i?"inline-block":"none")},a.prototype.insertCameraScanImageToScanRegion=function(){var i=this,c=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){c.innerHTML="<br>",c.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(u){c.innerHTML="<br>",c.appendChild(i.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=n0,this.cameraScanImage.alt=ge.cameraScanAltText()},a.prototype.insertFileScanImageToScanRegion=function(){var i=this,c=document.getElementById(this.getScanRegionId());if(this.fileScanImage){c.innerHTML="<br>",c.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(u){c.innerHTML="<br>",c.appendChild(i.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=r0,this.fileScanImage.alt=ge.fileScanAltText()},a.prototype.clearScanRegion=function(){var i=document.getElementById(this.getScanRegionId());i.innerHTML=""},a.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},a.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},a.prototype.getDashboardSectionSwapLinkId=function(){return Ye.SCAN_TYPE_CHANGE_ANCHOR_ID},a.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},a.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},a.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},a.prototype.getCameraPermissionButtonId=function(){return Ye.CAMERA_PERMISSION_BUTTON_ID},a.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},a.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},a.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},a})();function vg(a,i){if(a&1&&(H(0,"option",18),V(1),X()),a&2){let c=i.$implicit;ht("value",c.id),se(),We(c.label||c.id)}}function Mg(a,i){a&1&&(H(0,"small",19),V(1,"No cameras detected or permission required"),X())}var li=class a{readerId="qr-reader";scanner;scanning=!1;scans=[];keyboardValue="";availableCameras=[];selectedCameraId;constructor(){wn.getCameras().then(i=>{this.availableCameras=i||[],this.availableCameras.length&&(this.selectedCameraId=this.availableCameras[0].id)}).catch(()=>{this.availableCameras=[]})}async start(i){if(this.scanning)return;try{navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&await navigator.mediaDevices.getUserMedia({video:!0})}catch(u){if(console.warn("Error getting userMedia, error =",u),u&&(u.name==="NotAllowedError"||u.name==="PermissionDeniedError")){alert("Camera permission denied. Please allow camera access in your browser settings or try another device.");return}alert("Failed to access camera: "+(u&&u.message?u.message:"Unknown error"));return}this.scanner=new wn(this.readerId);let c=i?{deviceId:{exact:i}}:{facingMode:"environment"};this.scanner.start(c,{fps:10},u=>this.onScan(u),u=>{}).then(()=>{this.scanning=!0}).catch(u=>{console.error(u),alert("Camera not available or failed to start scanner"),this.scanning=!1})}stop(){if(!this.scanner||!this.scanning){console.warn("Scanner is not running; nothing to stop");return}this.scanner.stop().then(()=>{this.scanning=!1;try{this.scanner?.clear()}catch{}this.scanner=void 0}).catch(i=>{console.warn("Failed to stop scanner cleanly",i);try{this.scanner?.clear()}catch{}this.scanner=void 0,this.scanning=!1})}onScan(i){let c=this.parseValue(i);this.scans.push(Object.assign({value:i,time:new Date},c))}parseValue(i){let c={parsed:!1};if(!i)return c;let u=i.split("|").map(h=>h.trim());return u.length>=4?(c.parsed=!0,c.styleModel=u[0],c.leather=u[1],c.color=u[2],c.size=u[3],u[4]&&(c.barcode=u[4])):c.barcode=i,c}onKeyboardEnter(){this.keyboardValue&&(this.onScan(this.keyboardValue.trim()),this.keyboardValue="")}ngOnDestroy(){this.stop()}static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["barcode-scanner"]],decls:24,vars:7,consts:[[1,"card","barcode-scanner"],[1,"card-header"],[1,"fa","fa-camera"],[1,"card-body"],[1,"d-flex","align-items-center","mb-2","gap-2"],[1,"form-select","w-auto","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-secondary","btn-sm",3,"click","disabled"],["class","text-muted ms-2",4,"ngIf"],["id","qr-reader",1,"reader"],[1,"keyboard","mt-3"],[1,"form-label"],[1,"input-group"],["placeholder","Scan from keyboard or type and press Enter",1,"form-control","form-control-sm",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"card-footer"],[3,"scans"],[3,"value"],[1,"text-muted","ms-2"]],template:function(c,u){c&1&&(H(0,"div",0)(1,"div",1)(2,"h5"),ue(3,"i",2),V(4," Barcode Scanner"),X()(),H(5,"div",3)(6,"div",4)(7,"select",5),Bt("ngModelChange",function(p){return Pt(u.selectedCameraId,p)||(u.selectedCameraId=p),p}),Pi(8,vg,2,2,"option",6),X(),H(9,"button",7),at("click",function(){return u.start(u.selectedCameraId)}),V(10,"Start"),X(),H(11,"button",8),at("click",function(){return u.stop()}),V(12,"Stop"),X(),Pi(13,Mg,2,0,"small",9),X(),ue(14,"div",10),H(15,"div",11)(16,"label",12),V(17,"Keyboard scanner / Manual entry"),X(),H(18,"div",13)(19,"input",14),Bt("ngModelChange",function(p){return Pt(u.keyboardValue,p)||(u.keyboardValue=p),p}),at("keyup.enter",function(){return u.onKeyboardEnter()}),X(),H(20,"button",15),at("click",function(){return u.onKeyboardEnter()}),V(21,"Add"),X()()()(),H(22,"div",16),ue(23,"scan-grid",17),X()()),c&2&&(se(7),Lt("ngModel",u.selectedCameraId),se(),ht("ngForOf",u.availableCameras),se(),ht("disabled",u.scanning),se(2),ht("disabled",!u.scanning),se(2),ht("ngIf",u.availableCameras.length===0),se(6),Lt("ngModel",u.keyboardValue),se(4),ht("scans",u.scans))},dependencies:[Vt,Za,qa,on,ls,cs,On,ss,vn,Rr,ti],styles:[".barcode-scanner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:12px;background-color:#fff;box-shadow:0 2px 8px #00000014;margin-bottom:16px}.barcode-scanner[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:12px 12px 0 0;padding:8px 12px}.barcode-scanner[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.5px;color:#fff;margin:0;font-size:1.1rem;display:flex;align-items:center;gap:8px}.barcode-scanner[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.barcode-scanner[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{font-size:.95rem;padding:12px}.barcode-scanner[_ngcontent-%COMP%]   .reader[_ngcontent-%COMP%]{width:100%;max-width:480px;min-height:200px;border:1px solid #e9ecef;display:block;margin:.5rem 0;padding:.25rem;border-radius:4px;background:#fafafa}.barcode-scanner[_ngcontent-%COMP%]   .keyboard[_ngcontent-%COMP%]{margin-top:.6rem}"]})};var x0=[{path:"login",component:Lr},{path:"",component:kr,canActivate:[ds],children:[{path:"cpo",loadComponent:()=>import("./chunk-UGJBVCF7.js").then(a=>a.CpoList)},{path:"cpo/add",loadComponent:()=>import("./chunk-2RNXAHNJ.js").then(a=>a.CpoForm)},{path:"cpo/edit/:id",loadComponent:()=>import("./chunk-2RNXAHNJ.js").then(a=>a.CpoForm)},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"process",loadComponent:()=>import("./chunk-ZDZYDM6Y.js").then(a=>a.ProcessList)},{path:"process/add",loadComponent:()=>import("./chunk-ZZCYXXW4.js").then(a=>a.ProcessForm)},{path:"process/edit/:id",loadComponent:()=>import("./chunk-ZZCYXXW4.js").then(a=>a.ProcessForm)},{path:"dashboard",loadComponent:()=>import("./chunk-HGEA4FHW.js").then(a=>a.Dashboard)},{path:"workorders",loadComponent:()=>import("./chunk-DUAVARJS.js").then(a=>a.WorkOrderList)},{path:"workorders/add",loadComponent:()=>import("./chunk-TB2H6VTE.js").then(a=>a.WorkOrderForm)},{path:"workorder/:id",loadComponent:()=>import("./chunk-PNPL3ENK.js").then(a=>a.WorkOrderDetail)},{path:"inventory",loadComponent:()=>import("./chunk-2HCLNTVP.js").then(a=>a.InventoryList)},{path:"inventory/add",loadComponent:()=>import("./chunk-ORS7GC7N.js").then(a=>a.InventoryForm)},{path:"inventory/edit/:id",loadComponent:()=>import("./chunk-ORS7GC7N.js").then(a=>a.InventoryForm)},{path:"qc",loadComponent:()=>import("./chunk-3MXXEXRX.js").then(a=>a.QcList)},{path:"qc/add",loadComponent:()=>import("./chunk-JCO5R55W.js").then(a=>a.QcForm)},{path:"packing",loadComponent:()=>import("./chunk-VLHWQ6ZA.js").then(a=>a.PackingList)},{path:"packing/add",loadComponent:()=>import("./chunk-RHYGB5JM.js").then(a=>a.PackingForm)},{path:"users",loadComponent:()=>import("./chunk-LQBGEB7X.js").then(a=>a.UserList)},{path:"users/add",loadComponent:()=>import("./chunk-AIA7ESFJ.js").then(a=>a.UserForm)},{path:"users/edit/:id",loadComponent:()=>import("./chunk-AIA7ESFJ.js").then(a=>a.UserForm)},{path:"barcode/generate",component:Kr},{path:"barcode/scan",component:li}]},{path:"**",redirectTo:"login"}];var ci=class a{auth=Be(yt);router=Be(rn);intercept(i,c){return c.handle(i).pipe(xn(u=>(u.status===401&&(this.auth.logout(),this.router.navigate(["/login"])),console.error("HTTP Error:",u),Sr(()=>u))))}static \u0275fac=function(c){return new(c||a)};static \u0275prov=jt({token:a,factory:a.\u0275fac})};var ui=class a{auth=Be(yt);intercept(i,c){let u=this.auth.getToken();if(u){let h=i.clone({setHeaders:{Authorization:u}});return c.handle(h)}return c.handle(i)}static \u0275fac=function(c){return new(c||a)};static \u0275prov=jt({token:a,factory:a.\u0275fac})};var p0={production:!1,apiBaseUrl:"http://localhost:5000/api"};var ra=class{handleError(i){if(i.message?.includes("checkout")||i.message?.includes("popup")){console.warn("Third-party extension error (ignored):",i.message);return}console.error("Application error:",i)}},m0={providers:[ka(),Ya(),rs(x0),es(),{provide:Ba,useClass:ra},{provide:Jr,useValue:p0.apiBaseUrl},{provide:Ui,useClass:ui,multi:!0},{provide:Ui,useClass:ci,multi:!0}]};var fi=class a{title=Fa("frontend");static \u0275fac=function(c){return new(c||a)};static \u0275cmp=et({type:a,selectors:[["app-root"]],decls:1,vars:0,template:function(c,u){c&1&&ue(0,"router-outlet")},dependencies:[Mr],encapsulation:2})};Ka(fi,m0).catch(a=>console.error(a));
